<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on 非淡泊无以明志，非宁静无以致远。</title>
    <link>/post/</link>
    <description>Recent content in Posts on 非淡泊无以明志，非宁静无以致远。</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2017 Sheng Luan</copyright>
    <lastBuildDate>Sun, 01 Jan 2017 00:00:00 +0800</lastBuildDate>
    <atom:link href="/post/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Is continued genetic improvement of livestock sustainable-阅读笔记</title>
      <link>/post/is-continued-genetic-improvement-of-livestock-sustainable/</link>
      <pubDate>Thu, 08 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/is-continued-genetic-improvement-of-livestock-sustainable/</guid>
      <description>&lt;p&gt;Hill William G. Is continued genetic improvement of livestock sustainable? Genetics, 2016, 202:977-881.&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;摘要&lt;/h2&gt;
&lt;p&gt;作者认为，很少遗传变异已经丢失，连续遗传改良是可持续的，没有问题的。&lt;/p&gt;
&lt;p&gt;ps：&lt;strong&gt;但是从商业角度看，并不是遗传变异丢失的问题，而是谁家的育种方案优化，遗传变异更丰富，培育出的良种性能更好。只是有遗传变异是远远不够的。&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;正文&lt;/h2&gt;
&lt;p&gt;作者主要从事鸡的选育工作。关于动物育种的历史、理论、方法，参见作者本人的下述著作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hill, W. G., 1982 Predictions of response to artificial selection from new mutations. Genet. Res. 40:255–278.&lt;/li&gt;
&lt;li&gt;Hill, W. G., 2010 Understanding and using quantitative genetic variation. Phil. Trans. R. Soc. B 365:73–85.&lt;/li&gt;
&lt;li&gt;Hill, W. G., 2014 Applications of population genetics to animal breeding, from Wright, Fisher and Lush to genomic prediction. Genetics 196: 1–16.&lt;/li&gt;
&lt;li&gt;Hill, W. G., A. Wolc, N. P. O’Sullivan, and S. Avendaño, 2016 Breeding for sustainability: maintaining and enhancing multi-trait genetic improvement, chapter 11 in Sustainable Poultry Production in Europe, edited by E. Burton, J. Gatcliffe, H. M. O’Neill, and D. Scholey. CABI, Wallingford, UK (in press).&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;已经取得的遗传进展&lt;/h3&gt;
&lt;p&gt;对于肉鸡，以1957年的一个未经选择的品系作为对照：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1991年统计的生长速度提高了3.47倍，2011年统计的生长速度提高了4.36倍，平均每年在3.4%~3.7%左右。&lt;/li&gt;
&lt;li&gt;2001年的统计结果中，鸡胸脯肉占体重的比例，也是1957年的2倍；&lt;/li&gt;
&lt;li&gt;饲料转化效率也达到了3.3%/年（1957-2005）；&lt;/li&gt;
&lt;li&gt;达到商品规格屠宰的时间，也缩短到35d；&lt;/li&gt;
&lt;li&gt;从工业界反馈的数据来看，体重每年的增加速度&lt;sub&gt;2%，胸脯肉在&lt;/sub&gt;4% （2006-2013）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为了增加生产速度，需要增加鸡的食欲，同时要控制食物摄入量，以便于更好的生产。对于生长速度的改良，会带来负面效应。由于体重变大，肉鸡腿和脚的支撑能力不足。&lt;/p&gt;
&lt;p&gt;肉鸡主要性状的遗传力表现为中高等，但是蛋鸡的生产性状，并不是这样。在60年前，育种学家非常担心选择平台期（selection plateaus)。但实际上，蛋鸡的饲料利用效率（鸡蛋重量/饲料重量）的进展在0.7%/年，仍在不断提高。尽管蛋鸡每天的产蛋量很少超过1个，但是鸡的产蛋年龄提前，并且体重更轻，产蛋周期更长，产的蛋更大。&lt;/p&gt;
&lt;p&gt;家禽的选育策略，通常是多元杂交方式。分别建立父本和母本选育系，父本选育系侧重生长，母本选育系侧重繁殖力。每个选育系主要是纯种选育，但是也会通过BLUP的方法考虑杂种的性能，因为杂种也就是商品鸡会在不同的养殖环境下养殖，譬如低饲料投喂量、高疾病风险、组饲养等。&lt;/p&gt;
&lt;p&gt;奶牛的群体结构，与家禽非常不同，要包括很多场，主要是通过后裔测定，选出好的公牛。最近几年，奶牛的选育重点，放在与产奶量性状负相关的牛奶蛋白百分比和母牛繁殖力等方面，并取得了一些进展，扭转了这两个性状下降的趋势。总体来看，荷斯坦奶牛的产奶量的遗传进展：每年0.5%，大约每代3%。随着基因组选择技术的应用，遗传改良速度也在不断提高。&lt;/p&gt;
&lt;p&gt;与动物相比，植物遗传材料很多，自交、双单倍体、克隆等，育种系统非常灵活。不利的地方时，受区域、天气的影响比较大。&lt;/p&gt;
&lt;p&gt;ps：&lt;strong&gt;水产动物，特别是南美白对虾，存在多种养殖模式，工厂化的部分，偏向于畜牧，标准化、高度可控的模式；但是开放的系统，如土池和高位池养殖模式，高盐、低盐等，又偏向于植物，需要强调基因型与环境互作。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;对于杂交玉米，产量的提高速度，大约是每年1%以上，如果在好的种植条件下，譬如有充足的的降雨量，大约是2%左右。对于小麦产量，改良速度大约是0.6~0.7%左右。&lt;/p&gt;
&lt;p&gt;优质种质的扩繁形式，动植物差别很大。植物如小麦，主要是出售近交系，而玉米是近交系的杂交后代。而动物，主要是通过纯种（奶牛）和杂种（家禽）形式扩繁销售。&lt;/p&gt;
&lt;p&gt;动植物的另外一个较大差别是，植物品种较为稳定，只有当新的品种替换了旧品种，那么改良的效果才会体现。而动物，每年提供的品种，性能都会比上一年要好。&lt;/p&gt;
&lt;p&gt;ps：在扩繁方面，水产动物与畜牧动物更为一致。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;遗传结构和模型&lt;/h2&gt;
&lt;p&gt;畜牧动物重要的生产性状都是数量性状，后代分布和选择反应均很好的验证了其符合Fisher的微效多基因模型。 来自人类身高的GWAS分析，也表明该性状是高度多基因决定的本质。 . 有一篇模拟文章，表明少数SNP不会对总遗传方差起主要作用。但是没怎么看懂。&lt;/p&gt;
&lt;p&gt;Kemper, K. E., C. M. Reich, and P. J. Bowman, C. J. Vander Jagt, A. J. Chamberlain et al., 2015 Improved precision of QTL mapping using a nonlinear Bayesian method in a multi-breed population leads to greater accuracy of across-breed genomic predictions. Genet. Sel. Evol. 47: 29.&lt;/p&gt;
&lt;p&gt;来自畜禽高密度基因组标记的研究表明：选择反应很难用几个标记解释。譬如最好的10-20个标记，只能解释跨世代总方差的0.5-1%，与实际结果不一致。&lt;/p&gt;
&lt;p&gt;基因组选择的作用，是通过利用realized relationship through shared genomic regions和marker-associated effects through linkage disequilibrium using information on distantly related individuals来提高选择的准确度。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>抛硬币测试与温度转换</title>
      <link>/post/coin-test/</link>
      <pubDate>Thu, 08 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/coin-test/</guid>
      <description>&lt;p&gt;栾佳硕的作业，计算硬币抛100万次，连续正面朝上10次的有多少次？&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
import random
counter1 = 0
counter2 = 0
for i in range(1000000):
    coin = random.choice([0,1]) #假定1表示正面
    if coin == 1:
        counter1 += 1
    else:
        counter1 = 0
    if counter1 == 10:
        counter2 += 1
        counter1 = 0
    
print(&amp;quot;抛掷硬币1000000次，其中连续10次正面朝上的次数为%i&amp;quot; % counter2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 抛掷硬币1000000次，其中连续10次正面朝上的次数为503&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;写一个函数，把摄氏度转为华氏度。&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;def convertC2F(C):
    F = 32 + C * 1.8
    return F
c1 = 30    
f1 = convertC2F(c1)    
print(&amp;quot;摄氏度%.2f等于华氏度%.2f&amp;quot; % (c1,f1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 摄氏度30.00等于华氏度86.00&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>pygame 练习1</title>
      <link>/post/pygame-exercise-1/</link>
      <pubDate>Wed, 07 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/pygame-exercise-1/</guid>
      <description>&lt;p&gt;栾佳硕给出的作业，用Pygame显示一个窗口（填充为黑色）:&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
import pygame as pg
from pygame.locals import *
from sys import exit
#初始化pygame
pg.init()
#设置屏幕分辨率640*480
screen = pg.display.set_mode((640,480),0,32)
#设置窗口的标题
pg.display.set_caption(&amp;quot;黑色窗口&amp;quot;)
#设置背景色
bg_color = (0,0,0)
while True:
    for event in pg.event.get():
        if event.type == QUIT:
            #接收到退出事件后退出程序
            exit()
    screen.fill(bg_color)
    &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;运行结果如下图所示：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/2018-02-07.png&#34; title=&#34;pygame生成的黑色窗口&#34; alt=&#34;pygame生成的黑色窗口&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;pygame生成的黑色窗口&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>python 定时器</title>
      <link>/post/python-timer/</link>
      <pubDate>Tue, 06 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/python-timer/</guid>
      <description>&lt;p&gt;栾佳硕给出的作业，要求三秒钟打印出一个随机小数:&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
import random
import time
seconds = 3
counter = 1
while counter &amp;lt;= 5:
    print(&amp;quot;第%i个两位小数是%.2f&amp;quot; %(counter,random.uniform(0,1)))
    counter += 1
    time.sleep(seconds)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 第1个两位小数是0.20
## 第2个两位小数是0.37
## 第3个两位小数是0.76
## 第4个两位小数是0.80
## 第5个两位小数是0.46&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>输入5个人的名字，并打印出来</title>
      <link>/post/input-five-names/</link>
      <pubDate>Tue, 06 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/input-five-names/</guid>
      <description>&lt;p&gt;栾佳硕给出的作业，输入5个人的名字，并打印出来:&lt;/p&gt;
&lt;p&gt;定义一个元组names，存储输入的用户名字。&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
names = ()
counter = 1
while counter &amp;lt;= 5:
    tuple1 = (input(&amp;quot;请输入您的名字&amp;quot;),)
    names += tuple1
    counter += 1
    
for i in names:
    print(i)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其他不需要编程的问题：&lt;/p&gt;
&lt;p&gt;1.什么是属性（对象）&lt;/p&gt;
&lt;p&gt;对象的属性，用来描述对象的特征。譬如一尾虾，它的属性可以包括：重量、长度、年龄等。从本质上讲，类是没有属性的，对象才有属性。&lt;/p&gt;
&lt;p&gt;2.如何创建模块？&lt;/p&gt;
&lt;p&gt;Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。&lt;/p&gt;
&lt;p&gt;模块让你能够有逻辑地组织你的 Python 代码段。&lt;/p&gt;
&lt;p&gt;把相关的代码分配到一个模块里能让你的代码更好用，更易懂。&lt;/p&gt;
&lt;p&gt;模块能定义函数，类和变量，模块里也能包含可执行的代码。&lt;/p&gt;
&lt;p&gt;通过&lt;code&gt;import&lt;/code&gt;语句导入自定义的模块。譬如自定义了一个名为shrimp.py的模块，可以这样导入：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;import shrimp&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果你只想导入shrimp模块中一个计算体重的&lt;code&gt;get_weight()&lt;/code&gt;函数，可以用&lt;code&gt;from ... import&lt;/code&gt;语句实现：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;from shrimp import get_weight&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;关于模块的知识，我参考的&lt;a href=&#34;http://www.runoob.com/python/python-modules.html&#34;&gt;这个网址&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3.while循环什么时候结束？&lt;/p&gt;
&lt;p&gt;设定一个条件，当不满足条件的时候，while循环就结束了。譬如下边的例子：当i等于6时，不满足&lt;code&gt;i&amp;lt;=5&lt;/code&gt;的条件，就会自动结束。&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;i = 1
while i &amp;lt;= 5:
    print(i)
    i += 1&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 1
## 2
## 3
## 4
## 5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;print(i)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 6&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4.Python中计算&lt;code&gt;6*6*6*6&lt;/code&gt;的另一种做法是什么？&lt;/p&gt;
&lt;p&gt;这是一个很好的问题，通过查询网络，可以通过&lt;code&gt;**&lt;/code&gt;符号实现：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;print(6*6*6*6)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 1296&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;print(6**4)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 1296&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>第六届中国养虾高手年会记录</title>
      <link>/post/the-sixth-meeting-about-how-to-rearing-shrimp-in-haikou/</link>
      <pubDate>Sat, 27 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/the-sixth-meeting-about-how-to-rearing-shrimp-in-haikou/</guid>
      <description>&lt;p&gt;1.25-26日，参加了在海口由水产前沿举办的第六届中国养虾高手年会。具体的会议记录，见水产前沿的&lt;a href=&#34;http://www.fishfirst.cn/article-98482-1.html&#34;&gt;详细报道&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;第一次参加非学术组织举办的这种会议，感觉非常新鲜，也非常有活力。整个活动，没有政府部门的领导参加，纯粹是学术界跟企业界的对接，这种形式真的非常好。很多饲料、苗种企业对于真正有用的学术成果非常渴望，从科研工作者的角度来看，学术成果要想转化为生产力，应该多参加这样的会议。也有利于自己学术方向的调整，做真正有用的研究。&lt;/p&gt;
&lt;p&gt;会议的几点收获：&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1 种业方面&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.1 种质方面&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;中国南美白对虾的养殖产量下降的非常厉害。SIS郑光发先生的报道，预测2017年南美白对虾国内产量只有58万吨左右。印度和越南的产量在不断增加，大约分别为45万吨和50万吨左右。这个结果与统计年鉴存在较大的出入。&lt;/li&gt;
&lt;li&gt;国外进口南美白对虾量在不断增加，正大陈丹先生的报告显示，2017年进口量在30万吨左右。&lt;/li&gt;
&lt;li&gt;中国进口种虾没有充分发挥性能。中国进口25万对，印度和越南进口分别在9万对左右。结果产量现在后两个国家追平。SIS郑光发认为主要原因是进口种虾鱼龙混杂，没有严格把控亲虾来源。事实上在企业的走访中，也表明一些&lt;strong&gt;进口亲虾都携带荧光弧菌&lt;/strong&gt;等问题。&lt;/li&gt;
&lt;li&gt;国外公司如SIS在抗性测试方面，从报告中表明是对各种细菌和病毒都进行抗性测试。&lt;/li&gt;
&lt;li&gt;国外公司已经意识到苗种的适应性差问题，譬如SIS提到，专门在国内开始性状测试工作，主要是针对土塘和高位池进行测试。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;正大陈丹先生在报告中提到，正大优质种虾的标准：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;没有以下病毒：WSSV（白斑综合症病毒）、IHHNV（Infectious subcutaneous and hematopoietic tissue necrosis virus，传染性皮下及造血组织坏死病毒）、IMNV(传染性肌肉坏死病毒）、TSV（桃拉病毒）、黄头病毒（YHV）、鳃病毒（GAV）、NHPB（肝胰腺坏死性细菌）、EMS/AHPND（早期死亡综合征/急性肝胰腺坏死症）、EHP；&lt;/li&gt;
&lt;li&gt;养殖天数超过180d，公虾体重&amp;gt;65g，母虾体重70g；&lt;/li&gt;
&lt;li&gt;性器官发育完好，肢体发育完全，健康活力好；&lt;/li&gt;
&lt;li&gt;亲虾产的幼体从2012年的350um，到2017年的480um，大了1/3；&lt;/li&gt;
&lt;li&gt;苗种的生长速度，以达到30g/尾规格为标准，2012年需要110d，2017年只需要64d，缩短了56d，非常惊人。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.2 生物安保&lt;/h3&gt;
&lt;p&gt;从一个厂区的角度，一个种虾场或者苗种场应该具备：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;进出车辆消毒&lt;/li&gt;
&lt;li&gt;生产度单独隔离&lt;/li&gt;
&lt;li&gt;生产区雾化消毒通道&lt;/li&gt;
&lt;li&gt;人员淋浴消毒室，进出车间人员雾化消毒&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;黄倢老师的报告： 从他的报告中，可以看出，2013-2017，病毒的检出率是在不断下降的。特别是EHP的检出率，已经由2017年的50%多，下降到现在的不到30%。WSSV的检出率从30%到10%。急性肝胰腺坏死症2016年特别厉害（接近30%），2017在15%左右。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一种新的病毒病：虾血细胞虹彩病毒病（SHIV）。主要症状：
&lt;ul&gt;
&lt;li&gt;肝胰腺颜色变浅&lt;/li&gt;
&lt;li&gt;额剑基部出现白点，如罗氏沼虾“白头病”&lt;/li&gt;
&lt;li&gt;整体颜色变浅，体节明显&lt;/li&gt;
&lt;li&gt;幼虾死亡明显&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;感染24小时内升温至33度可以有效的防止白斑病。&lt;/li&gt;
&lt;li&gt;不支持多种虾混养，认为会带来疾病的传播。&lt;/li&gt;
&lt;li&gt;急性肝胰腺坏死症
&lt;ul&gt;
&lt;li&gt;机理：Pirvp毒力蛋白对幼虾消化系统急性毒性&lt;/li&gt;
&lt;li&gt;菌株：副溶血弧菌、坎贝氏弧菌、欧文氏弧菌&lt;/li&gt;
&lt;li&gt;症状：肝脏白膜减少-白膜消失-颜色变浅-黄白-灰白-透明；虾体尾单附肢发蓝、虾体发蓝、虾肉浑浊、虾体发白；幼虾死亡率高、可以达到&amp;gt;80%；成虾死亡率低&lt;/li&gt;
&lt;li&gt;消毒：过硫酸氢钾消毒效果差；双氧水、聚六亚甲基胍盐酸盐具有较好的作用。&lt;/li&gt;
&lt;li&gt;预防：降低盐度至6‰之下，&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;EHP
&lt;ul&gt;
&lt;li&gt;机理：EHP感染导致肝脏能量供应途径受阻。&lt;/li&gt;
&lt;li&gt;因为一直在摄食，肝胰腺和肠道颜色较深，但是生长缓慢，肌肉腹节透明。&lt;/li&gt;
&lt;li&gt;EHP感染超过10^3拷贝/ng肝胰腺DNA，那么受感染的风险较大。&lt;/li&gt;
&lt;li&gt;EHP感染会导致体重降低30%。&lt;/li&gt;
&lt;li&gt;单独感染可能并不致死，与弧菌一起感染，死亡率增加。&lt;/li&gt;
&lt;li&gt;存在不同的传播模式，单峰或者双峰，可能在不同的发育阶段都可以感染。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于病原的检测：&lt;br /&gt;
* 杭州众测生物科技有限公司，开发了水生动物疾病分子检测系统解决方案。利用重组介导链替换核酸扩增技术RAAD，可以5-15分钟出结果。 * DHelix 广州双螺旋基因技术有限公司，也可以快速检测病毒、细菌等病原。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;2 配套技术&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 饲料&lt;/h3&gt;
&lt;p&gt;正大1-3号虾料，大虾宝、中虾宝，蛋白含量在40%以上。&lt;/p&gt;
&lt;p&gt;英伟公司（INVE）推出了两种饲料：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BREED-S FRESH 普瑞德种虾专用饲料，可以替代70%鲜活料、生物安全性高、提高产卵性能。它的营养成分：60%蛋白、Lipid（油脂）15%、n-3 HUFA 2.8%、Vit A 22500IU/kg、Vit E 500ppm、Vit c 3000ppm。在种虾饲料中添加益生菌（probiotics），产卵和孵化过程中，添加益生菌。&lt;/li&gt;
&lt;li&gt;FRiPPAK FRESH GOLD 金牌福瑞派系列虾苗专用微胶囊饵料。根据报告，可以替代65%-85%的卤虫。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;天津英创公司推出了育苗宝1号、鱼苗宝2号：主要是桡足类营养强化后，清洗、消毒，零下30度冷冻，真空包装。如果打算替代卤虫，死掉后，虾苗是否爱吃，是个问题。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.2 水质处理、分析和调节&lt;/h3&gt;
&lt;p&gt;参观了海兴农翁田场，育苗用水处理模式：抽水到蓄水池、一二级沙滤去除大颗粒杂质、遮光黑暗沉淀池、氯处理杀菌、沙港去除小颗粒杂质、去除有机物（蛋白分离器）、二次遮光沉淀、臭氧杀菌消毒、过滤细小颗粒吸附残余臭氧、过滤细小颗粒、紫外线杀菌、进入车间。&lt;/p&gt;
&lt;p&gt;正大试剂盒：&lt;strong&gt;余氯、亚硝酸盐、pH值、总碱度、钾盐、溶解氧、氨氮、钙镁离子&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;益生菌：水净宝、速清宝、育水宝、益菌宝、稳水宝、健肠宝&lt;/p&gt;
&lt;p&gt;矿物质：钙镁晶、钙/镁/钾速补、塘低净、海盐宝（提高盐度）、海蜜（提高总碱度）&lt;/p&gt;
&lt;p&gt;亚硝酸盐检测和调控是一个重点，可以多措并举：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;高效集排污、菌、藻、交换量&lt;/li&gt;
&lt;li&gt;从源头控制&lt;/li&gt;
&lt;li&gt;高溶解氧缓解毒性&lt;/li&gt;
&lt;li&gt;盐度千分之五的相对安全阈值&lt;/li&gt;
&lt;li&gt;发挥化能自养菌-硝化细菌的功效&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;多位专家强调：益生菌如芽孢杆菌增值速度慢，大约3个小时，而有害菌如弧菌增值速度在20分钟。因此应该使用高品质的益生菌。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.3 育苗技术&lt;/h3&gt;
&lt;p&gt;INVE 专家做了题为“The roadmap to quality shrimp fry”的报告，具体内容后续再行更新。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.4 养虾模式&lt;/h3&gt;
&lt;p&gt;3C：Clean shrimp、Clean water、Clean bottom&lt;/p&gt;
&lt;p&gt;外籍专家 M. Poulain - Project Manager 做了一个报告：Indoor zero water exchange super-intensive shrimp production 高密度零交换水工厂化对虾养殖模式。&lt;/p&gt;
&lt;p&gt;工厂化模式下的检测参考流程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;水源检测：初期检测、定期检测&lt;/li&gt;
&lt;li&gt;其他定期检测项目
&lt;ul&gt;
&lt;li&gt;菌相&lt;/li&gt;
&lt;li&gt;理化因子：氨氮、亚硝酸盐和酸碱度&lt;/li&gt;
&lt;li&gt;虾体：健康程度、生长速度、匀称度、肥满度&lt;/li&gt;
&lt;li&gt;饲料及动保产品的定期抽检&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;养虾达人李涛报告中的两种养殖模式：&lt;/p&gt;
&lt;p&gt;（1）换水量很少，连续3天换水量少于15%，类似于循环水养殖模式。&lt;/p&gt;
&lt;p&gt;这种模式应该以菌为主，以藻为辅。微生物作为主要的水质处理手段。这种方法通过较高频率的补充微生物，稳定水体菌相、水体理化指标。优点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;料比低。&lt;/li&gt;
&lt;li&gt;可复制性高。&lt;/li&gt;
&lt;li&gt;稳定性强。&lt;/li&gt;
&lt;li&gt;交换量低。&lt;/li&gt;
&lt;li&gt;超高菌相，压制弧菌。&lt;/li&gt;
&lt;li&gt;定向搭配藻种，减轻系统负担。&lt;/li&gt;
&lt;li&gt;充分利用微生物的代谢产物，保健抗病。&lt;/li&gt;
&lt;li&gt;受季节和光照的影响弱。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于这种模式，曝气要均匀，密集；气盘分散型点式布局。&lt;/p&gt;
&lt;p&gt;轻微搅动水，转水动力不能大，时间也不易过长，否则生成的絮团不沉浮在水中，虾吃不到。换水量也不宜过大，否则影响菌相和总菌量。&lt;/p&gt;
&lt;p&gt;（2）大换水量模式&lt;/p&gt;
&lt;p&gt;曝气：集中在外围，中间不宜放置过多的曝气头。否则影响水流动。&lt;/p&gt;
&lt;p&gt;转水：动水力度大，转水时间长。&lt;/p&gt;
&lt;p&gt;换水：量要大，保证水质清新。&lt;/p&gt;
&lt;p&gt;转水排污，由于没有足够的营养物质供细菌附着，使用微生态制剂效果并不显著。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.4 配套设备&lt;/h3&gt;
&lt;p&gt;有一家&lt;a href=&#34;http://www.yu2le.com/index.html#&#34;&gt;鱼儿乐&lt;/a&gt;公司,一家物联网平台，实现了养殖水质数据在线监控。有一套手册，有时间再仔细看一下。&lt;/p&gt;
&lt;p&gt;目前的最新系统是鱼儿乐X5技术：荧光法溶解氧传感器；寿命长，稳定性好，免维护。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Rgraphviz 学习笔记</title>
      <link>/post/rgraphviz-note1/</link>
      <pubDate>Mon, 22 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/rgraphviz-note1/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;http://www.graphviz.org/&#34;&gt;graphviz&lt;/a&gt; (Graph Visualization Software)是贝尔实验室鼓捣出来的一个用来展示结构化信息的软件。有一个对应的Rgraphviz包，学习一下，这是一个用来画系谱图的好工具。&lt;/p&gt;
&lt;p&gt;Rgraphviz包现在已经被收录到&lt;a href=&#34;http://www.bioconductor.org/&#34;&gt;Bioconductor&lt;/a&gt;平台，不在cran中，因此正常的安装包的流程无法获取该包。需要根据Bioconductor的&lt;a href=&#34;http://www.bioconductor.org/packages/release/bioc/html/Rgraphviz.html&#34;&gt;安装指令&lt;/a&gt;进行安装：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;source(&amp;quot;https://bioconductor.org/biocLite.R&amp;quot;)
biocLite(&amp;quot;Rgraphviz&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;graphviz&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. Graphviz的简单说明&lt;/h2&gt;
&lt;p&gt;这个软件包可以生成各种图像格式的文件，以及SVG文件，可以用于web网络展示；也可以生成PDF文件。&lt;/p&gt;
&lt;p&gt;graphviz 中国包括了很多布局器：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dot 默认的布局方式，主要是用于有向图。（画系谱，这应该是一个主要布局方式）&lt;/li&gt;
&lt;li&gt;neato 基于spring-model（又称force-based）算法&lt;/li&gt;
&lt;li&gt;twopi 径向布局&lt;/li&gt;
&lt;li&gt;circo 圆环布局&lt;/li&gt;
&lt;li&gt;fdp 无向图&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;graphviz默认使用一种dot语言来定义图形元素，然后选择上边的布局算法进行布局，最后生成结果。&lt;/p&gt;
&lt;p&gt;大体步骤如下： 1. 利用dot脚本，定义一个图，然后向图中，添加节点和边。 2. 定义节点和边各自的属性，比如形状、颜色、填充模式、字体等。 2. 使用布局引擎，调用布局算法，绘制图形。&lt;/p&gt;
&lt;p&gt;graphviz中三个基本的元素：图（graph）、节点（node）和边（edge） 参考一篇&lt;a href=&#34;http://icodeit.org/2015/11/using-graphviz-drawing/&#34;&gt;blog&lt;/a&gt;，关于graphviz的入门说明。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;graphviz&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;2. 初窥Graphviz&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::opts_chunk$set(echo = TRUE,fig.align = &amp;quot;center&amp;quot;)
suppressPackageStartupMessages(require(Rgraphviz))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(123)
v &amp;lt;- letters[1:10] #储存节点
m &amp;lt;- 1:4 #
g1 &amp;lt;- randomGraph(v,m,0.2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;不同的布局样式，默认是有向图。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(g1)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:dot&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/dot-1.png&#34; alt=&#34;默认的有向图(dot)&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: 默认的有向图(dot)
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;第二种布局：neato&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(g1, &amp;quot;neato&amp;quot; )&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:neato&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/neato-1.png&#34; alt=&#34;第二种布局(neato)&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 2: 第二种布局(neato)
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;第三种布局，twopi：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(g1, &amp;quot;twopi&amp;quot; )&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:twopi&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/twopi-1.png&#34; alt=&#34;第三种布局(twopi)&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 3: 第三种布局(twopi)
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;3. 从头开始画一个图&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#定义节点
nodes &amp;lt;- c(&amp;quot;A&amp;quot;,&amp;quot;B&amp;quot;,&amp;quot;C&amp;quot;,&amp;quot;D&amp;quot;,&amp;quot;E&amp;quot;,&amp;quot;F&amp;quot;,&amp;quot;G&amp;quot;)
#生成一个简单的系谱图
rEG &amp;lt;- new(&amp;quot;graphNEL&amp;quot;,nodes=nodes,edgemode=&amp;quot;directed&amp;quot;)
rEG &amp;lt;- addEdge(from=&amp;quot;A&amp;quot;,to = &amp;quot;B&amp;quot;,graph = rEG,weights = 1)
rEG &amp;lt;- addEdge(from=&amp;quot;A&amp;quot;,to = &amp;quot;C&amp;quot;,graph = rEG,weights = 2)
rEG &amp;lt;- addEdge(from=&amp;quot;B&amp;quot;,to = &amp;quot;D&amp;quot;,graph = rEG,weights = 3)
rEG &amp;lt;- addEdge(from=&amp;quot;B&amp;quot;,to = &amp;quot;E&amp;quot;,graph = rEG,weights = 10)
rEG &amp;lt;- addEdge(from=&amp;quot;C&amp;quot;,to = &amp;quot;F&amp;quot;,graph = rEG,weights = 3)
rEG &amp;lt;- addEdge(from=&amp;quot;C&amp;quot;,to = &amp;quot;G&amp;quot;,graph = rEG,weights = 10)
#从上望下画
plot(rEG,attrs=list(graph=list(rankdir=&amp;quot;TB&amp;quot;)))  #TB from top to bottom&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:simple&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/simple-1.png&#34; alt=&#34;最简单的图&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 4: 最简单的图
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;从下往上画，更符合系谱图的惯例&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/draworder-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;4. 调整节点的颜色&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(node=list(color=&amp;quot;deepskyblue4&amp;quot;,fontcolor=&amp;quot;orange&amp;quot;,fillcolor=&amp;quot;deepskyblue4&amp;quot;),graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/nodecolor-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;5. 调整节点的形状&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(node=list(shape=&amp;quot;ellipse&amp;quot;,color=&amp;quot;deepskyblue4&amp;quot;,fontcolor=&amp;quot;orange&amp;quot;,fillcolor=&amp;quot;deepskyblue4&amp;quot;),graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/nodeshape-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;6. 调整边的颜色&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(node=list(color=&amp;quot;deepskyblue4&amp;quot;,fontcolor=&amp;quot;orange&amp;quot;,fillcolor=&amp;quot;deepskyblue4&amp;quot;),edge=list(color=&amp;quot;deepskyblue4&amp;quot;),graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/edge-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>字符串处理包stringr学习笔记-1</title>
      <link>/post/stringr-note-1/</link>
      <pubDate>Thu, 11 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/stringr-note-1/</guid>
      <description>&lt;script src=&#34;/rmarkdown-libs/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/rmarkdown-libs/str_view/str_view.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/rmarkdown-libs/str_view-binding/str_view.js&#34;&gt;&lt;/script&gt;


&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;suppressPackageStartupMessages(require(stringr))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;R中的字符串处理函数，不但多，而且难记，参数调用方法也不一致。stringr包提供了统一名称的函数调用形式。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 基本处理&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.1 计算字符串的长度&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(&amp;quot;abc&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(&amp;quot;你好&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 2&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(NA)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] NA&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(c(&amp;quot;abc&amp;quot;,&amp;quot;ad&amp;quot;,&amp;quot;co&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3 2 2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_length&lt;/code&gt;等同于R中自带的&lt;code&gt;nchar()&lt;/code&gt;函数可以正确的识别中文字的个数，赞一个。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.2 提取子字符串&lt;/h3&gt;
&lt;p&gt;下述函数可以针对向量操作，提取子字符串&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;-  c(&amp;quot;abcdefgh&amp;quot;,&amp;quot;dljwowowjj&amp;quot;)
str_sub(x,2,4) #从第2个位置到第四个位置&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;bcd&amp;quot; &amp;quot;ljw&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sub(x,2,-2) #第二个位置到倒数第二个位置&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;bcdefg&amp;quot;   &amp;quot;ljwowowj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.3 修改字符串中指定位置的内容&lt;/h3&gt;
&lt;p&gt;修改字符串中某个位置的字符&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sub(x,3,5) &amp;lt;- &amp;quot;XYZ&amp;quot;
x&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfgh&amp;quot;   &amp;quot;dlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.4 重复字符串的内容&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_dup(x,3) #表示每个字符串重复两次&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfghabXYZfghabXYZfgh&amp;quot;       &amp;quot;dlXYZwowjjdlXYZwowjjdlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_dup(x,c(2,3)) #表示第一个字符串重复2次，第二个字符串重复3次&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfghabXYZfgh&amp;quot;               &amp;quot;dlXYZwowjjdlXYZwowjjdlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.5 填补字符串至一定长度&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_pad(x,str_length(x[2])) #把第一个字符串用空格补充至跟第二字符串一样长&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;  abXYZfgh&amp;quot; &amp;quot;dlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_pad(string = x,width = str_length(x[2]),side = &amp;quot;right&amp;quot;, pad = &amp;quot;?&amp;quot;) #一个标准写法，用？号补充，在填补在右边&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfgh??&amp;quot; &amp;quot;dlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;缩写字符串&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_trunc(x,3)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;...&amp;quot; &amp;quot;...&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;默认的最小缩写字符串长度就是3（“…”），因此直接显示为“…”。&lt;/p&gt;
&lt;p&gt;如果想缩写为2位，可以这样写：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_trunc(x,2,ellipsis = &amp;quot;.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;a.&amp;quot; &amp;quot;d.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.6 剔除字符串中的空格&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;  a   &amp;quot;, &amp;quot;b   &amp;quot;,  &amp;quot;   c&amp;quot;)
str_trim(x)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.7 大小写转换+本地语言支持&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- &amp;quot;You are beautiful.&amp;quot;
str_to_lower(x) #转换为小写&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;you are beautiful.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_upper(x) #转换为大写&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;YOU ARE BEAUTIFUL.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_title(x) #首字母大写&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;You Are Beautiful.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- &amp;quot;i love you&amp;quot;
str_to_upper(x,locale = &amp;quot;tr&amp;quot;) #土耳其语,i带点&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;&amp;lt;U+0130&amp;gt; LOVE YOU&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#stringi::stri_locale_list() #语言支持列表&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.8 排名和排序&lt;/h3&gt;
&lt;p&gt;获得每个元素的排名&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;a&amp;quot;,&amp;quot;y&amp;quot;,&amp;quot;i&amp;quot;,&amp;quot;o&amp;quot;)
str_order(x)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 3 4 2&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;y &amp;lt;- c(&amp;quot;ac&amp;quot;,&amp;quot;oa&amp;quot;,&amp;quot;bp&amp;quot;,&amp;quot;oo&amp;quot;)
str_order(y)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 3 2 4&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对y中的元素进行排序&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(y)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;ac&amp;quot; &amp;quot;bp&amp;quot; &amp;quot;oa&amp;quot; &amp;quot;oo&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#另外一种实现方式
y[str_order(y)]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;ac&amp;quot; &amp;quot;bp&amp;quot; &amp;quot;oa&amp;quot; &amp;quot;oo&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;降序排列&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(x=y,decreasing = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;oo&amp;quot; &amp;quot;oa&amp;quot; &amp;quot;bp&amp;quot; &amp;quot;ac&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;字符类型的数字，支持按照数字大小排序&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- as.character(c(sample(1:100,5),1000))
x&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;92&amp;quot;   &amp;quot;55&amp;quot;   &amp;quot;83&amp;quot;   &amp;quot;61&amp;quot;   &amp;quot;74&amp;quot;   &amp;quot;1000&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(x)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;1000&amp;quot; &amp;quot;55&amp;quot;   &amp;quot;61&amp;quot;   &amp;quot;74&amp;quot;   &amp;quot;83&amp;quot;   &amp;quot;92&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(x,numeric =TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;55&amp;quot;   &amp;quot;61&amp;quot;   &amp;quot;74&amp;quot;   &amp;quot;83&amp;quot;   &amp;quot;92&amp;quot;   &amp;quot;1000&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.9 合并字符串&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_c(&amp;quot;I&amp;quot;,&amp;quot;love&amp;quot;,&amp;quot;this&amp;quot;,&amp;quot;world!&amp;quot;,sep = &amp;quot; &amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;I love this world!&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_c(c(&amp;quot;2018&amp;quot;,&amp;quot;01&amp;quot;,&amp;quot;18&amp;quot;),collapse = &amp;quot;-&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2018-01-18&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;2 模式匹配&lt;/h2&gt;
&lt;div id=&#34;-regular-expression&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 正则表达 regular expression&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;str_view()&lt;/code&gt;和&lt;code&gt;str_view_all()&lt;/code&gt;用来展示正则表达式是如何匹配的，是学习正则表达式的好帮手。&lt;/p&gt;
&lt;div class=&#34;section level4&#34;&gt;
&lt;h4&gt;2.1.1 基础匹配&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;apple&amp;quot;, &amp;quot;banana&amp;quot;, &amp;quot;pear&amp;quot;)
str_view(x, &amp;quot;an&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;b&lt;span class=&#39;match&#39;&gt;an&lt;\/span&gt;ana&lt;\/li&gt;\n  &lt;li&gt;pear&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;接下来会稍微复杂一些，加入通配符&lt;code&gt;.&lt;/code&gt;，匹配任何字符：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(x,&amp;quot;.a.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-2&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-2&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;ban&lt;\/span&gt;ana&lt;\/li&gt;\n  &lt;li&gt;p&lt;span class=&#39;match&#39;&gt;ear&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;但是如何匹配字符串中的&lt;code&gt;.&lt;/code&gt;呢？我们需要一个逃脱符，也就是反斜杠&lt;code&gt;\&lt;/code&gt;，英文是blackflash，&lt;code&gt;\.&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;但是这里有一个问题，那就是在普通字符串处理中，R也定义了&lt;code&gt;\&lt;/code&gt;是一个逃脱符，而正则表达式又是通过字符串表达出来的，因此，为了匹配&lt;code&gt;.&lt;/code&gt;，需要写为&lt;code&gt;\\.&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;writeLines(&amp;quot;\\.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## \.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(&amp;quot;b.a&amp;quot;,&amp;quot;\\.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-3&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-3&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;b&lt;span class=&#39;match&#39;&gt;.&lt;\/span&gt;a&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;那么另外一个问题是，如何匹配文字&lt;code&gt;\&lt;/code&gt;。根据规则，应该是&lt;code&gt;\\&lt;/code&gt;。但是，要想在R中输出&lt;code&gt;\\&lt;/code&gt;字符串（两个反斜杠），我们每个前边都需要再加一个反斜杠，这就变成了四个反斜杠&lt;code&gt;\\\\&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;writeLines(&amp;quot;\\\\&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## \\&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(&amp;quot;a\\b&amp;quot;,&amp;quot;\\\\&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-4&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-4&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;a&lt;span class=&#39;match&#39;&gt;\\&lt;\/span&gt;b&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;section level4&#34;&gt;
&lt;h4&gt;2.1.2 引导符&lt;/h4&gt;
&lt;p&gt;如何匹配开头或者结尾字符。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;^&lt;/code&gt;用于匹配开头。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$&lt;/code&gt;用于匹配结尾。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;apple&amp;quot;, &amp;quot;banana&amp;quot;, &amp;quot;pear&amp;quot;)
str_view(x, &amp;quot;^a&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-5&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-5&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pple&lt;\/li&gt;\n  &lt;li&gt;banana&lt;\/li&gt;\n  &lt;li&gt;pear&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(x,&amp;quot;a$&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-6&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-6&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;banan&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;pear&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(x,&amp;quot;^pear$&amp;quot;) #匹配完整字符串&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;div id=&#34;htmlwidget-7&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-7&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;banana&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;pear&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt; 如何匹配文字&lt;code&gt;$^$&lt;/code&gt;？&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(&amp;quot;$^$&amp;quot;,&amp;quot;\\$\\^\\$&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-8&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-8&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;$^$&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;一个小练习题，从&lt;code&gt;stringr::words&lt;/code&gt;900多个单词中找出首字母是y的所有单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;^y&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;div id=&#34;htmlwidget-9&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-9&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;ear&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;es&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;esterday&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;et&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;ou&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;oung&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt; 结尾是x的所有单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;x$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-10&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-10&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;bo&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;se&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;si&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;ta&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;列出长度为11的所有单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;^.{11}$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-11&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-11&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;appropriate&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;environment&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;opportunity&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;responsible&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;section level4&#34;&gt;
&lt;h4&gt;2.1.2 匹配不同类型的字符&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;.&lt;/code&gt;匹配任何字符，其他类型的字符包括： * &lt;code&gt;\d&lt;/code&gt;匹配任何数字 * &lt;code&gt;\s&lt;/code&gt;匹配空格、制表符、换行符 * &lt;code&gt;[abc]&lt;/code&gt;匹配abc中的任一个字符 * &lt;code&gt;[^abc]&lt;/code&gt; 匹配除了abc以外的任一个字符&lt;/p&gt;
&lt;p&gt;小小练习题。&lt;/p&gt;
&lt;p&gt;查找元音字母打头的单词&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;^[aeiou]&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-12&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-12&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ble&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;bout&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;bsolute&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ccept&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ccount&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;chieve&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;cross&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ct&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ctive&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ctual&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;dd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ddress&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;dmit&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;dvertise&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ffect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;fford&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;fter&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;fternoon&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gain&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gainst&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ge&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gent&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;go&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gree&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ir&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ll&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;llow&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lmost&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;long&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lready&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lright&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lso&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lthough&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lways&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;merica&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;mount&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;nd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;nother&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;nswer&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ny&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;part&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pparent&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ppear&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pply&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ppoint&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pproach&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ppropriate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rea&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rgue&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rm&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;round&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rrange&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rt&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;s&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;sk&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ssociate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ssume&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;t&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ttend&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;uthority&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;vailable&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ware&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;way&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;wful&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ach&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;arly&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ast&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;asy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;at&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;conomy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ducate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ffect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;gg&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ight&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ither&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;lect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;lectric&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;leven&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;lse&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;mploy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ncourage&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ngine&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nglish&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;njoy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nough&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nter&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nvironment&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;qual&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;special&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;urope&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ven&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;vening&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ver&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;very&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;vidence&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xact&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xample&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xcept&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xcuse&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xercise&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xist&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xpect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xpense&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xperience&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xplain&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xpress&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xtra&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ye&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;dea&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;dentify&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;f&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;magine&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;mportant&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;mprove&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;n&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nclude&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ncome&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ncrease&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ndeed&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ndividual&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ndustry&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nform&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nside&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nstead&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nsure&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nterest&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nto&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ntroduce&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nvest&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nvolve&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ssue&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;t&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;tem&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;bvious&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ccasion&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;dd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;f&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ff&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ffer&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ffice&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ften&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;kay&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ld&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;n&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;nce&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ne&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;nly&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;pen&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;perate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;pportunity&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ppose&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;r&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;rder&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;rganize&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;riginal&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ther&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;therwise&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ught&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ut&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ver&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;wn&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nder&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nderstand&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nion&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nit&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nite&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;niversity&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nless&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;ntil&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;p&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;pon&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;se&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;sual&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;那些单词结尾是“ed”但不是“eed”的单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;[^e]ed$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-13&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-13&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;bed&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;hund&lt;span class=&#39;match&#39;&gt;red&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;red&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;筛选出结尾是ing或者ise的单词&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;ing|ise$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-14&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-14&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;advert&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;br&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;dur&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;even&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;exerc&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;k&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;mean&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;morn&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;otherw&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;pract&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;ra&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;real&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;r&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;r&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;s&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;s&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;le&lt;\/li&gt;\n  &lt;li&gt;surpr&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;th&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;验证字母q后边是否总是跟着字母u，也就是说查找那些q后边不是u的单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(words,&amp;quot;q[^u]&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;div id=&#34;htmlwidget-15&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-15&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt; 结果是没找到。&lt;/p&gt;
&lt;p&gt;验证另外一个字母搭配规则，i在e前或者是在c后边。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(words,&amp;quot;ie|ci&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-16&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-16&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;ach&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ve&lt;\/li&gt;\n  &lt;li&gt;asso&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ate&lt;\/li&gt;\n  &lt;li&gt;bel&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ve&lt;\/li&gt;\n  &lt;li&gt;br&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;f&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ty&lt;\/li&gt;\n  &lt;li&gt;cl&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;nt&lt;\/li&gt;\n  &lt;li&gt;coun&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;l&lt;\/li&gt;\n  &lt;li&gt;de&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;de&lt;\/li&gt;\n  &lt;li&gt;de&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;sion&lt;\/li&gt;\n  &lt;li&gt;d&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;espe&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;al&lt;\/li&gt;\n  &lt;li&gt;exer&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;se&lt;\/li&gt;\n  &lt;li&gt;exper&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;nce&lt;\/li&gt;\n  &lt;li&gt;f&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ld&lt;\/li&gt;\n  &lt;li&gt;fr&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;nd&lt;\/li&gt;\n  &lt;li&gt;l&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;p&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ce&lt;\/li&gt;\n  &lt;li&gt;qu&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;t&lt;\/li&gt;\n  &lt;li&gt;s&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ence&lt;\/li&gt;\n  &lt;li&gt;so&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;al&lt;\/li&gt;\n  &lt;li&gt;so&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ety&lt;\/li&gt;\n  &lt;li&gt;spe&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;al&lt;\/li&gt;\n  &lt;li&gt;spe&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;fic&lt;\/li&gt;\n  &lt;li&gt;t&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;v&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;w&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>windows系统下转换Rmd文档为PDF文档</title>
      <link>/post/rmd-to-pdf-in-r/</link>
      <pubDate>Sun, 07 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/rmd-to-pdf-in-r/</guid>
      <description>&lt;p&gt;如何将Rmd文档输出为PDF，一直是一个挑战性的工作，我在windows系统上就没有成功过。主要是搞不定巨大的tex安装包。不过最近有个好消息，&lt;a href=&#34;https://yihui.name/&#34;&gt;yihui&lt;/a&gt;开发了&lt;a href=&#34;https://yihui.name/tinytex/&#34;&gt;tinytex&lt;/a&gt;包，自动化了tex包的安装和配置工作。目前，这个包已经挂在cran上，可以通过rstudio安装。&lt;/p&gt;
&lt;p&gt;安装tinytex后，在Rstudio中有以下2点需要配置：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;点击Tools菜单-&amp;gt; Global Options-&amp;gt; sweave：typeset LaTeX into PDF using: 修改为XeLaTeX。&lt;/li&gt;
&lt;li&gt;knit Output Options部分，在Advanced中注意同样选择为XeLaTex。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;文件中如果包括中文，有两个方面需要注意：&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 文本中包括中文&lt;/h2&gt;
&lt;p&gt;参考这个&lt;a href=&#34;https://www.jianshu.com/p/0bfda49f1a52&#34;&gt;链接&lt;/a&gt;，进行如下设置：&lt;/p&gt;
&lt;pre class=&#34;tex&#34;&gt;&lt;code&gt;\usepackage{xeCJK}  
\setCJKmainfont{simsun.ttc}  % 字体可以更换&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;把上述代码单独保存为一个文件，如header.tex，注意与Rmd文件在同一个路径下。其作用貌似是调用xeCJK包，中文字体设置为宋体。如果tinytex检测到系统中没有安装xeCJK包，那么会自动下载安装。&lt;/p&gt;
&lt;p&gt;但是尝试了一下，好像tinytex自动安装xeCJK存在问题，包的名称应该全部是小写。在Rstudio的console中手动安装，&lt;strong&gt;注意xecjk需要全部为小写&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;tinytex::tlmgr_install(“xecjk”)&lt;/p&gt;
&lt;p&gt;ps: 安装了rmarkdown最新开发版，上述问题就解决了：&lt;code&gt;devtools::install_github(&amp;quot;rstudio/rmarkdown&amp;quot;)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;然后，在新建立的Rmd文档中YAML头中，设置包括header.tex文件：&lt;/p&gt;
&lt;pre class=&#34;yaml&#34;&gt;&lt;code&gt;output: 
  pdf_document: 
    includes:
      in_header: header.tex
    keep_tex: yes
    latex_engine: xelatex&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;2.图片中中文设置&lt;/h2&gt;
&lt;p&gt;主要是利用showtext包完成，具体参考&lt;a href=&#34;https://luansheng.netlify.com/post/using-other-system-chinese-fonts-in-r/&#34;&gt;此篇blog&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;点击下载&lt;a href=&#34;/post/RmdtoPDF.zip&#34;&gt;Rmd文档和生成的PDF文档&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>如何在EV3上安装ev3dev系统 </title>
      <link>/post/how-to-install-ev3dev/</link>
      <pubDate>Sat, 06 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/how-to-install-ev3dev/</guid>
      <description>&lt;p&gt;EV3是乐高机器人，除了官方系统，有人进行逆向工程，建立了一个基于Debian的开源linux系统&lt;a href=&#34;http://www.ev3dev.org/&#34;&gt;EV3DEV&lt;/a&gt;。然后就可以利用python等编程语言，控制EV3机器人。本文记录基于Windows 10系统的安装过程。&lt;/p&gt;
&lt;p&gt;详细的过程，可以参考官方网站&lt;a href=&#34;http://www.ev3dev.org/docs/getting-started/&#34;&gt;Getting Started with ev3dev&lt;/a&gt;。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 准备的硬件&lt;/h2&gt;
&lt;p&gt;需要一个micro SD卡，我购买的是&lt;a href=&#34;https://item.jd.com/343546.html&#34;&gt;金士顿（Kingston）16GB Class4 TF(Micro SD)存储卡&lt;/a&gt;。看官网介绍，大于32G的卡，EV3读不出来。&lt;/p&gt;
&lt;p&gt;另外需要一个读卡器，同样购买的&lt;a href=&#34;https://item.jd.com/343389.html&#34;&gt;金士顿（Kingston）USB 2.0 TF（Micro SD）读卡器（FCR-MRG2）&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;还需要一台计算机，最好是笔记本电脑，支持蓝牙或者wifi无线网络。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ev3dev&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;2.制作EV3DEV启动盘&lt;/h2&gt;
&lt;div id=&#34;ev3dev&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 下载EV3DEV镜像文件。&lt;/h3&gt;
&lt;p&gt;目前官网上的下载地址下载不了，通过其&lt;a href=&#34;https://github.com/ev3dev&#34;&gt;github&lt;/a&gt;找到了下载地址，在&lt;a href=&#34;https://github.com/ev3dev/ev3dev/releases&#34;&gt;这里&lt;/a&gt;，目前最新的是2017-09-14发布的镜像文件。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;sd&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.2 把镜像文件烧录到sd卡&lt;/h3&gt;
&lt;p&gt;下载原文中推荐的img镜像烧录软件&lt;a href=&#34;https://etcher.io/&#34;&gt;etcher&lt;/a&gt;，这个软件使用简单，非常好用。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;ev3devev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;3. 利用EV3DEV启动EV3&lt;/h2&gt;
&lt;p&gt;把&lt;strong&gt;sd卡正面跟EV3正面一个方向&lt;/strong&gt;，插入卡槽中。然后从EV3主机上按启动键，会出现一个带有小企鹅的启动画面，启动需要等一段时间。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;4. 通过蓝牙连接EV3主机与电脑&lt;/h2&gt;
&lt;p&gt;为了控制EV3，必须要有另外一台电脑，与EV3建立连接，控制EV3。本文推荐蓝牙连接。因为如果想通过wifi连接，还需要再买一个EV3专用的无线网卡。&lt;/p&gt;
&lt;p&gt;具体的连接方法，参考&lt;a href=&#34;http://www.ev3dev.org/docs/tutorials/connecting-to-the-internet-via-bluetooth/&#34;&gt;这里&lt;/a&gt;。请注意，文中给出了连接安卓、苹果和windows三个系统的蓝牙连接设置方法，win10的设置在网页最下边。务必要严格按照网页要求的步骤来设置。&lt;/p&gt;
&lt;p&gt;但是，目前按照这个教程，设置EV3跟电脑蓝牙连接后，EV3并不能通过蓝牙连接电脑的无线网络上网。这是一个当前&lt;strong&gt;还没有解决的问题&lt;/strong&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;sshev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;5. 通过SSH协议登录并控制EV3主机&lt;/h2&gt;
&lt;p&gt;如果是win10系统，下载一个&lt;a href=&#34;https://www.chiark.greenend.org.uk/~sgtatham/putty/&#34;&gt;putty软件&lt;/a&gt;，然后填入在EV3主机中显示的IP地址，譬如：169.254.26.0，然后点击open，会弹出一个黑色的命令行窗口，稍微等一会，根据提示输入用户名：&lt;strong&gt;robot&lt;/strong&gt;，回车后，根据提示输入密码：&lt;strong&gt;maker&lt;/strong&gt;，然后等一会，如果登陆成功，会显示如下画面：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/puttyev3.png&#34; title=&#34;putty成功登陆EV3&#34; alt=&#34;putty成功登陆EV3&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;putty成功登陆EV3&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;pythonev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;6. 通过python控制EV3&lt;/h2&gt;
&lt;p&gt;可以认为，python是EV3DEV系统支持的官方语言。想学习如何利用pyhton控制EV3，可以参考&lt;a href=&#34;http://python-ev3dev.readthedocs.io/en/stable/&#34;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;div id=&#34;ev3&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;6.1 控制EV3说话&lt;/h3&gt;
&lt;p&gt;“hello,world”是编程学习时的经典输出语句。下边我们试着让EV3直接说出来：&lt;/p&gt;
&lt;p&gt;首先在成功连接EV3的putty窗口中，输入&lt;strong&gt;python3&lt;/strong&gt;，启动python环境，成功后是这样：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/puttyev3python.png&#34; title=&#34;EV3上启动python3&#34; alt=&#34;EV3上启动python3&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;EV3上启动python3&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;然后在python控制台下，输入下列命令：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;#导入ev3dev.ev3模块
import ev3dev.ev3 as ev3

#调用ev3的声音模块发出声音
ev3.Sound.speak(&amp;#39;hello,world&amp;#39;).wait()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;程序运行成功后的putty窗口：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/puttyev3helloworld.png&#34; title=&#34;EV3说出hello, world&#34; alt=&#34;EV3说出hello, world&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;EV3说出hello, world&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;6.2 控制马达转动&lt;/h3&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;#控制连接到主机A端口的一个大型马达
m = ev3.LargeMotor(&amp;#39;outA&amp;#39;)

# speed_sp控制马达转速，这里的用的是ticks per second
# time_sp控制马达的启动时间，表示的是毫秒
m.run_timed(time_sp=3000, speed_sp=500)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;todo&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;todo&lt;/h3&gt;
&lt;p&gt;如何把电脑写好的python程序传输到EV3上并执行？&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ev3dev.org/docs/tutorials/&#34;&gt;EV3DEV教程中心&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://python-ev3dev.readthedocs.io/en/stable/rpyc.html&#34;&gt;Working with ev3dev remotely using RPyC&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>try od package</title>
      <link>/post/try-od-package/</link>
      <pubDate>Wed, 03 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/try-od-package/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://asreml.org/optimal-design/&#34;&gt;od&lt;/a&gt;包是一个可以给出数量遗传学&lt;strong&gt;优化试验设计&lt;/strong&gt;的包。试着通过实例来理解背后的设计原理。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&#34;https://asreml.org/resources/od/od_0.75.zip&#34;&gt;windows&lt;/a&gt;包没有自带数据，从&lt;a href=&#34;https://asreml.org/resources/od/od_0.75_R_linux-intel64.tar.gz&#34;&gt;linux&lt;/a&gt;包中把数据提出来。&lt;/p&gt;
&lt;p&gt;关于od包背后的设计原理，参考作者的博士论文：On The Optimal Design of Experiments Under the Linear Mixed Model。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 加载数据文件&lt;/h2&gt;
&lt;p&gt;genex是一个作物遗传改良的实验数据，包括213个品种。实验设计为部分重复设计，包括2个Block,每个block内有48行×3列。部分品种有2次实验记录。 genex.Ainv 包括了213个品种间的加性遗传相关矩阵。注意od包要求genex.Ainv数据框包括一个属性rowNames,存储row列中整数对应的品种名。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(data.table)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 载入需要的程辑包：data.table&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;genex &amp;lt;- fread(file=&amp;quot;genex.csv&amp;quot;,stringsAsFactors = TRUE)
genex[,&amp;quot;:=&amp;quot;(Row=as.factor(Row),Block=as.factor(Block),Column=as.factor(Column))]
genex.Ainv &amp;lt;- fread(file=&amp;quot;genex.Ainv.csv&amp;quot;,stringsAsFactors = TRUE)
genex.Ainv.rowNames &amp;lt;- fread(file=&amp;quot;genex.Ainv.rowNames.csv&amp;quot;,sep=&amp;quot;,&amp;quot;,stringsAsFactors = FALSE,header = FALSE)
attr(genex.Ainv,which = &amp;quot;rowNames&amp;quot;) &amp;lt;- genex.Ainv.rowNames$V1&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(od)
genex.G &amp;lt;- od.init(`ped(Entry)` = 1, `ide(Entry)` = 0.1, Block = 0.1,Column = 0.4, Row = 0.2)
genex.R &amp;lt;- od.init(`Column:Row|Column` = 0.2, `Column:Row|Row` = 0.5)
genex.od &amp;lt;- od(random = ~ped(Entry) + ide(Entry) + Block + Column + Row, 
               rcov = ~ar1(Column):ar1(Row), 
               permute = ~ped(Entry) |ide(Entry),
               swap = ~Block, Gstart = genex.G, 
               Rstart = genex.R,
               ginv = list(Entry = genex.Ainv), 
               geneticEffects = &amp;quot;total&amp;quot;,
               search = &amp;quot;tabu&amp;quot;, 
               maxit = 5, 
               data = genex)
save.image()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;genex.od$design&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>我的第一个python程序</title>
      <link>/post/my-first-python-program/</link>
      <pubDate>Tue, 02 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/my-first-python-program/</guid>
      <description>&lt;p&gt;参考&lt;a href=&#34;http://pandas.pydata.org/&#34;&gt;pandas官网&lt;/a&gt;，&lt;a href=&#34;http://pandas.pydata.org/pandas-docs/stable/10min.html&#34;&gt;十分钟教程&lt;/a&gt;&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
s = pd.Series([1,3,5,np.nan,6,8])
print(s)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 0    1.0
## 1    3.0
## 2    5.0
## 3    NaN
## 4    6.0
## 5    8.0
## dtype: float64&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>在R中使用windows系统自带的中文字体</title>
      <link>/post/using-other-system-chinese-fonts-in-r/</link>
      <pubDate>Sun, 31 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/using-other-system-chinese-fonts-in-r/</guid>
      <description>&lt;p&gt;R作图时，如何在图片中使用windows系统自带的其他中文字体？以前尝试过好几次，都没有成功。&lt;/p&gt;
&lt;p&gt;首先安装二个包：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://cran.r-project.org/web/packages/sysfonts/index.html&#34;&gt;sysfonts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cran.r-project.org/web/packages/showtext/index.html&#34;&gt;showtext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;R中自带的默认字体家族，可以通过sysfonts::font.families()函数查看：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(sysfonts)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 载入需要的程辑包：sysfonts&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(showtext)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 载入需要的程辑包：showtext&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 载入需要的程辑包：showtextdb&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;font_families()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;sans&amp;quot;         &amp;quot;serif&amp;quot;        &amp;quot;mono&amp;quot;         &amp;quot;wqy-microhei&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;R中自带的三种标准字体家族为：&lt;a href=&#34;https://baike.baidu.com/item/衬线字体/6820704?fr=aladdin&#34;&gt;serif&lt;/a&gt;（衬线）、&lt;a href=&#34;https://baike.baidu.com/item/无衬线体/2374029&#34;&gt;sans&lt;/a&gt;（无衬线）和&lt;a href=&#34;https://baike.baidu.com/item/等宽字体/8434037?fr=aladdin&#34;&gt;mono&lt;/a&gt;（等宽）三类。&lt;/p&gt;
&lt;p&gt;如果想使用Windows系统中自带的中文字体，首先查看系统中字体存储路径：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;font_paths()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;C:\\Windows\\Fonts&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;进一步查看有哪些可以利用的字体文件：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;font_files()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   [1] &amp;quot;AGENCYB.TTF&amp;quot;             &amp;quot;AGENCYR.TTF&amp;quot;            
##   [3] &amp;quot;ALGER.TTF&amp;quot;               &amp;quot;ANTQUAB.TTF&amp;quot;            
##   [5] &amp;quot;ANTQUABI.TTF&amp;quot;            &amp;quot;ANTQUAI.TTF&amp;quot;            
##   [7] &amp;quot;arial.ttf&amp;quot;               &amp;quot;arialbd.ttf&amp;quot;            
##   [9] &amp;quot;arialbi.ttf&amp;quot;             &amp;quot;ariali.ttf&amp;quot;             
##  [11] &amp;quot;ARIALN.TTF&amp;quot;              &amp;quot;ARIALNB.TTF&amp;quot;            
##  [13] &amp;quot;ARIALNBI.TTF&amp;quot;            &amp;quot;ARIALNI.TTF&amp;quot;            
##  [15] &amp;quot;ARIALUNI.TTF&amp;quot;            &amp;quot;ariblk.ttf&amp;quot;             
##  [17] &amp;quot;ARLRDBD.TTF&amp;quot;             &amp;quot;bahnschrift.ttf&amp;quot;        
##  [19] &amp;quot;BASKVILL.TTF&amp;quot;            &amp;quot;BAUHS93.TTF&amp;quot;            
##  [21] &amp;quot;BELL.TTF&amp;quot;                &amp;quot;BELLB.TTF&amp;quot;              
##  [23] &amp;quot;BELLI.TTF&amp;quot;               &amp;quot;BERNHC.TTF&amp;quot;             
##  [25] &amp;quot;BKANT.TTF&amp;quot;               &amp;quot;BOD_B.TTF&amp;quot;              
##  [27] &amp;quot;BOD_BI.TTF&amp;quot;              &amp;quot;BOD_BLAI.TTF&amp;quot;           
##  [29] &amp;quot;BOD_BLAR.TTF&amp;quot;            &amp;quot;BOD_CB.TTF&amp;quot;             
##  [31] &amp;quot;BOD_CBI.TTF&amp;quot;             &amp;quot;BOD_CI.TTF&amp;quot;             
##  [33] &amp;quot;BOD_CR.TTF&amp;quot;              &amp;quot;BOD_I.TTF&amp;quot;              
##  [35] &amp;quot;BOD_PSTC.TTF&amp;quot;            &amp;quot;BOD_R.TTF&amp;quot;              
##  [37] &amp;quot;BOOKOS.TTF&amp;quot;              &amp;quot;BOOKOSB.TTF&amp;quot;            
##  [39] &amp;quot;BOOKOSBI.TTF&amp;quot;            &amp;quot;BOOKOSI.TTF&amp;quot;            
##  [41] &amp;quot;BRADHITC.TTF&amp;quot;            &amp;quot;BRITANIC.TTF&amp;quot;           
##  [43] &amp;quot;BRLNSB.TTF&amp;quot;              &amp;quot;BRLNSDB.TTF&amp;quot;            
##  [45] &amp;quot;BRLNSR.TTF&amp;quot;              &amp;quot;BROADW.TTF&amp;quot;             
##  [47] &amp;quot;BRUSHSCI.TTF&amp;quot;            &amp;quot;BSSYM7.TTF&amp;quot;             
##  [49] &amp;quot;calibri.ttf&amp;quot;             &amp;quot;calibrib.ttf&amp;quot;           
##  [51] &amp;quot;calibrii.ttf&amp;quot;            &amp;quot;calibril.ttf&amp;quot;           
##  [53] &amp;quot;calibrili.ttf&amp;quot;           &amp;quot;calibriz.ttf&amp;quot;           
##  [55] &amp;quot;CALIFB.TTF&amp;quot;              &amp;quot;CALIFI.TTF&amp;quot;             
##  [57] &amp;quot;CALIFR.TTF&amp;quot;              &amp;quot;CALIST.TTF&amp;quot;             
##  [59] &amp;quot;CALISTB.TTF&amp;quot;             &amp;quot;CALISTBI.TTF&amp;quot;           
##  [61] &amp;quot;CALISTI.TTF&amp;quot;             &amp;quot;cambria.ttc&amp;quot;            
##  [63] &amp;quot;cambriab.ttf&amp;quot;            &amp;quot;cambriai.ttf&amp;quot;           
##  [65] &amp;quot;cambriaz.ttf&amp;quot;            &amp;quot;Candara.ttf&amp;quot;            
##  [67] &amp;quot;Candarab.ttf&amp;quot;            &amp;quot;Candarai.ttf&amp;quot;           
##  [69] &amp;quot;Candaraz.ttf&amp;quot;            &amp;quot;CASTELAR.TTF&amp;quot;           
##  [71] &amp;quot;CENSCBK.TTF&amp;quot;             &amp;quot;CENTAUR.TTF&amp;quot;            
##  [73] &amp;quot;CENTURY.TTF&amp;quot;             &amp;quot;CHILLER.TTF&amp;quot;            
##  [75] &amp;quot;COLONNA.TTF&amp;quot;             &amp;quot;comic.ttf&amp;quot;              
##  [77] &amp;quot;comicbd.ttf&amp;quot;             &amp;quot;comici.ttf&amp;quot;             
##  [79] &amp;quot;comicz.ttf&amp;quot;              &amp;quot;consola.ttf&amp;quot;            
##  [81] &amp;quot;consolab.ttf&amp;quot;            &amp;quot;consolai.ttf&amp;quot;           
##  [83] &amp;quot;consolaz.ttf&amp;quot;            &amp;quot;constan.ttf&amp;quot;            
##  [85] &amp;quot;constanb.ttf&amp;quot;            &amp;quot;constani.ttf&amp;quot;           
##  [87] &amp;quot;constanz.ttf&amp;quot;            &amp;quot;COOPBL.TTF&amp;quot;             
##  [89] &amp;quot;COPRGTB.TTF&amp;quot;             &amp;quot;COPRGTL.TTF&amp;quot;            
##  [91] &amp;quot;corbel.ttf&amp;quot;              &amp;quot;corbelb.ttf&amp;quot;            
##  [93] &amp;quot;corbeli.ttf&amp;quot;             &amp;quot;corbelz.ttf&amp;quot;            
##  [95] &amp;quot;cour.ttf&amp;quot;                &amp;quot;courbd.ttf&amp;quot;             
##  [97] &amp;quot;courbi.ttf&amp;quot;              &amp;quot;couri.ttf&amp;quot;              
##  [99] &amp;quot;CURLZ___.TTF&amp;quot;            &amp;quot;Deng.ttf&amp;quot;               
## [101] &amp;quot;Dengb.ttf&amp;quot;               &amp;quot;Dengl.ttf&amp;quot;              
## [103] &amp;quot;ebrima.ttf&amp;quot;              &amp;quot;ebrimabd.ttf&amp;quot;           
## [105] &amp;quot;ELEPHNT.TTF&amp;quot;             &amp;quot;ELEPHNTI.TTF&amp;quot;           
## [107] &amp;quot;ENGR.TTF&amp;quot;                &amp;quot;ERASBD.TTF&amp;quot;             
## [109] &amp;quot;ERASDEMI.TTF&amp;quot;            &amp;quot;ERASLGHT.TTF&amp;quot;           
## [111] &amp;quot;ERASMD.TTF&amp;quot;              &amp;quot;euclid.ttf&amp;quot;             
## [113] &amp;quot;euclidb.ttf&amp;quot;             &amp;quot;euclidbi.ttf&amp;quot;           
## [115] &amp;quot;euclidi.ttf&amp;quot;             &amp;quot;eucsym.ttf&amp;quot;             
## [117] &amp;quot;eucsymb.ttf&amp;quot;             &amp;quot;eucsymbi.ttf&amp;quot;           
## [119] &amp;quot;eucsymi.ttf&amp;quot;             &amp;quot;euextra.ttf&amp;quot;            
## [121] &amp;quot;euextrab.ttf&amp;quot;            &amp;quot;eufrak.ttf&amp;quot;             
## [123] &amp;quot;eufrakb.ttf&amp;quot;             &amp;quot;eumat1.ttf&amp;quot;             
## [125] &amp;quot;eumat1b.ttf&amp;quot;             &amp;quot;eumat2.ttf&amp;quot;             
## [127] &amp;quot;eumat2b.ttf&amp;quot;             &amp;quot;FELIXTI.TTF&amp;quot;            
## [129] &amp;quot;fences.ttf&amp;quot;              &amp;quot;FORTE.TTF&amp;quot;              
## [131] &amp;quot;FRABK.TTF&amp;quot;               &amp;quot;FRABKIT.TTF&amp;quot;            
## [133] &amp;quot;FRADM.TTF&amp;quot;               &amp;quot;FRADMCN.TTF&amp;quot;            
## [135] &amp;quot;FRADMIT.TTF&amp;quot;             &amp;quot;FRAHV.TTF&amp;quot;              
## [137] &amp;quot;FRAHVIT.TTF&amp;quot;             &amp;quot;framd.ttf&amp;quot;              
## [139] &amp;quot;FRAMDCN.TTF&amp;quot;             &amp;quot;framdit.ttf&amp;quot;            
## [141] &amp;quot;FREESCPT.TTF&amp;quot;            &amp;quot;FRSCRIPT.TTF&amp;quot;           
## [143] &amp;quot;FTLTLT.TTF&amp;quot;              &amp;quot;FZLTCXHJW.TTF&amp;quot;          
## [145] &amp;quot;FZSTK.TTF&amp;quot;               &amp;quot;FZYTK.TTF&amp;quot;              
## [147] &amp;quot;Gabriola.ttf&amp;quot;            &amp;quot;gadugi.ttf&amp;quot;             
## [149] &amp;quot;gadugib.ttf&amp;quot;             &amp;quot;GARA.TTF&amp;quot;               
## [151] &amp;quot;GARABD.TTF&amp;quot;              &amp;quot;GARAIT.TTF&amp;quot;             
## [153] &amp;quot;georgia.ttf&amp;quot;             &amp;quot;georgiab.ttf&amp;quot;           
## [155] &amp;quot;georgiai.ttf&amp;quot;            &amp;quot;georgiaz.ttf&amp;quot;           
## [157] &amp;quot;GIGI.TTF&amp;quot;                &amp;quot;GIL_____.TTF&amp;quot;           
## [159] &amp;quot;GILB____.TTF&amp;quot;            &amp;quot;GILBI___.TTF&amp;quot;           
## [161] &amp;quot;GILC____.TTF&amp;quot;            &amp;quot;GILI____.TTF&amp;quot;           
## [163] &amp;quot;GILLUBCD.TTF&amp;quot;            &amp;quot;GILSANUB.TTF&amp;quot;           
## [165] &amp;quot;GLECB.TTF&amp;quot;               &amp;quot;GLSNECB.TTF&amp;quot;            
## [167] &amp;quot;GOTHIC.TTF&amp;quot;              &amp;quot;GOTHICB.TTF&amp;quot;            
## [169] &amp;quot;GOTHICBI.TTF&amp;quot;            &amp;quot;GOTHICI.TTF&amp;quot;            
## [171] &amp;quot;GOUDOS.TTF&amp;quot;              &amp;quot;GOUDOSB.TTF&amp;quot;            
## [173] &amp;quot;GOUDOSI.TTF&amp;quot;             &amp;quot;GOUDYSTO.TTF&amp;quot;           
## [175] &amp;quot;HARLOWSI.TTF&amp;quot;            &amp;quot;HARNGTON.TTF&amp;quot;           
## [177] &amp;quot;HATTEN.TTF&amp;quot;              &amp;quot;himalaya.ttf&amp;quot;           
## [179] &amp;quot;holomdl2.ttf&amp;quot;            &amp;quot;HTOWERT.TTF&amp;quot;            
## [181] &amp;quot;HTOWERTI.TTF&amp;quot;            &amp;quot;impact.ttf&amp;quot;             
## [183] &amp;quot;IMPRISHA.TTF&amp;quot;            &amp;quot;INFROMAN.TTF&amp;quot;           
## [185] &amp;quot;ITCBLKAD.TTF&amp;quot;            &amp;quot;ITCEDSCR.TTF&amp;quot;           
## [187] &amp;quot;ITCKRIST.TTF&amp;quot;            &amp;quot;javatext.ttf&amp;quot;           
## [189] &amp;quot;JOKERMAN.TTF&amp;quot;            &amp;quot;JUICE___.TTF&amp;quot;           
## [191] &amp;quot;KUNSTLER.TTF&amp;quot;            &amp;quot;l_10646.ttf&amp;quot;            
## [193] &amp;quot;LATINWD.TTF&amp;quot;             &amp;quot;LBRITE.TTF&amp;quot;             
## [195] &amp;quot;LBRITED.TTF&amp;quot;             &amp;quot;LBRITEDI.TTF&amp;quot;           
## [197] &amp;quot;LBRITEI.TTF&amp;quot;             &amp;quot;LCALLIG.TTF&amp;quot;            
## [199] &amp;quot;LeelaUIb.ttf&amp;quot;            &amp;quot;LeelawUI.ttf&amp;quot;           
## [201] &amp;quot;LeelUIsl.ttf&amp;quot;            &amp;quot;LFAX.TTF&amp;quot;               
## [203] &amp;quot;LFAXD.TTF&amp;quot;               &amp;quot;LFAXDI.TTF&amp;quot;             
## [205] &amp;quot;LFAXI.TTF&amp;quot;               &amp;quot;LHANDW.TTF&amp;quot;             
## [207] &amp;quot;LSANS.TTF&amp;quot;               &amp;quot;LSANSD.TTF&amp;quot;             
## [209] &amp;quot;LSANSDI.TTF&amp;quot;             &amp;quot;LSANSI.TTF&amp;quot;             
## [211] &amp;quot;LTYPE.TTF&amp;quot;               &amp;quot;LTYPEB.TTF&amp;quot;             
## [213] &amp;quot;LTYPEBO.TTF&amp;quot;             &amp;quot;LTYPEO.TTF&amp;quot;             
## [215] &amp;quot;lucon.ttf&amp;quot;               &amp;quot;MAGNETOB.TTF&amp;quot;           
## [217] &amp;quot;MAIAN.TTF&amp;quot;               &amp;quot;malgun.ttf&amp;quot;             
## [219] &amp;quot;malgunbd.ttf&amp;quot;            &amp;quot;malgunsl.ttf&amp;quot;           
## [221] &amp;quot;marlett.ttf&amp;quot;             &amp;quot;MATURASC.TTF&amp;quot;           
## [223] &amp;quot;micross.ttf&amp;quot;             &amp;quot;mingliub.ttc&amp;quot;           
## [225] &amp;quot;MISTRAL.TTF&amp;quot;             &amp;quot;mmrtext.ttf&amp;quot;            
## [227] &amp;quot;mmrtextb.ttf&amp;quot;            &amp;quot;MOD20.TTF&amp;quot;              
## [229] &amp;quot;monbaiti.ttf&amp;quot;            &amp;quot;msgothic.ttc&amp;quot;           
## [231] &amp;quot;msjh.ttc&amp;quot;                &amp;quot;msjhbd.ttc&amp;quot;             
## [233] &amp;quot;msjhl.ttc&amp;quot;               &amp;quot;msyh.ttc&amp;quot;               
## [235] &amp;quot;msyhbd.ttc&amp;quot;              &amp;quot;msyhl.ttc&amp;quot;              
## [237] &amp;quot;msyi.ttf&amp;quot;                &amp;quot;Mt Extra Tiger.ttf&amp;quot;     
## [239] &amp;quot;MTCORSVA.TTF&amp;quot;            &amp;quot;mtextra.ttf&amp;quot;            
## [241] &amp;quot;mvboli.ttf&amp;quot;              &amp;quot;NIAGENG.TTF&amp;quot;            
## [243] &amp;quot;NIAGSOL.TTF&amp;quot;             &amp;quot;Nirmala.ttf&amp;quot;            
## [245] &amp;quot;NirmalaB.ttf&amp;quot;            &amp;quot;NirmalaS.ttf&amp;quot;           
## [247] &amp;quot;ntailu.ttf&amp;quot;              &amp;quot;ntailub.ttf&amp;quot;            
## [249] &amp;quot;OCRAEXT.TTF&amp;quot;             &amp;quot;OLDENGL.TTF&amp;quot;            
## [251] &amp;quot;ONYX.TTF&amp;quot;                &amp;quot;OUTLOOK.TTF&amp;quot;            
## [253] &amp;quot;pala.ttf&amp;quot;                &amp;quot;palab.ttf&amp;quot;              
## [255] &amp;quot;palabi.ttf&amp;quot;              &amp;quot;palai.ttf&amp;quot;              
## [257] &amp;quot;PALSCRI.TTF&amp;quot;             &amp;quot;PAPYRUS.TTF&amp;quot;            
## [259] &amp;quot;PARCHM.TTF&amp;quot;              &amp;quot;PER_____.TTF&amp;quot;           
## [261] &amp;quot;PERB____.TTF&amp;quot;            &amp;quot;PERBI___.TTF&amp;quot;           
## [263] &amp;quot;PERI____.TTF&amp;quot;            &amp;quot;PERTIBD.TTF&amp;quot;            
## [265] &amp;quot;PERTILI.TTF&amp;quot;             &amp;quot;phagspa.ttf&amp;quot;            
## [267] &amp;quot;phagspab.ttf&amp;quot;            &amp;quot;PLAYBILL.TTF&amp;quot;           
## [269] &amp;quot;POORICH.TTF&amp;quot;             &amp;quot;PRISTINA.TTF&amp;quot;           
## [271] &amp;quot;RAGE.TTF&amp;quot;                &amp;quot;RAVIE.TTF&amp;quot;              
## [273] &amp;quot;REFSAN.TTF&amp;quot;              &amp;quot;REFSPCL.TTF&amp;quot;            
## [275] &amp;quot;ROCC____.TTF&amp;quot;            &amp;quot;ROCCB___.TTF&amp;quot;           
## [277] &amp;quot;ROCK.TTF&amp;quot;                &amp;quot;ROCKB.TTF&amp;quot;              
## [279] &amp;quot;ROCKBI.TTF&amp;quot;              &amp;quot;ROCKEB.TTF&amp;quot;             
## [281] &amp;quot;ROCKI.TTF&amp;quot;               &amp;quot;SCHLBKB.TTF&amp;quot;            
## [283] &amp;quot;SCHLBKBI.TTF&amp;quot;            &amp;quot;SCHLBKI.TTF&amp;quot;            
## [285] &amp;quot;SCRIPTBL.TTF&amp;quot;            &amp;quot;segmdl2.ttf&amp;quot;            
## [287] &amp;quot;segoepr.ttf&amp;quot;             &amp;quot;segoeprb.ttf&amp;quot;           
## [289] &amp;quot;segoesc.ttf&amp;quot;             &amp;quot;segoescb.ttf&amp;quot;           
## [291] &amp;quot;segoeui.ttf&amp;quot;             &amp;quot;segoeuib.ttf&amp;quot;           
## [293] &amp;quot;segoeuii.ttf&amp;quot;            &amp;quot;segoeuil.ttf&amp;quot;           
## [295] &amp;quot;segoeuisl.ttf&amp;quot;           &amp;quot;segoeuiz.ttf&amp;quot;           
## [297] &amp;quot;seguibl.ttf&amp;quot;             &amp;quot;seguibli.ttf&amp;quot;           
## [299] &amp;quot;seguiemj.ttf&amp;quot;            &amp;quot;seguihis.ttf&amp;quot;           
## [301] &amp;quot;seguili.ttf&amp;quot;             &amp;quot;seguisb.ttf&amp;quot;            
## [303] &amp;quot;seguisbi.ttf&amp;quot;            &amp;quot;seguisli.ttf&amp;quot;           
## [305] &amp;quot;seguisym.ttf&amp;quot;            &amp;quot;SHOWG.TTF&amp;quot;              
## [307] &amp;quot;simfang.ttf&amp;quot;             &amp;quot;simhei.ttf&amp;quot;             
## [309] &amp;quot;simkai.ttf&amp;quot;              &amp;quot;SIMLI.TTF&amp;quot;              
## [311] &amp;quot;simsun.ttc&amp;quot;              &amp;quot;simsunb.ttf&amp;quot;            
## [313] &amp;quot;SIMYOU.TTF&amp;quot;              &amp;quot;Sitka.ttc&amp;quot;              
## [315] &amp;quot;SitkaB.ttc&amp;quot;              &amp;quot;SitkaI.ttc&amp;quot;             
## [317] &amp;quot;SitkaZ.ttc&amp;quot;              &amp;quot;SNAP____.TTF&amp;quot;           
## [319] &amp;quot;STCAIYUN.TTF&amp;quot;            &amp;quot;STENCIL.TTF&amp;quot;            
## [321] &amp;quot;STFANGSO.TTF&amp;quot;            &amp;quot;STHUPO.TTF&amp;quot;             
## [323] &amp;quot;STKAITI.TTF&amp;quot;             &amp;quot;STLITI.TTF&amp;quot;             
## [325] &amp;quot;STSONG.TTF&amp;quot;              &amp;quot;STXIHEI.TTF&amp;quot;            
## [327] &amp;quot;STXINGKA.TTF&amp;quot;            &amp;quot;STXINWEI.TTF&amp;quot;           
## [329] &amp;quot;STZHONGS.TTF&amp;quot;            &amp;quot;sylfaen.ttf&amp;quot;            
## [331] &amp;quot;Symbol Tiger Expert.ttf&amp;quot; &amp;quot;Symbol Tiger.ttf&amp;quot;       
## [333] &amp;quot;symbol.ttf&amp;quot;              &amp;quot;tahoma.ttf&amp;quot;             
## [335] &amp;quot;tahomabd.ttf&amp;quot;            &amp;quot;taile.ttf&amp;quot;              
## [337] &amp;quot;taileb.ttf&amp;quot;              &amp;quot;TCB_____.TTF&amp;quot;           
## [339] &amp;quot;TCBI____.TTF&amp;quot;            &amp;quot;TCCB____.TTF&amp;quot;           
## [341] &amp;quot;TCCEB.TTF&amp;quot;               &amp;quot;TCCM____.TTF&amp;quot;           
## [343] &amp;quot;TCM_____.TTF&amp;quot;            &amp;quot;TCMI____.TTF&amp;quot;           
## [345] &amp;quot;TEMPSITC.TTF&amp;quot;            &amp;quot;Tiger Expert.ttf&amp;quot;       
## [347] &amp;quot;Tiger.ttf&amp;quot;               &amp;quot;Times-Roman.ttf&amp;quot;        
## [349] &amp;quot;times.ttf&amp;quot;               &amp;quot;timesbd.ttf&amp;quot;            
## [351] &amp;quot;timesbi.ttf&amp;quot;             &amp;quot;timesi.ttf&amp;quot;             
## [353] &amp;quot;trebuc.ttf&amp;quot;              &amp;quot;trebucbd.ttf&amp;quot;           
## [355] &amp;quot;trebucbi.ttf&amp;quot;            &amp;quot;trebucit.ttf&amp;quot;           
## [357] &amp;quot;verdana.ttf&amp;quot;             &amp;quot;verdanab.ttf&amp;quot;           
## [359] &amp;quot;verdanai.ttf&amp;quot;            &amp;quot;verdanaz.ttf&amp;quot;           
## [361] &amp;quot;VINERITC.TTF&amp;quot;            &amp;quot;VIVALDII.TTF&amp;quot;           
## [363] &amp;quot;VLADIMIR.TTF&amp;quot;            &amp;quot;webdings.ttf&amp;quot;           
## [365] &amp;quot;wingding.ttf&amp;quot;            &amp;quot;WINGDNG2.TTF&amp;quot;           
## [367] &amp;quot;WINGDNG3.TTF&amp;quot;            &amp;quot;YuGothB.ttc&amp;quot;            
## [369] &amp;quot;YuGothL.ttc&amp;quot;             &amp;quot;YuGothM.ttc&amp;quot;            
## [371] &amp;quot;YuGothR.ttc&amp;quot;             &amp;quot;ZWAdobeF.TTF&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中宋体文件是simsun.ttc，黑体文件是：simhei.ttf，楷体文件是simkai.ttf，微软雅黑是msyh.ttf和msyhbd.ttf。&lt;/p&gt;
&lt;p&gt;尝试在R环境中加入黑体（如果字体是在Windows系统的默认字体库中，regular可以不用指定路径）：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;font_add(family = &amp;quot;heiti&amp;quot;,regular = &amp;quot;simhei.ttf&amp;quot;)
font_add(family = &amp;quot;kaiti&amp;quot;,regular = &amp;quot;simkai.ttf&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;此时查看R中自带字体，你会发现多了“heiti”和“kaiti”。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;font.families()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;#39;font.families()&amp;#39; is now renamed to &amp;#39;font_families()&amp;#39;
## The old version still works, but consider using the new function in future code&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;sans&amp;quot;         &amp;quot;serif&amp;quot;        &amp;quot;mono&amp;quot;         &amp;quot;wqy-microhei&amp;quot;
## [5] &amp;quot;heiti&amp;quot;        &amp;quot;kaiti&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后我们在画图中使用黑体，借用showtext包作者邱逸轩的这篇文章&lt;a href=&#34;https://cosx.org/2014/01/showtext-interesting-fonts-and-graphs&#34;&gt;showtext：字体，好玩的字体和好玩的图形&lt;/a&gt;中的r示例代码：&lt;/p&gt;
&lt;p&gt;需要注意，&lt;strong&gt;rstudio自带的Plots面板中绘出的图形不显示自定义字体&lt;/strong&gt;，这也是以前总是觉得设置自定义字体不成功的原因。在运行下面的代码前，调用windows()函数打开一个新的图形接收窗口，下边代码绘制的图形会显示其中。&lt;/p&gt;
&lt;p&gt;如果你打算在Rmd文档中使用showtext包，请在chunk头参数中设置fig.showtext=TRUE。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;showtext_auto() #这样代码非常重要
set.seed(123)
plot(1, xlim = c(-3, 3), ylim = c(-3, 3), type = &amp;quot;n&amp;quot;)
text(runif(100, -3, 3), runif(100, -3, 3),
     intToUtf8(round(runif(100, 19968, 40869)), multiple = TRUE),
     col = rgb(runif(100), runif(100), runif(100), 0.5 + runif(100)/2),
     cex = 2, family = &amp;quot;heiti&amp;quot;)   # 指定heiti字体
title(&amp;quot;随机汉字&amp;quot;, family = &amp;quot;kaiti&amp;quot;)   # 指定kaiti字体&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-12-31-using-other-system-chinese-fonts-in-r_files/figure-html/fontexample-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;试一下ggplot2作图。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(ggplot2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 载入需要的程辑包：ggplot2&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;xy &amp;lt;- data.frame(x=rnorm(100),y=rnorm(100))
showtext_auto()
scatter.plot &amp;lt;- ggplot(data = xy,aes(x=x,y=y))+
  geom_point(shape=21)+
  labs(x=&amp;quot;均值为0，标准差为1的随机正态分布&amp;quot;,y=&amp;quot;均值为0，标准差为1的随机正态分布&amp;quot;)+
  theme_grey(base_size = 30,base_family = &amp;quot;heiti&amp;quot;)
print(scatter.plot)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:ggplot2example&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2017-12-31-using-other-system-chinese-fonts-in-r_files/figure-html/ggplot2example-1.png&#34; alt=&#34;基于0,1正态分布的散点图&#34; width=&#34;576&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: 基于0,1正态分布的散点图
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Ok!大功告成！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Take me to  your heart</title>
      <link>/post/take-me-to-your-heart/</link>
      <pubDate>Thu, 21 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/take-me-to-your-heart/</guid>
      <description>&lt;p&gt;Hiding from the rain and snow&lt;/p&gt;

&lt;p&gt;Trying to forget but I won&amp;rsquo;t let go&lt;/p&gt;

&lt;p&gt;Looking at a crowded street&lt;/p&gt;

&lt;p&gt;Listening to my own heart beat&lt;/p&gt;

&lt;p&gt;So many people all around the world&lt;/p&gt;

&lt;p&gt;Tell me where do I find someone like you girl&lt;/p&gt;

&lt;p&gt;(Chorus)&lt;/p&gt;

&lt;p&gt;Take me to your heart take me to your soul&lt;/p&gt;

&lt;p&gt;Give me your hand before I&amp;rsquo;m old&lt;/p&gt;

&lt;p&gt;Show me what love is - haven&amp;rsquo;t got a clue&lt;/p&gt;

&lt;p&gt;Show me that wonders can be true&lt;/p&gt;

&lt;p&gt;They say nothing lasts forever&lt;/p&gt;

&lt;p&gt;We&amp;rsquo;re only here today&lt;/p&gt;

&lt;p&gt;Love is now or never&lt;/p&gt;

&lt;p&gt;Bring me far away&lt;/p&gt;

&lt;p&gt;Take me to your heart take me to your soul&lt;/p&gt;

&lt;p&gt;Give me your hand and hold me&lt;/p&gt;

&lt;p&gt;Show me what love is - be my guiding star&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s easy take me to your heart&lt;/p&gt;

&lt;p&gt;Standing on a mountain high&lt;/p&gt;

&lt;p&gt;Looking at the moon through a clear blue sky&lt;/p&gt;

&lt;p&gt;I should go and see some friends&lt;/p&gt;

&lt;p&gt;But they don&amp;rsquo;t really comprehend&lt;/p&gt;

&lt;p&gt;Don&amp;rsquo;t need too much talking without saying anything&lt;/p&gt;

&lt;p&gt;All I need is someone who makes me wanna sing&lt;/p&gt;

&lt;p&gt;Take me to your heart take me to your soul&lt;/p&gt;

&lt;p&gt;Give me your hand before I&amp;rsquo;m old&lt;/p&gt;

&lt;p&gt;Show me what love is - haven&amp;rsquo;t got a clue&lt;/p&gt;

&lt;p&gt;Show me that wonders can be true&lt;/p&gt;

&lt;p&gt;They say nothing lasts forever&lt;/p&gt;

&lt;p&gt;We&amp;rsquo;re only here today&lt;/p&gt;

&lt;p&gt;Love is now or never&lt;/p&gt;

&lt;p&gt;Bring me far away&lt;/p&gt;

&lt;p&gt;Take me to your heart take me to your soul&lt;/p&gt;

&lt;p&gt;Give me your hand and hold me&lt;/p&gt;

&lt;p&gt;Show me what love is - be my guiding star&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s easy take me to your heart&lt;/p&gt;

&lt;p&gt;Take me to your heart take me to your soul&lt;/p&gt;

&lt;p&gt;Give me your hand and hold me&lt;/p&gt;

&lt;p&gt;Show me what love is - be my guiding star&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s easy take me to your heart&lt;/p&gt;

&lt;p&gt;(Chorus)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>自由度和方差分析</title>
      <link>/post/df-and-anova/</link>
      <pubDate>Fri, 08 Dec 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/df-and-anova/</guid>
      <description>&lt;p&gt;比较同一处理不同水平的差异，譬如不同养殖密度、不同饲料对生长速度的影响，经常会用到方差分析的方法。而在方差分析中，自由度是一个非常重要的概念。这篇博客记录对这两个概念的理解。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 自由度&lt;/h2&gt;
&lt;p&gt;自由度（Degrees of freedom）是统计学上最经常见到的一个概念。关于它的概念，第一次接触，理解起来有些困难。维基百科的&lt;a href=&#34;https://en.wikipedia.org/wiki/Degrees_of_freedom_(statistics)&#34;&gt;解释&lt;/a&gt;是这样的: “In statistics, the number of degrees of freedom is the number of values in the final calculation of a statistic that are free to vary”。试着翻译：“在统计学中，自由度的个数被定义为，在一个统计参数的计算过程中，可以&lt;strong&gt;自由变化的数值的个数&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;维基百科中，以方差为例，试着给出自由度的计算方法。&lt;/p&gt;
&lt;p&gt;In general, the degrees of freedom of an estimate of a parameter are equal to the number of independent scores that go into the estimate minus the number of parameters used as intermediate steps in the estimation of the parameter itself (e.g. the sample variance has N − 1 degrees of freedom, since it is computed from N random scores minus the only 1 parameter estimated as intermediate step, which is the sample mean).&lt;/p&gt;
&lt;p&gt;翻译：一般来讲，一个参数估计值的自由度等于， 在估计过程中使用的独立样本（score）个数，减掉中间步骤中用到的参数个数。以方差为例，它的自由度为N-1，是因为计算方需要n个独立样本值，而在中间计算过程中用到了样本均值这个参数，所以自由度为n-1。&lt;/p&gt;
&lt;p&gt;方差的计算公式：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[Var(Y) =\frac{\sum_{i=1}^{n} (y_{i}-\bar{y})^{2}}{n-1}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;结合百度百科关于&lt;a href=&#34;https://baike.baidu.com/item/%E8%87%AA%E7%94%B1%E5%BA%A6/5936984?fr=aladdin&#34;&gt;方差自由度&lt;/a&gt;的解释，感觉可以这样理解：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首先，在估计总体的平均数时，由于样本中的 n 个数都是相互独立的，从其中抽出任何一个数都不影响其他数据，所以其自由度为n。&lt;/li&gt;
&lt;li&gt;在估计总体的方差时，使用的是离差平方和。&lt;strong&gt;由上面的公式可知，计算方差需要首先获得n个数的平均值。一旦平均数确定了，那么在计算方差时，只要n-1个数的离差平方和确定了，方差也就确定了；因为在均值确定后，如果知道了其中n-1个数的值，第n个数的值也就确定了&lt;/strong&gt;。这里，均值就相当于一个限制条件，由于加了这个限制条件，估计总体方差的自由度为n-1。&lt;/li&gt;
&lt;li&gt;例如，我们有5尾虾的体重数据（n=5），想估计其方差。计算得到5尾虾的平均值为&lt;span class=&#34;math inline&#34;&gt;\(\mu\)&lt;/span&gt;=20g，那么方差就会即受到&lt;span class=&#34;math inline&#34;&gt;\(\mu\)&lt;/span&gt;=20g的条件限制。因为随机选择4尾虾18g、22g、23g、17g计算得到离差平方和后，第5尾虾的体重，根据均值可以算出来，它的离差平方和也就确定了。因而自由度df=n-1=5-1=4，这表示&lt;strong&gt;第5尾虾的离差是依赖平均数&lt;/strong&gt;，受到平均数限制的。推而广之，任何统计量的自由度df=n-k（k为限制条件的个数）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;知乎上关于&lt;a href=&#34;https://www.zhihu.com/question/20983193&#34;&gt;自由度&lt;/a&gt;的解释非常专业，建议前往理解和学习，有一些非常难以理解。答主&lt;a href=&#34;https://www.zhihu.com/people/SigmaWang&#34;&gt;Wang Sigma&lt;/a&gt;的一句话，是我能够理解的“本质上，&lt;strong&gt;自由度是做一个估计（推测）时，所拥有的独立信息（证据）的数量&lt;/strong&gt;”。&lt;/p&gt;
&lt;p&gt;方差分析，需要用到自由度，下边结合方差分析，来研究自由度的变化。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;analysis-of-varianceanova&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;2. 方差分析（analysis of variance，ANOVA）&lt;/h2&gt;
&lt;p&gt;在育种工作中，我们经常会通过各种试验来分析不同的因素对试验结果的影响。譬如设计实验，分析不同养殖密度、不同饲料种类对生长速度的影响，找出最好的那个水平。&lt;/p&gt;
&lt;p&gt;ANOVA分析，可以用来实现上述目的。主要是用来检测分类变量的效应，也就是我们在线性混合效应模型中常说的固定效应。譬如不同性别、不同群体的差异。&lt;/p&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 生成数据&lt;/h3&gt;
&lt;p&gt;我们同样以对虾为例，生成投喂四种饲料后的体重数据。饲料种类称为一个处理，每种饲料是一个水平。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(data.table)
require(ggplot2)
feed.1 &amp;lt;- rnorm(n=100,mean = 25,sd = 6)
feed.2 &amp;lt;- rnorm(n=100,mean = 20,sd = 6)
feed.3 &amp;lt;- rnorm(n=100,mean = 15,sd = 6)
feed.4 &amp;lt;- rnorm(n=100,mean = 10,sd = 6)

feed &amp;lt;- data.table(F1=feed.1,F2=feed.2,F3=feed.3,F4=feed.4)
feed.new &amp;lt;- melt(feed,measure.vars = 1:4)
setnames(feed.new,colnames(feed.new),c(&amp;quot;Feed&amp;quot;,&amp;quot;Weight&amp;quot;))

ggplot(data=feed.new,aes(x=Feed,y=Weight,color=Feed)) + 
  geom_boxplot(outlier.size = 0)+
  geom_jitter(alpha=0.3)+
  labs(x=&amp;quot;饲料种类&amp;quot;,y=&amp;quot;体重&amp;quot;)+
  theme_gray(base_size = 20)+
  theme(legend.position = &amp;quot;none&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:generate&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2017-12-08-df-and-anova_files/figure-html/generate-1.png&#34; alt=&#34;投喂不同饲料种类后对虾体重分布箱形图&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: 投喂不同饲料种类后对虾体重分布箱形图
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;通过上图，从体重均值上可以看出，四种饲料间存在差别。但是，我们需要回答以下几个问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这种差异有没有偶然因素？从上图中可以看出，每种饲料试验虾的体重都存在较大的变异范围。&lt;/li&gt;
&lt;li&gt;样本量和实验设计是否满足要求？&lt;/li&gt;
&lt;li&gt;结果可靠吗？如何对结果的可靠性进行检验？&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.2 方差分析的基本概念&lt;/h3&gt;
&lt;p&gt;这就需要统计学手段帮我们回答。&lt;/p&gt;
&lt;p&gt;首先我们设定一个无效假设：四种饲料投喂对虾后，体重均值相等，没有差异。&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[H_{0}: \mu_{1} = \mu_{2} = \mu_{3} = \mu_{4}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;然后建立数学模型，检验&lt;span class=&#34;math inline&#34;&gt;\(\mu_{i}\)&lt;/span&gt;间的差异程度。如果各水平间差异显著，那么就会得出备择假设：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(H_{1}: \mu_{1}, \mu_{2}, \mu_{3}, \mu_{4}\)&lt;/span&gt;不全相等。&lt;/p&gt;
&lt;p&gt;我们以单因素方差分析(one-way ANOVA）为例，建立分析不同饲料投喂后体重差异的数学模型：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\left\{\begin{matrix}
y_{ij} = \mu + \alpha_{i} + \varepsilon_{ij} \\ 
\varepsilon_{ij} \sim N(0,\sigma^{2}) \\ 
\sum_{i=1}^{r}n\alpha_{i} = 0
\end{matrix}\right.
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;上边公式中i=1, 2,…,4，表示饲料种类；&lt;span class=&#34;math inline&#34;&gt;\(y_{ij}\)&lt;/span&gt;表示投喂第i种饲料后第j尾对虾的体重；&lt;span class=&#34;math inline&#34;&gt;\(\mu\)&lt;/span&gt;为总体均值；&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\alpha_{i}\)&lt;/span&gt;表示第i种饲料的固定效应，&lt;span class=&#34;math inline&#34;&gt;\(\alpha_{i} = \mu_{i} - \mu\)&lt;/span&gt;，其中&lt;span class=&#34;math inline&#34;&gt;\(\mu_{i}\)&lt;/span&gt;是第i种饲料的均值；&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(\varepsilon_{ij}\)&lt;/span&gt;表示残差，它符合正态分布：均值为0，方差为&lt;span class=&#34;math inline&#34;&gt;\(\sigma^{2}\)&lt;/span&gt;；&lt;/p&gt;
&lt;p&gt;要想满足&lt;span class=&#34;math inline&#34;&gt;\(\sum_{i=1}^{r}n\alpha_{i} = 0\)&lt;/span&gt;这个条件，每个水平下的样本数都应该是一致的。其中r=4，表示四种饲料；n表示每种饲料水平参与测试的样本数。&lt;/p&gt;
&lt;p&gt;上述公式表明：如果要对数据进行方差分析，要满足3个基本条件（从线性模型角度看，这三个基本条件非常容易理解）：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可加性。主要是指处理效应&lt;span class=&#34;math inline&#34;&gt;\(\alpha_{i}\)&lt;/span&gt;与残差&lt;span class=&#34;math inline&#34;&gt;\(\varepsilon_{ij}\)&lt;/span&gt;效应是独立的，因此可以加在一起；&lt;/li&gt;
&lt;li&gt;独立正态性。指的是实验误差&lt;span class=&#34;math inline&#34;&gt;\(\varepsilon_{ij}\)&lt;/span&gt;应当符合正态分布，而且相互间独立；&lt;/li&gt;
&lt;li&gt;方差齐性。主要指的是不同处理的方差应该是一致的。也就是说，需要满足假设“&lt;span class=&#34;math inline&#34;&gt;\(\sigma^{2}_{1} = \sigma^{2}_{2} = ... = \sigma^{2}_{r}\)&lt;/span&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.3 总变异的剖分&lt;/h3&gt;
&lt;p&gt;下边我们进入正题。如何比较处理间的差异？ANOVA的思路是把测量数据的总变异分解为由处理各水平引起的变异和误差变异两部分，然后比较这两部分的大小，通过F检验确定由处理产生的变异是否达到显著水平。&lt;/p&gt;
&lt;p&gt;为了检验&lt;span class=&#34;math inline&#34;&gt;\(H_{0}\)&lt;/span&gt;假设，对平方和、自由度进行分解：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(S_{T} = \sum_{i=1}^{r}\sum_{j=1}^{n_{i}}(y_{ij}-\bar{y_{\cdot\cdot}})^{2}\)&lt;/span&gt;，&lt;span class=&#34;math inline&#34;&gt;\(\bar{y} = \frac{1}{n}\sum_{i=1}^{r}\sum_{j=1}^{n_{i}}y_{ij}\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(S_{T}\)&lt;/span&gt;称为总离差平方和，是每个样本数据&lt;span class=&#34;math inline&#34;&gt;\(y_{ij}\)&lt;/span&gt;与总体均值&lt;span class=&#34;math inline&#34;&gt;\(\bar{y_{\cdot\cdot}}\)&lt;/span&gt;差的平方和。实际上描绘了总体数据的离散程度。&lt;/p&gt;
&lt;p&gt;总离差平方和可以进一步分解为处理平方和、误差平方和：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[S_{T} = S_{A} + S_{E}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中处理平方和：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
S_{A} = \sum_{i=1}^{r}\sum_{j=1}^{n}(y_{i\cdot}-\bar{y_{\cdot\cdot}})^{2} \\
 =  n\sum_{i=1}^{r}(y_{i\cdot}-\bar{y_{\cdot\cdot}})^{2}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;误差平方和：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[S_{E} = \sum_{i=1}^{r}\sum_{j=1}^{n}(y_{ij}-\bar{y_{i\cdot}})^{2}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;推导过程： &lt;span class=&#34;math display&#34;&gt;\[
S_{T} =  \sum_{i=1}^{r}\sum_{j=1}^{n}(y_{ij}-\bar{y_{\cdot\cdot}})^{2} \\
= \sum_{i=1}^{r}\sum_{j=1}^{n}[(y_{ij}-\bar{y_{i\cdot}})+(\bar{y_{i\cdot}}-\bar{y_{\cdot\cdot}})]^{2} \\
= \sum_{i=1}^{r}\sum_{j=1}^{n}(y_{ij}-\bar{y_{i\cdot}})^2+2\sum_{i=1}^{r}\sum_{j=1}^{n}(y_{ij}-\bar{y_{i\cdot}})(\bar{y_{i\cdot}}-\bar{y_{\cdot\cdot}})+\sum_{i=1}^{r}\sum_{j=1}^{n}(\bar{y_{i\cdot}}-\bar{y_{\cdot\cdot}})^{2} 
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;由于上边公式中，中间部分为0，因此可以直接推导出：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
S_{T} = \sum_{i=1}^{r}\sum_{j=1}^{n}(y_{ij}-\bar{y_{i\cdot}})^2+\sum_{i=1}^{r}\sum_{j=1}^{n}(\bar{y_{i\cdot}}-\bar{y_{\cdot\cdot}})^{2}  \\
 = S_{E} + S_{A}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;下边结合第一部分自由度的基础概念，来推导&lt;span class=&#34;math inline&#34;&gt;\(S_{T}\)&lt;/span&gt;、&lt;span class=&#34;math inline&#34;&gt;\(S_{A}\)&lt;/span&gt;、&lt;span class=&#34;math inline&#34;&gt;\(S_{E}\)&lt;/span&gt;的自由度。&lt;/p&gt;
&lt;p&gt;对于&lt;span class=&#34;math inline&#34;&gt;\(S_{T}\)&lt;/span&gt;，有rn个样本，根据公式只受总体均值的约束，因此自由度为&lt;span class=&#34;math inline&#34;&gt;\(df_{T}=rn-1\)&lt;/span&gt;；&lt;/p&gt;
&lt;p&gt;对于&lt;span class=&#34;math inline&#34;&gt;\(S_{A}\)&lt;/span&gt;，有r个水平，根据公式只受总体均值的约束，因此自由度为&lt;span class=&#34;math inline&#34;&gt;\(df_{A}=r-1\)&lt;/span&gt;；&lt;/p&gt;
&lt;p&gt;对于&lt;span class=&#34;math inline&#34;&gt;\(S_{E}\)&lt;/span&gt;，查看它的公式，可以推出，对于处理的每个水平，受各自均值的约束，自由度为n-1，因此r个处理的自由度为&lt;span class=&#34;math inline&#34;&gt;\(df_{E} = r(n-1)\)&lt;/span&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;计算自由度的目的是什么？&lt;/strong&gt;有什么用？下边在计算均方时，检验变异的显著性时将会用到。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
