<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>非淡泊无以明志，非宁静无以致远。 on 非淡泊无以明志，非宁静无以致远。</title>
    <link>/</link>
    <description>Recent content in 非淡泊无以明志，非宁静无以致远。 on 非淡泊无以明志，非宁静无以致远。</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2017 Sheng Luan</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Note for IGE on harvest body weight in Nile tilapia</title>
      <link>/post/note-for-ige-for-harvest-body-weight-in-nile-tilapia/</link>
      <pubDate>Wed, 25 Apr 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/note-for-ige-for-harvest-body-weight-in-nile-tilapia/</guid>
      <description>&lt;p&gt;重点关注收获体重IGE与存活的相关性解释。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;摘要&lt;/h2&gt;
&lt;p&gt;关于间接遗传效应的定义，英文标准定义为“The heritable effect of an individual on the trait values of other individuals it interacts with is known as an indirect genetic effect (IGE)”。IGE可能会影响选择反应。鱼类对于高生长速率的持续改良，已经表明选育出的鱼具有更强的攻击性和竞争性。这可能降低生长速度的选择反应。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;关于这一点，以前是深信不疑的。虾类混合养殖和多家系多分组IGE测试结果表明，混养池生长DGE跟IGE的确是负相关的，这表明传统的选择方案，的确会选到竞争性强的虾。但是虾类更多的是竞争性行为，而不是攻击性行为。他们的后代在一起，只是竞争性强的虾会长的大，弱小的虾吃不到食物，会长的小一些，而不是互相攻击会导致死亡率升高。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这篇文章的主要目的是量化尼罗罗非鱼GIFT品系收获体重的遗传和非遗传效应。本文共计测量了6330尾鱼的收获体重，估计其遗传genetic和非遗传 (non-genetic) 参数。对收获体重和存活性状进行两性状分析(bivariate analysis)，拟合不同的线性混合效应模型，调查是否存在IGE和其他非遗传效应。当模型中包括母性共同环境效应时，并不是所有的遗传参数都可以估计出来。由于巢式交配设计的缺陷，一尾雄鱼只跟1-2尾雌鱼交配，导致直接遗传效应跟母性共同环境效应混淆在一起，无法剖分。在水产动物选择育种方案中，1雄配2雌是一个常规设计。一旦部分1:2交配组失败，半同胞家系数量较少时，利用这种交配设计便无法剖分出母性共同环境效应。&lt;/p&gt;
&lt;p&gt;利用不包括共同环境效应的模型，估计出收获体重的遗传参数，结果表明在总遗传方差中，48%来自IGE方差，且IGE效应显著。包括母性共同环境效应的模型也表明，尽管显著性统计检验不显著，但是IGE效应的确存在。收获体重的DGE-IGE遗传相关是负值(-0.38±0.19)，表明如果在一个鱼类个体间为了资源相互竞争的环境下，进行多代传统选择后，个体间的竞争将会加剧。&lt;/p&gt;
&lt;p&gt;存活性状的DGE与收获体重IGE之间存在一个非常强的负相关 (-0.79±0.30) ，表明携带更好存活基因的个体，具有更强的竞争性能，抑制同一组内同伴个体的生长速度。&lt;/p&gt;
&lt;p&gt;本文结果表明，可遗传的竞争交互影响了尼罗罗非鱼的收获体重。因此，在一个竞争性的环境下对生长速度进行选择，需要提前设计不同于经典混合养殖测试的育种方案，避免选育多代后，核心育种群体个体的竞争性或者说攻击性变得更强。&lt;/p&gt;
&lt;p&gt;需要进一步评估IGE的作用和重要性以及如何在商业育种系统中利用该效应。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1.前言&lt;/h2&gt;
&lt;p&gt;群体内个体的性状值不仅受遗传组成 (genetic makeup) 的影响，也受&lt;strong&gt;个体发育环境&lt;/strong&gt;以及&lt;strong&gt;同其他个体的社会交互&lt;/strong&gt;的影响。从社会交互的角度来看 (with social interaction) ，个体的基因型可能会影响与之交互的其他个体的性状值。在过去的研究中，动物育种专家没有重视社会交互可能产生的影响。最近二十年，进化生物学家和动物育种专家开始关注IGE，主要是因为IGE可能会影响选择反应的方向以及进展 (direction and magnitude) ，即可以利用多少遗传变异，用于选择反应。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这一段比较重要，是关于竞争性行为与生长和存活的关系的综述。&lt;/strong&gt;过去二十年间，水产遗传学家认为生长更快的鱼对于资源，具有更强的侵略性 (aggressive) 和竞争性 (competitive) 。Moyle (1969) 和Swain and Riddell (1990) 等在资源受限的养殖环境下，证实了这种关联性。与之相反，在资源充足的情况，快速生长的鱼很少会表现出侵略性。尼罗罗非鱼的养殖模式比较多，有一些集约化的养殖模式，可能会导致鱼类个体间产生竞争 (Tilapia aquaculture production systems encompass a range of environments from the viewpoint of among fish competition, including some where it is intense) 。&lt;/p&gt;
&lt;p&gt;本文通过限制饲料投喂量，来建立一个竞争性的养殖环境，评估社会交互或者IGE。 (In this paper, we investigate the magnitude of social interaction or IGE in an environment where competition for food is induced by the feeding regime.&lt;/p&gt;
&lt;p&gt;世界水产养殖产量，每年增加8.8%，尼罗罗非鱼在淡水养殖种类中占有重要的地位。世界渔业中心建立的GIFT品系，在马来西亚已经完成12代选育。GIFT品系收获体重的变异系数大约在40到60%，这是非常高的数字，作者认为&lt;strong&gt;inter-individual competition和dominance hierarchy&lt;/strong&gt;是一个重要的原因。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;2. 材料与方法&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 实验材料&lt;/h3&gt;
&lt;p&gt;实验用到了G7-G9三个世代 (2009-2011) 的三批鱼。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.2 实验设计&lt;/h3&gt;
&lt;p&gt;作者采用block design(区块设计) 来测试IGE。每个区块包括11个家系，家系间通过一种不完全双列杂交方式，两个组合在一起。每个区块产生55个组合，每个家系参与10个组合。每个组合 (1个网箱) 包括16条鱼，每个家系贡献8条。三个批次，总共设计了505个组，实际收获493个组，使用的家系数量为167个。&lt;/p&gt;
&lt;p&gt;每天的饲料投喂量大约为鱼体重的3-5%。为了能够产生竞争，把饲料放在网箱的一个角落里 (In order to allow competition take place among the fish, the feed was administered at a corner of the net-cage, instead of spreading it all over the surface of the netcage)。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.3 记录&lt;/h3&gt;
&lt;p&gt;罗非鱼在网箱中养殖大约5-8个月，体重达到200-250g时收获。收获需要1-2天时间。记录生长和存活性状测定值。共计获得6330尾鱼的表型信息，利用包括37670尾鱼的系谱信息进行遗传评估。在水产上，这可能是数据量最大的一次IGE测试实验。&lt;strong&gt;与对虾相比，组的数量多，但是获得的个体数差不多&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.4 表型和遗传参数估计&lt;/h3&gt;
&lt;p&gt;数据分析通过REML方法，利用ASReml软件完成。作者认为，收获体重仅在存活个体中获得，这其实是全部个体的一个子集 (不包括死亡个体)，用来估计遗传参数是不准确的。因此需要利用收获体重和存活两性状模型来估计。&lt;strong&gt;注：这样说是很牵强的。因为死亡个体并没有收获体重记录，加入存活性状，并不能改变什么？本文的一个结果是存活DGE跟收获体重DGE之间存在正相关，与收获体重IGE之间存在负相关。作者的意思可能是说，加入存活率，可能估计收获体重的DGE和IGE更加准确？&lt;/strong&gt;在本文中，作者对收获体中进行了log转换。&lt;/p&gt;
&lt;p&gt;作者设计了5种模型，用来分析收获体重的DGE和IGE遗传参数。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;模型1：包括DGE效应、随机组效应，以及组与家系的随机交互效应。随机组效应，也就是网箱效应，指的是个体间非遗传的间接效应；组与家系的随机交互效应，也称作非遗传的亲缘效应 (non-genetic kin effect) ，它的目的是分析鱼类能否识别亲缘个体，如自己的同胞兄妹，它们之间不产生竞争。&lt;/li&gt;
&lt;li&gt;模型2：模型1+IGE效应，但是不包括非遗传的亲缘效应。&lt;/li&gt;
&lt;li&gt;模型3：模型1+IGE效应+非遗传的亲缘效应。&lt;/li&gt;
&lt;li&gt;模型4：在模型3的基础上，进一步加入母性共同环境效应，那么会导致收获体重DGE效应剖分不出来，因此模型4在模型3的基础上，包括的母性共同环境效应，但是去除了DGE和IGE效应。&lt;/li&gt;
&lt;li&gt;模型5：在模型4的基础上，进一步加入IGE效应。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;就模型4和模型5的比较分析表明，IGE效应显著。&lt;/p&gt;
&lt;p&gt;固定效应主要是批次 (年份) 、性别、池塘效应。&lt;/p&gt;
&lt;p&gt;协变量包括日龄，以及同伴的日龄 (social age)。同伴的日龄也很重要，因为同伴的日龄大，通常意味着会影响该个体的生长。个体规格差异是会造成竞争的一个重要原因。&lt;strong&gt;这个因素在对虾模型中没有考虑&lt;/strong&gt;，从结果部分来看，影响并不大。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;3. 结果&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;3.1 总体情况&lt;/h3&gt;
&lt;p&gt;测试群体的变异系数36%，要小于其他已经发表的文献。测试群体存活率为77%，跟大部分已发表的文献类似。群体中部分不能识别家系编号的个体，放弃掉，大约占全部存活个体数的6%左右。&lt;/p&gt;
&lt;p&gt;尽管social age的回归系数达到显著性水平，但是值非常低，对于收获体重的影响非常有限。&lt;/p&gt;
&lt;p&gt;为了测试估计结果的健壮性，本文剔除了异常值后重新计算估计结果。异常值的标准为：其残差超过残差标准差的3.5倍。结果表明，估计出的参数变化不大 (1%到10%) ，相关系数没有变化。因此本文中使用的仍然是基于全部数据的估计结果。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;3.2 表型和遗传参数估计值&lt;/h3&gt;
&lt;p&gt;从似然值上看，双变量分析模型要明显优于单变量分析模型。&lt;/p&gt;
&lt;p&gt;模型中包括母性共同环境效应，无法有效地估计DGE和IGE相关参数。作者给出的原因为：“liable to change from positive definite to fixed at a boundary”。另外存在的一个估计问题为：“parameters did not converge;results not shown”。&lt;/p&gt;
&lt;p&gt;LRT检验表明，与模型1相比，加入IGE后的模型3具有更好的拟合度 (A LRT showed that model 3 had a better goodness of fit than model 1) 。&lt;/p&gt;
&lt;p&gt;尽管IGE遗传方差估计值本身比较小，但是它对总遗传变异的贡献是非常大的 (Although the estimated indirect genetic effect may seem small, its contribution to the total heritable variation was substantial) ，所占比例为48%。&lt;/p&gt;
&lt;p&gt;然而，负的DGE-IGE遗传协方差完全抵消掉了IGE方差对总遗传变异的贡献！因为:&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\frac{2(n-1)\sigma_{A_{SD}}}{ \sigma^{2}_{TBV}}\times100\% = -55\% \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;因此，总遗传方差几乎与原来的直接遗传方差相等(As a consequence, the total genetic vairance was nearly identical to the ordinary direct genetic variance) ，那么&lt;span class=&#34;math inline&#34;&gt;\(T^{2}\)&lt;/span&gt;与&lt;span class=&#34;math inline&#34;&gt;\(h^{2}\)&lt;/span&gt;几乎相等 (approximately equal to) 。&lt;/p&gt;
&lt;p&gt;总遗传变异没有变化，并不意味着IGE对选择反应没有影响(Beware that the lack of impact on &lt;span class=&#34;math inline&#34;&gt;\(\sigma^{2}_{TBV}\)&lt;/span&gt; does not mean that IGE does not affet response to selection)。&lt;/p&gt;
&lt;p&gt;相反，负的DGE-IGE遗传相关将会降低经典群体选择(ordinary mass selection)或BLUP选择的反应。&lt;/p&gt;
&lt;p&gt;中等的、但是显著的负DGE-IGE遗传相关表明，&lt;strong&gt;测试群体内存在竞争现象&lt;/strong&gt;。存活DGE与收获体重DGE之间的遗传相关很低，而且不显著。但是存活DGE与收获体重IGE之间存在显著的负相关(strongly negative）。这表明，&lt;strong&gt;存活性能强的个体，会抑制同组内其他个体的生长速度&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;基于AIC(越小越好）和LogL值(越大越好）对模型3和4进行比较分析，结果表明母性共同环境效应比DGE和IGE遗传效应更为重要，应该放入模型中(A comparison of likelihoods and AIC of models 3 and 4 shows stronger evidence for maternal common environmental effects than for genetic effects)。但是包括母性共同环境效应后，无法有效估计DGE和IGE。&lt;/p&gt;
&lt;p&gt;只比较model 4和model 5，分析IGE效应的显著性。结果表明，包括IGE的模型5具有更小的AIC值。LRT也表明，IGE效应是显著的。&lt;/p&gt;
&lt;p&gt;无论模型中是否包括遗传效应，非遗传效应估计值均十分稳定(The non-genetic random effects were robust to the inclusion or exclusion of genetic effects from the model)。&lt;/p&gt;
&lt;p&gt;文章也测试了社会母性共同环境效应，它指的是待分析个体的母性环境对同一测试组内其他个体生长速度的影响，结果表明是不显著的，因此没有加在模型中。(原理是类似的，把其同伴个体所在家系编号，作为很多列，依次排列）。&lt;/p&gt;
&lt;p&gt;根据模型3和模型5的计算结果，测试组和非遗传亲缘效应统计性检验显著，在表型方差中所占的比例分别为17%和10%。模型2和模型3的比较结果用来检验非遗传亲缘效应(The comparision of model 2 and model 3 served the purpose of testing the non-genetic kin effect)。LRT检验表明，模型3要优于模型2 (The LRT between model 2 and model 3 indicated that model 3 was statistically much better than model 2. AIC的比较也表明model 5要优于model 2 (The same result was found when comparing model 5 to model 2)，这表明非遗传亲缘效应是非常显著的(Thus non-genetic kin effects were highly significant)。&lt;strong&gt;这个结果表明与不同组内该家系个体相比，同一组内该家系个体相似度更高。这个结论可能意味着同一家系内个体可能互相认识，识别。&lt;/strong&gt;剔除该效应，除了残差方差，其他方差组分都变大了。因此，如果不在模型中包括该效应，遗传参数估计值会出现偏差。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;4. 讨论&lt;/h2&gt;
&lt;div id=&#34;overall-findings&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;4.1 主要发现overall findings&lt;/h3&gt;
&lt;p&gt;不考虑母性共同环境效应，IGE存在且显著。没有获得存活性状的IGE，低遗传力可能是一个主要原因？&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;dgeige&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;4.2 基于巢式交配设计的DGE和IGE遗传参数&lt;/h3&gt;
&lt;p&gt;加入母性共同环境效应，为什么会导致DGE和IGE遗传参数难以剖分？作者认为不成功的巢式交配设计，是导致母性共同环境效应与DGE混淆剖分不出来的主要原因。在167个家系中，只有54个半同胞家系，比例只有30%。&lt;strong&gt;注：需要强调是的，在对虾中使用的3FAM设计，只有16%的半同胞家系，依然可以剖分出共同环境效应，需要深刻剖析其原因，如果真的可以，那么就不需要建立大规模半同胞家系了。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在包括母性共同环境效应的模型5中，仅有的遗传效应是IGE。因此作者推测，IGE的遗传方差可能会包括DGE遗传方差，因此会被高估？但是在区块设计中，一个家系仅仅会与另外一个特定的家系组合在一起一次，尽管存在直接遗传方差，但是这两个家系个体间并不会产生协方差。因此，IGE方差中并不会包括来自于DGE的协方差。DGE方差应该是跟母性共同环境效应方差混淆在一起了。因为无论是否包括DGE效应，母性共同环境效应方差均没有发生变化。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注：在混养模式下，母性共同环境效应跟DGE效应混淆在一起很好理解。譬如，如果将家系间(母本遗传方差）的差异解释为DGE方差，难么为了进一步剖分出以家系为单位的共同环境效应，需要家系间有足够的遗传联系。当没有足够的遗传联系，那么两者很容易混淆在一起，无法剖分。在分组的情况下，组效应还会进一步降低家系间的差异。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;本实验的区块设计，每个家系重复10次；而3FAM设计，每个家系重复3次。但是3FAM设计也有它的优势，每个组中有3个家系，在100个组中混合100个家系，跟区块设计在500个组中混合100个家系，肯定是3FAM设计有更多的家系会分享相同的环境。这个共同的环境是非常有利于剖分加性遗传效应的，因为环境越相似性，同一个家系不同个体间的表现会越一致，这是准确估计加性遗传效应的一个重要条件。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;但是这还是没有回答前边的问题，为什么3FAM设计，更加容易剖分出共同环境效应，甚至混养模式剖分不出来，3FAM设计反而可以。&lt;strong&gt;试着反过来推一下，在混养模式下，如果不考虑系谱即家系间的亲缘关系，共同环境效应跟家系加性效应是完全混淆在一起的;而在3FAM模式下，相当于每个家系有三个重复，而且是在不同的环境中，难么有重复可能意味着可以更加准确地剖分共同环境效应？每个家系的不同重复，可以单独推算出一个共同环境效应来，这样就跟DGE不是完全混淆了？因为不同的重复，所使用的家系个体也是不一样的。推测在本文使用的区块设计中，测试组太多了，导致组效应仅能代表两个家系组合的效应，难么组效应是否会跟IGE效应混淆在一起？&lt;/strong&gt;留待继续讨论。另外有一篇文章，是2017年发表的，讨论同样是区块设计，每个组中3个家系要比2个家系更好。&lt;/p&gt;
&lt;p&gt;如上所述，作者认为交配设计是母性共同环境效应跟DGE混淆的一个主要原因，因此作者建议采取析因设计，如1雄配5雌，来强化家系间的遗传联系。但是这种设计不切合育种现状：受限于设施，难以大幅度增加全同胞家系数量。在育种计划中，如果采用上述析因设计，将会使用更少的父本个体，降低有效群体大小，不利于提高育种目标性状的选择反应。&lt;/p&gt;
&lt;p&gt;来自model 1，2，3的EBV (DGE、DGE+IGE、DGE+IGE)与来自model 5的EBV(IGE)之间，相关系数不高，这表明IGE是非常重要的。如果在育种分析中，只根据IGE选留个体，很明显不会选出那些由自身基因决定生长速度的个体，会影响目标性状的选择反应。&lt;strong&gt;模型1实际上是DGE；模型2是DGE+IGE；模型3 也是DGE+IGE，但是多了个非遗传亲缘效应；三个模型EBV之间的遗传相关都大于0.8，这表明是否考虑IGE，对于最终的遗传决定影响并不大？&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;heritable-comparision&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;4.3 可遗传的竞争(Heritable comparision)&lt;/h3&gt;
&lt;p&gt;基于模型3的DGE-IGE遗传相关表明，存在中等程度的竞争，这种竞争几乎完全抵消了IGE贡献的可遗传变异。IGE的存在并没有改变总遗传变异，TBV方差与DGE方差几乎相等。但是这并不意味着选择反应也不受影响。负的DGE-IGE协方差将会降低选择的准确性，最终降低选择反应(The negative direcct-indirect genetic covariance will reduce the accuracy of selection, which in turn reduces response)。以群体选择为例，当鱼随机在不同的组中养殖测试，而不是以家系为单位分布在不同的组中时(when fish are reared in groups at random with respect to families.)，真实的DGE准确性表述为下述方程：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\rho = \frac{\sigma_{A_{D}} + (n-1)\sigma_{A_{DS}}}{\sigma_{TBV}\sigma_{P}}=0.46\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;模型3中，DGE遗传力为0.35，准确性为sqrt(0.35)=0.59，比考虑IGE的准确性要高28%(需要注意，表5中模型3的遗传力作者忘记计算了&lt;span class=&#34;math inline&#34;&gt;\(h^{2}\)&lt;/span&gt;)。负的DGE-IGE遗传相关表明,在竞争性的环境下，当鱼类个体随机而不是以家系为单位分布在测试组时，针对个体性能的选择，将会增加竞争(The negative direct–indirect genetic correlation indicates that selection for individual performance will increase competition when fish are kept in groups composed at random with respect to family)。当测试组内个体间具有亲缘关系时，可以避免竞争加剧的问题。&lt;/p&gt;
&lt;p&gt;竞争不但会降低生长性能，而且会降低鱼类的福利性状。基于总育种值TBV进行选择，可以同时改良产量和福利性状。此外，Neilsen等表明在大西洋鳕育种中考虑IGEs可以改良福利性状的遗传进展。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;4.4 组效应和非遗传亲缘效应&lt;/h3&gt;
&lt;p&gt;在本文中，组效应贡献了16-21%的表型方差。相对于其他遗传和非遗传效应，组效应所占的比例较高(This is hight compared to other genetic and non-genetic effects in the model)。这表明每个测试组内个体具有相似的性状值，可能是因为组内个体共享一个共同社会环境的结果（&lt;strong&gt;这句话的意思是不同组个体间的竞争强度也不同？有的组，个体间竞争比较强，有的组个体间竞争比较弱？&lt;/strong&gt;）。不包括测试组效应，获得的DGE和IGE遗传方差估计值偏高，与已有的研究结果也是相一致（&lt;strong&gt;不包括测试组效应时，它可能就会混到DGE和IGE遗传方差中，由于每个家系只分布在少量组（10个），因此测试组间的差异跟家系间的差异会部分混淆，DGE和IGE遗传方差估计值偏高&lt;/strong&gt;）。&lt;/p&gt;
&lt;p&gt;在本文中，我们拟合测试组与家系的交互随机效应作为非遗传亲缘效应。此效应非常显著，解释了表型方差的9%-11%。这表明同一个测试组内家系个体具有相似的性状值，个体跟它的同胞个体的交互，不同与其他家系的个体，意味着可能存在亲缘识别kin-recognition。从进化遗传学角度来看(from an evolutionary perspective)，这种亲缘识别的行为会增加个体的广义适应度inclusive fitness（从网上搜了一下，这是进化遗传学上的一个&lt;a href=&#34;http://blog.sciencenet.cn/blog-2460731-1073296.html&#34;&gt;热点&lt;/a&gt;）。&lt;strong&gt;分析了一下虾的数据，占得比重&amp;lt;4%，存在亲缘识别的概率太低。&lt;/strong&gt;在鲑、罗非鱼上已有亲缘识别的报道。亲缘识别行为会增加IGE分析的复杂度。因为具有亲缘关系个体间的IGE效应是不同于非亲缘个体间的。此外，不同家系针对不同测试组环境的敏感性差异也会导致非遗传亲缘效应(the non-genetic kin effect may originate from environmental variation between groups together with differential sensitivity of families to such environmental variation)。&lt;strong&gt;换句话说，基因型与环境的交互也会导致非遗传亲缘效应&lt;/strong&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;implication-for-aquaculture-production&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;4.5 在水产养殖中的应用(Implication for aquaculture production)&lt;/h3&gt;
&lt;p&gt;在养殖场等，很难观察和记录鱼类行为，导致无法评估其影响。但是可以推测鱼类个体间的竞争会随着生产系统和投喂策略变化。通常会在漂浮网箱、水池和循环水养殖系统中高密度养殖鱼类个体，而在土池中进行低密度养殖。在本文中，一个关键问题是，作者在设置的竞争性实验环境下所发现的IGE，是否可以代表商业养殖场中的竞争情况？在商业养殖场，通常是组内个体数量非常多，高密度养殖，是否也会存在较大的IGE组分(In this study, one of the key questions is whether IGEs found here are representative of IGEs occuring in commercial farms)？&lt;/p&gt;
&lt;p&gt;接下来，作者从饲料和密度两个角度进行了探讨。&lt;/p&gt;
&lt;p&gt;大部分商业养殖场充足投喂饲料，这会降低群体内的竞争。此外，投喂时，本实验饲料放置在网箱一角，而商业养殖场会在整个水面投喂。推测商业养殖环境，竞争会小一些。作者进一步参考另外一个参数，即变异系数，来探讨养殖环境竞争程度的差别。与本实验养殖环境相比，在商业环境下，收获体重的变异系数更大，在40%-59.8%。这表明获取饲料的方式可能不会加剧群体的竞争性能，商业群体的竞争性要大于本群体。&lt;/p&gt;
&lt;p&gt;除了投喂方式，商业养殖场的放苗密度也远大于本实验。商业养殖场的放苗密度在1500尾/平方米，本实验仅为11尾/平方米。对于受社会交互影响的性状，总遗传方差和选择反应主要由组大小和IGEs之间的关系决定。&lt;strong&gt;在一个有很多个体的大组中，一对个体间的交互可能会非常少，这种现象称为稀释(dilution)&lt;/strong&gt;。迄今为止，在商业养殖条件下，关于水产物种竞争交互稀释程度的相关研究，未见报道。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;5. 总结&lt;/h2&gt;
&lt;p&gt;作者认为本文是在水产动物中第一次大规模开展的IGE测试实验。&lt;strong&gt;注：最早的实验开始于大西洋鳕鱼，然后是罗非鱼，南美白对虾。&lt;/strong&gt;令人遗憾的是，由于母性共同环境效应与DGE混淆，导致不能够同时估计出所有的遗传参数。当估计模型中不包括母性共同环境效应时，IGE的统计性检验达到显著水平。当估计模型中包括母性共同环境效应时，也可以检测到存在IGE (p=0.057)。&lt;strong&gt;注：因为没有达到显著水平，因此说存在。&lt;/strong&gt;利用不包括母性共同环境效应的模型，估计出负的DGE-IGE遗传相关，这表明如果在本文的环境中进行传统选择，将会增加个体间的竞争。作者也发现，存活DGE与收获体重IGE之间存在一个较高的负相关，这表明在本文的竞争性环境中(… environment that prevailed in our experiment)，具有更好存活基因的个体，会抑制同一组内伙伴个体的生长速度。母性共同环境效应与DGE效应的混淆，表明一雄配2雌的交配设计很难同时估计出所有的遗传参数。&lt;strong&gt;The confounding … indicated … has limited power to estimate all genetic parameters.&lt;/strong&gt; 我们必须要认识到，尽管其它交配设计可以获得更为准确的遗传参数，但是由于家系的数量受到限制，因此对于一个长期遗传改良计划，难以把它们做为最优设计。个体间的竞争程度受不同的养殖系统和投喂策略影响，因此对于如何在商业养殖工业利用IGE效应，还需要做更多的调查研究。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>如何理解遗传组效应</title>
      <link>/post/how-to-understand-genetic-groups/</link>
      <pubDate>Tue, 03 Apr 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/how-to-understand-genetic-groups/</guid>
      <description>&lt;p&gt;参考材料来自于&lt;a href=&#34;https://jvanderw.une.edu.au/Chapter14.pdf&#34;&gt;Julius van der Werf的教程&lt;/a&gt;。&lt;/p&gt;
&lt;div id=&#34;genetic-group&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;什么情况下需要考虑遗传组效应（Genetic group）&lt;/h2&gt;
&lt;p&gt;当数据集中的个体来源不同时，在遗传评估模型中需要考虑遗传组。当个体的亲本信息未知时，通常会假定亲本来自于同质群体（homogeneous population），具有相同的期望均值，利用混合模型估计育种值。亲本信息未知的个体，通常称为“基础个体”，奠基者个体更为合适？对于这些奠基者个体，如果它们不是来自于一个同质群体，为了区分不同奠基者个体的遗传水平，需要考虑遗传组效应。 需要注意的一点是，对于一个基础群体，亲缘关系矩阵已经考虑了所有由选择产生的遗传差异。举例说明：从一个基础群体开始分别建立高低两个选育系，如果系谱和性能测定数据完成，那么在遗传评估中，我们是不需要考虑遗传组效应的。如果利用系谱和性能测定数据，仍然剖分个体间的遗传差异，那么需要在分析中考虑遗传组效应。如果个体来自于不同的品种，是一个需要考虑的问题。&lt;/p&gt;
&lt;p&gt;作者给出了两个绵羊品种，Finnsheep和Merinos。其中Finnsheep品种的每窝产仔数均值可以达到3，而Merinos品种的每窝产仔数最多为1。由于每窝产仔数是一个低遗传力性状，如果在遗传评估中忽略品种的效应，那么会使所有个体的EBV趋向于均值（0）。但实际情况不应该是这样的，每窝产仔数的品种效应应该是很强的，而且是可信的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一开始并没有很好的理解上述说法。原来脑海中的印象是，如果不考虑遗传组，难么家系或者个体间的遗传差异会变大，那么遗传参数估计值，如遗传力会偏高。作者举例的意思是说，由于遗传力很低，那么个体的育种值也会很小，但是实际上个体的育种值应该包括品种效应，应该会更大才对。&lt;/strong&gt;那么可以推测，对于高遗传力性状，遗传组对育种值的影响会比较小，但是可能会对遗传力等估计值产生较大的影响。&lt;/p&gt;
&lt;p&gt;一个比较简单的方法，可以把个体的来源作为&lt;strong&gt;固定效应&lt;/strong&gt;，其关联矩阵X写法&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th&gt;个体类型&lt;/th&gt;
&lt;th&gt;Finnsheep (F)&lt;/th&gt;
&lt;th&gt;Merinos (M)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;Finnsheep (F)&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;Merinos (M)&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;F×M&lt;/td&gt;
&lt;td&gt;0.5&lt;/td&gt;
&lt;td&gt;0.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;M×(F×M)&lt;/td&gt;
&lt;td&gt;0.25&lt;/td&gt;
&lt;td&gt;0.75&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;注意，其中的0.25表示Finnsheep只占&lt;span class=&#34;math inline&#34;&gt;\(\frac{1}{4}\)&lt;/span&gt;，0.75表示Merinos占&lt;span class=&#34;math inline&#34;&gt;\(\frac{3}{4}\)&lt;/span&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;带有遗传组的加性遗传模型&lt;/h2&gt;
&lt;p&gt;当奠基者个体来自不同的群体时，把来源群体作为固定效应是可以的。但是，当来源群体本身是一个杂交群体时（2个或者多个群体杂交），作为固定效应很难分析。Quass（1988）提出了群体内加性遗传相关的基本结构，给出了把遗传组作为随机效应的分析模型。&lt;/p&gt;
&lt;p&gt;传统模型 &lt;span class=&#34;math display&#34;&gt;\[y=Xb+Zu+e\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;修改后的模型 &lt;span class=&#34;math display&#34;&gt;\[y=Xb+ZQg+Za+e\]&lt;/span&gt; 其中g表示固定的组效应，a表示遗传组内随机个体加性遗传效应。矩阵Q指的是个体与组的关联矩阵，而ZQ实际上把性状测定值与组进行关联。&lt;/p&gt;
&lt;p&gt;估计的育种值等于：&lt;br /&gt;
&lt;span class=&#34;math display&#34;&gt;\[\hat{u}=Q\hat{g}+\hat{a}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;实际上在模型中g是一个固定效应，模型方程可以写为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
 X^{&amp;#39;}X &amp;amp; X^{&amp;#39;}ZQ &amp;amp; X^{&amp;#39;}Z \\ 
 Q^{&amp;#39;}Z^{&amp;#39;}X &amp;amp;  Q^{&amp;#39;}Z^{&amp;#39;}ZQ &amp;amp; Q^{&amp;#39;}Z^{&amp;#39;}Z \\ 
 Z^{&amp;#39;}X &amp;amp; Z^{&amp;#39;}ZQ  &amp;amp; Z^{&amp;#39;}Z+\alpha A^{-1}
\end{bmatrix} 
\begin{bmatrix}
 b \\
 g \\
 a
\end{bmatrix} 
= 
\begin{bmatrix}
 X^{&amp;#39;}y \\
 Q^{&amp;#39;}Z^{&amp;#39;}y \\
 Z^{&amp;#39;}y
\end{bmatrix}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;上述方程左边部分看似复杂，实际上这样记忆，比较简单：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;X&lt;/th&gt;
&lt;th&gt;ZQ&lt;/th&gt;
&lt;th&gt;Z&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(X^{&amp;#39;}\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(X^{&amp;#39;}X\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(X^{&amp;#39;}ZQ\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(X^{&amp;#39;}Z\)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Q^{&amp;#39;}Z^{&amp;#39;}\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Q^{&amp;#39;}Z^{&amp;#39;}X\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Q^{&amp;#39;}Z^{&amp;#39;}ZQ\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Q^{&amp;#39;}Z^{&amp;#39;}Z\)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Z^{&amp;#39;}\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Z^{&amp;#39;}X\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Z^{&amp;#39;}ZQ\)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span class=&#34;math inline&#34;&gt;\(Z^{&amp;#39;}Z+\alpha A^{-1}\)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;对角线上是自己跟自己，非对角线是互相结合在一起。之所以行是转置矩阵，也是很好理解的。&lt;/p&gt;
&lt;p&gt;举一个例子，如果有10条测定记录，b如果有3个固定效应，那么b是3×1列向量，那么&lt;span class=&#34;math inline&#34;&gt;\(X^{&amp;#39;}Xb\)&lt;/span&gt;要想可以相乘，&lt;span class=&#34;math inline&#34;&gt;\(X^{&amp;#39;}X\)&lt;/span&gt;必须要是3列。而我们知道，设计矩阵X是10×3列，&lt;span class=&#34;math inline&#34;&gt;\(X^{&amp;#39;}X\)&lt;/span&gt;正好是一个3×10×10×3=3×3列矩阵，反过来是10×10矩阵，是不可以的，其他相同原理。&lt;/p&gt;
&lt;p&gt;上述方程中，难题可能是在于如何建立Q矩阵？（In practice such equation would cause problems, unless a systematic way is found to create the Q matrix，这句话不是很理解！）&lt;/p&gt;
&lt;p&gt;Quaas对上述方程进行了变换，从左边统一乘以下述矩阵：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
I &amp;amp; 0 &amp;amp; 0 \\
0 &amp;amp; I &amp;amp; -Q^{&amp;#39;} \\
0 &amp;amp; 0 &amp;amp; I
\end{bmatrix}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
I &amp;amp; 0 &amp;amp; 0 \\
0 &amp;amp; I &amp;amp; -Q^{&amp;#39;} \\
0 &amp;amp; 0 &amp;amp; I
\end{bmatrix}
\begin{bmatrix}
 X^{&amp;#39;}X &amp;amp; X^{&amp;#39;}ZQ &amp;amp; X^{&amp;#39;}Z \\ 
 Q^{&amp;#39;}Z^{&amp;#39;}X &amp;amp;  Q^{&amp;#39;}Z^{&amp;#39;}ZQ &amp;amp; Q^{&amp;#39;}Z^{&amp;#39;}Z \\ 
 Z^{&amp;#39;}X &amp;amp; Z^{&amp;#39;}ZQ  &amp;amp; Z^{&amp;#39;}Z+\alpha A^{-1}
\end{bmatrix}
\begin{bmatrix}
b \\
g \\
a
\end{bmatrix}
=
\begin{bmatrix}
I &amp;amp; 0 &amp;amp; 0 \\
0 &amp;amp; I &amp;amp; -Q^{&amp;#39;} \\
0 &amp;amp; 0 &amp;amp; I
\end{bmatrix}
\begin{bmatrix}
X^{&amp;#39;}y \\
Q^{&amp;#39;}Z^{&amp;#39;}y \\
Z^{&amp;#39;}y
\end{bmatrix}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;方程会变化为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
 X^{&amp;#39;}X &amp;amp; X^{&amp;#39;}ZQ &amp;amp; X^{&amp;#39;}Z \\ 
 0 &amp;amp;  0 &amp;amp; -\alpha Q^{&amp;#39;}A^{-1} \\ 
 Z^{&amp;#39;}X &amp;amp; Z^{&amp;#39;}ZQ  &amp;amp; Z^{&amp;#39;}Z+\alpha A^{-1}
\end{bmatrix}
\begin{bmatrix}
b \\
g \\
a
\end{bmatrix}
=
\begin{bmatrix}
X^{&amp;#39;}y \\
0 \\
Z^{&amp;#39;}y
\end{bmatrix}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;对上述方程组继续进行变换：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
 X^{&amp;#39;}X &amp;amp; X^{&amp;#39;}ZQ &amp;amp; X^{&amp;#39;}Z \\ 
 0 &amp;amp;  0 &amp;amp; -\alpha Q^{&amp;#39;}A^{-1} \\ 
 Z^{&amp;#39;}X &amp;amp; Z^{&amp;#39;}ZQ  &amp;amp; Z^{&amp;#39;}Z+\alpha A^{-1}
\end{bmatrix}
\begin{bmatrix}
I &amp;amp; 0 &amp;amp; 0 \\
0 &amp;amp; I &amp;amp; 0 \\
0 &amp;amp; -Q &amp;amp; I
\end{bmatrix}
\begin{bmatrix}
I &amp;amp; 0 &amp;amp; 0 \\
0 &amp;amp; I &amp;amp; 0 \\
0 &amp;amp; Q &amp;amp; I
\end{bmatrix}
\begin{bmatrix}
b \\
g \\
a
\end{bmatrix}
=
\begin{bmatrix}
X^{&amp;#39;}y \\
0 \\
Z^{&amp;#39;}y
\end{bmatrix}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;上式中： &lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
I &amp;amp; 0 &amp;amp; 0 \\
0 &amp;amp; I &amp;amp; 0 \\
0 &amp;amp; -Q &amp;amp; I
\end{bmatrix}
\begin{bmatrix}
I &amp;amp; 0 &amp;amp; 0 \\
0 &amp;amp; I &amp;amp; 0 \\
0 &amp;amp; Q &amp;amp; I
\end{bmatrix}
=I
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;互为逆矩阵，乘积为单位矩阵。&lt;/p&gt;
&lt;p&gt;方程组左手边，前两个矩阵相乘后两个矩阵相乘，得到新的方程组：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
 X^{&amp;#39;}X &amp;amp; 0 &amp;amp; X^{&amp;#39;}Z \\ 
 0 &amp;amp;  \alpha Q^{&amp;#39;}A^{-1}Q &amp;amp; -\alpha Q^{&amp;#39;}A^{-1} \\ 
 Z^{&amp;#39;}X &amp;amp; -\alpha A^{-1}Q  &amp;amp; Z^{&amp;#39;}Z+\alpha A^{-1}
\end{bmatrix}
\begin{bmatrix}
b \\
g \\
u=Qg+a
\end{bmatrix}
=
\begin{bmatrix}
X^{&amp;#39;}y \\
0 \\
Z^{&amp;#39;}y
\end{bmatrix}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;关于新的方程组，作者的评价说实话，一点都没看懂。&lt;/p&gt;
&lt;p&gt;第一个优点，作者讲的是对于固定效应，组的两个非对角线元素（第2,1或者1,2）都是零；而且右手边，组元素（2,1）也是零；意思应该是说计算更加简单。&lt;/p&gt;
&lt;p&gt;第二个优点：组内个体的解，直接包括的组效应（u=Qg+a）。作者讲，这是在求解混合模型方程时，是一个重要的优势。&lt;/p&gt;
&lt;p&gt;然而作者认为最重要的是建立了一种定义遗传组的灵活形式。作者认为组方程跟不带有数据的个体方程十分类似。个人理解，组方程指的应该是这样一个方程：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\alpha Q^{&amp;#39;}A^{-1}Qg - \alpha Q^{&amp;#39;}A^{-1}u = 0\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;个体动物方程：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[Z^{&amp;#39;}Xb - \alpha A^{-1}Qg + (Z^{&amp;#39;}Z+\alpha A^{-1})u = Z^{&amp;#39;}y\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;没有看出二者明显的相似性来。作者认为，遗传组就像祖先个体一样，定义个体跟遗传组的亲缘矩阵（Q矩阵）。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;assigning-animals-to-genetic-groups&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;分配个体到遗传组（Assigning animals to genetic groups&lt;/h2&gt;
&lt;p&gt;可以根据基础个体的品种、出生年份来定义组。需要明确的一个问题，是如何定义组的关联矩阵，个体的观测值如何与组关联。&lt;/p&gt;
&lt;p&gt;作者举了个例子：&lt;/p&gt;
&lt;p&gt;个体的祖先可能来自不同的品种，而且在不同年份出生。那么根据系谱可以推算出，各组对个体的遗传贡献，来定义关联矩阵：1998年出生的品种1占0.25、2002年出生的品种2占0.25、2004年出生的品种2占0.5。个体中每个组的贡献，实际上与它的遗传贡献是密切相关的。Quass定义了一种方法，可以根据个体与组的关系，推导出它的后代与这些组的关系。&lt;/p&gt;
&lt;p&gt;基础个体，原则上我们是不知道他们的系谱的，因此必须要根据起源，把他们分派到不同的遗传组。根据Quass的方法，不是把基础群体直接分配到组，而是把它们分配给虚拟亲本个体（dummy parents），虚拟个体直接分为不同的组，作者也称这些个体为幽灵个体（phantom parents）。例如，一头普通的奶牛可以分配给一头幽灵公牛。幽灵公牛可以划分为1985-1990年出生的公牛组。幽灵母牛可以分配给1992年母牛组。分配幽灵亲本到一个遗传组，后代通过系谱连接到遗传组。事实上，我们可以处理幽灵亲本作为系谱的正常部分（例如Henderson系数规则）。这创建了一个非常灵活的框架，用来分配个体到遗传组。&lt;/p&gt;
&lt;p&gt;新的育种值估计模型为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{bmatrix}
u_{b} \\
u
\end{bmatrix}
=
\begin{bmatrix}
0 &amp;amp; 0 \\
P_{b} &amp;amp; P
\end{bmatrix}
\begin{bmatrix}
u_{b} \\
u
\end{bmatrix}
+
\begin{bmatrix}
u_{b} \\
w
\end{bmatrix}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中&lt;span class=&#34;math inline&#34;&gt;\(P_{b}\)&lt;/span&gt;指的是个体到幽灵亲本的亲缘矩阵，P指的是个体到非幽灵个体亲缘矩阵，看Quass1988年文章，这里指的是直接到双亲的亲缘关系，每一行只有两个数（0.5）。&lt;/p&gt;
&lt;p&gt;未知幽灵亲本的期望均值公式为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[E(u_{b})=Q_{b}g\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中&lt;span class=&#34;math inline&#34;&gt;\(Q_{b}\)&lt;/span&gt;是基础个体到遗传组的关联矩阵，g是遗传组效应。&lt;/p&gt;
&lt;p&gt;已知个体的育种值向量u，根据上述方程，可以表述为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
u = P_{b}u_{b}+Pu+w \\
u-Pu = P_{b}u_{b}+w \\
(I-P)u =  P_{b}u_{b}+w \\
(I-P)^{-1}(I-P)u =  (I-P)^{-1}P_{b}u_{b} +  (I-P)^{-1}w \\
u =  (I-P)^{-1}P_{b}u_{b} +  (I-P)^{-1}w \\
E(u)= (I-P)^{-1}P_{b}E(u_{b}) + (I-P)^{-1}E(w) \\
E(u)= (I-P)^{-1}P_{b}Q_{b}g = Qg
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中Q是所有已知个体到遗传组的关联矩阵。猜想，这里遗传组应该就是用幽灵个体代替？作者举例如下：&lt;/p&gt;
&lt;p&gt;譬如有个体数量为n，遗传组数量为p的数据集，那么Q矩阵是n×p矩阵。Q中的第&lt;span class=&#34;math inline&#34;&gt;\((i,j)^{th}\)&lt;/span&gt;个元素表示第&lt;span class=&#34;math inline&#34;&gt;\(i^{th}\)&lt;/span&gt;个体基因来自第&lt;span class=&#34;math inline&#34;&gt;\(j^{th}\)&lt;/span&gt;个遗传组的百分比。因此，遗传组与祖先个体非常相似。仅仅直接的遗传联系（亲子？）会被考虑，其他遗传联系会自动被implied？仅仅那些有1个或者2个亲本未知的个体，需要指定其遗传组。丢失的亲本会自动被分组。&lt;/p&gt;
&lt;p&gt;建立组方程的规则总结为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为基础个体分配幽灵（虚拟）个体&lt;/li&gt;
&lt;li&gt;定义幽灵个体属于哪个遗传组&lt;/li&gt;
&lt;li&gt;利用系谱（包括幽灵个体）建立混合模型方程组。对于第&lt;span class=&#34;math inline&#34;&gt;\(i^{th}\)&lt;/span&gt;个体，对其孟德尔抽样方差求逆：&lt;span class=&#34;math inline&#34;&gt;\(b_{i} = 4/(2+分配到遗传组的亲本数)\)&lt;/span&gt;；然后把&lt;span class=&#34;math inline&#34;&gt;\(b_{i}\)&lt;/span&gt;增加到&lt;span class=&#34;math inline&#34;&gt;\(A^{-1}\)&lt;/span&gt;，具体方法为：把&lt;span class=&#34;math inline&#34;&gt;\(-b_{i}/2\)&lt;/span&gt;加到&lt;span class=&#34;math inline&#34;&gt;\(A^{-1}\)&lt;/span&gt;矩阵的(i,s), (i,d), (s,i) 和 (d,i)位置元素上，把&lt;span class=&#34;math inline&#34;&gt;\(-b_{i}/4\)&lt;/span&gt;加到&lt;span class=&#34;math inline&#34;&gt;\(A^{-1}\)&lt;/span&gt;矩阵的(s,s), (s,d), (d,s) 和 (d,d)位置元素上。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当两个亲本已知时，&lt;span class=&#34;math inline&#34;&gt;\(b_{i}=2\)&lt;/span&gt;，表示个体跟遗传组没有联系。因此增加的系数分别是2，-1和1/2，与NRm分子亲缘关系矩阵的逆矩阵系数相一致（2个亲本已知）。如果一个亲本已知，那么&lt;span class=&#34;math inline&#34;&gt;\(b_{i}=4/3\)&lt;/span&gt;，因此增加的系数分别是4/3，-2/3和1/3，与NRm分子亲缘关系矩阵的逆矩阵系数相一致（1个亲本已知）。如果没有亲本是已知的，表示两个亲本都需要分配到组，那么&lt;span class=&#34;math inline&#34;&gt;\(b_{i}=1\)&lt;/span&gt;,因此增加的系数分别是1，-1/2和1/4。&lt;/p&gt;
&lt;p&gt;逻辑解释：如果双亲已知，那么育种值方差的一半（父母本各一半育种值，从方差角度，就是1/4+1/4=1/2）是可以被解释的，剩余的1/2，转换为倒数，就是&lt;span class=&#34;math inline&#34;&gt;\(\frac{1}{2}^{-1}=2\)&lt;/span&gt;，加到A矩阵的逆矩阵相应系数上。&lt;/p&gt;
&lt;p&gt;到此为止，没怎么看明白。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>read a file by python</title>
      <link>/post/read-a-file-by-python/</link>
      <pubDate>Sun, 11 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/read-a-file-by-python/</guid>
      <description>&lt;p&gt;栾佳硕的任务：&lt;/p&gt;
&lt;p&gt;1.建立一个文件，在文件中写入以下内容：&lt;/p&gt;
&lt;p&gt;Watch the cartoon.&lt;/p&gt;
&lt;p&gt;go fishing.&lt;/p&gt;
&lt;p&gt;(不会了话看编程书）&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;f = open(&amp;quot;lsj.txt&amp;quot;,&amp;quot;w&amp;quot;)
f.writelines(&amp;quot;Watch the  cartoon.\ngo fishing&amp;quot;)
f.close()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2.把它读出来，并且用format方法显示出来。&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;with open(&amp;quot;lsj.txt&amp;quot;,&amp;quot;r&amp;quot;) as f:
    for line in f.readlines():
        print(line.strip())&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Watch the  cartoon.
## go fishing&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>学习在python中使用类</title>
      <link>/post/how-to-define-class-in-python/</link>
      <pubDate>Sun, 11 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/how-to-define-class-in-python/</guid>
      <description>&lt;div id=&#34;bankaccount&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 建立BankAccount类&lt;/h2&gt;
&lt;p&gt;栾佳硕的作业：建立一个对象，名为BankAccount.它应该有一些属性，包括账户名（一个字符串）、账号（一个字符串或整数）和余额（一个浮点数） 另外还要有一些方法显示余额、存钱和取钱。&lt;/p&gt;
&lt;p&gt;定义类BankAccount，包括三个属性：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;user_name，账户名（一个字符串）&lt;/li&gt;
&lt;li&gt;account_number，账号（一个字符串或整数）&lt;/li&gt;
&lt;li&gt;balance，余额（一个浮点数）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;设置三个方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;get_balance()，展示当前账号余额&lt;/li&gt;
&lt;li&gt;save_money()，存钱&lt;/li&gt;
&lt;li&gt;withdraw_money()，取钱&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;class BankAccount:
    def __init__(self,user_name,account_number,balance):
      self.user_name = user_name
      self.account_number = account_number
      self.balance = balance
      
    def get_balance(self):
        print(&amp;quot;账户%s当前余额为%.2f元。&amp;quot; % (self.account_number,self.balance))
        return(self.balance)
        
    def save_money(self,money):
        self.balance += money
        
    def withdraw_money(self,money):
        self.balance -= money&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;根据BankAccount，创建一个账户：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户名：luansheng&lt;/li&gt;
&lt;li&gt;账号： 82833299492&lt;/li&gt;
&lt;li&gt;余额：0元&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;luan_account = BankAccount(&amp;quot;luansheng&amp;quot;,&amp;quot;82833299492&amp;quot;,0.0)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;存入1亿元&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;luan_account.save_money(100000000)
luan_account.get_balance()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 账户82833299492当前余额为100000000.00元。&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;取款3千万元过春节&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;luan_account.withdraw_money(30000000)
luan_account.get_balance()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 账户82833299492当前余额为70000000.00元。&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;interestaccount&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;2. 建立InterestAccount类&lt;/h2&gt;
&lt;p&gt;建立一个类，名为InterestAccount。它可以挣利息。他要继承BankAcccount的属性以及方法（在之前的挑战任务栏）。 在属性栏中增加个利息率，另外还要增加一个方法用来挣利息。 这里，继续需要把父类的所有属性都加上？也太麻烦了！&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;class InterestAccount(BankAccount):
    def __init__(self,user_name,account_number,balance,interest_rate):
        BankAccount.__init__(self,user_name,account_number,balance)
        self.interest_rate = interest_rate
    def save_money(self,money,year):
        self.balance += money*((1+self.interest_rate) ** year)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;计算存1万元，利息为0.045，存10年，可以赚多少钱？&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;luan_account2 = InterestAccount(&amp;quot;luansheng&amp;quot;,&amp;quot;82833299492&amp;quot;,0.0,0.045)
luan_account2.save_money(10000,10)
print(&amp;quot;1万元存10年，利息为0.045，可以多赚%.2f元&amp;quot; % (luan_account2.get_balance() - 10000))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 账户82833299492当前余额为15529.69元。
## 1万元存10年，利息为0.045，可以多赚5529.69元&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Is continued genetic improvement of livestock sustainable-阅读笔记</title>
      <link>/post/is-continued-genetic-improvement-of-livestock-sustainable/</link>
      <pubDate>Thu, 08 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/is-continued-genetic-improvement-of-livestock-sustainable/</guid>
      <description>&lt;p&gt;Hill William G. Is continued genetic improvement of livestock sustainable? Genetics, 2016, 202:977-881.&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;摘要&lt;/h2&gt;
&lt;p&gt;作者认为，很少遗传变异已经丢失，连续遗传改良是可持续的，没有问题的。&lt;/p&gt;
&lt;p&gt;ps：&lt;strong&gt;但是从商业角度看，并不是遗传变异丢失的问题，而是谁家的育种方案优化，遗传变异更丰富，培育出的良种性能更好。只是有遗传变异是远远不够的。&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;正文&lt;/h2&gt;
&lt;p&gt;作者主要从事鸡的选育工作。关于动物育种的历史、理论、方法，参见作者本人的下述著作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hill, W. G., 1982 Predictions of response to artificial selection from new mutations. Genet. Res. 40:255–278.&lt;/li&gt;
&lt;li&gt;Hill, W. G., 2010 Understanding and using quantitative genetic variation. Phil. Trans. R. Soc. B 365:73–85.&lt;/li&gt;
&lt;li&gt;Hill, W. G., 2014 Applications of population genetics to animal breeding, from Wright, Fisher and Lush to genomic prediction. Genetics 196: 1–16.&lt;/li&gt;
&lt;li&gt;Hill, W. G., A. Wolc, N. P. O’Sullivan, and S. Avendaño, 2016 Breeding for sustainability: maintaining and enhancing multi-trait genetic improvement, chapter 11 in Sustainable Poultry Production in Europe, edited by E. Burton, J. Gatcliffe, H. M. O’Neill, and D. Scholey. CABI, Wallingford, UK (in press).&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;已经取得的遗传进展&lt;/h3&gt;
&lt;p&gt;对于肉鸡，以1957年的一个未经选择的品系作为对照：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1991年统计的生长速度提高了3.47倍，2011年统计的生长速度提高了4.36倍，平均每年在3.4%~3.7%左右。&lt;/li&gt;
&lt;li&gt;2001年的统计结果中，鸡胸脯肉占体重的比例，也是1957年的2倍；&lt;/li&gt;
&lt;li&gt;饲料转化效率也达到了3.3%/年（1957-2005）；&lt;/li&gt;
&lt;li&gt;达到商品规格屠宰的时间，也缩短到35d；&lt;/li&gt;
&lt;li&gt;从工业界反馈的数据来看，体重每年的增加速度&lt;sub&gt;2%，胸脯肉在&lt;/sub&gt;4% （2006-2013）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;为了增加生产速度，需要增加鸡的食欲，同时要控制食物摄入量，以便于更好的生产。对于生长速度的改良，会带来负面效应。由于体重变大，肉鸡腿和脚的支撑能力不足。&lt;/p&gt;
&lt;p&gt;肉鸡主要性状的遗传力表现为中高等，但是蛋鸡的生产性状，并不是这样。在60年前，育种学家非常担心选择平台期（selection plateaus)。但实际上，蛋鸡的饲料利用效率（鸡蛋重量/饲料重量）的进展在0.7%/年，仍在不断提高。尽管蛋鸡每天的产蛋量很少超过1个，但是鸡的产蛋年龄提前，并且体重更轻，产蛋周期更长，产的蛋更大。&lt;/p&gt;
&lt;p&gt;家禽的选育策略，通常是多元杂交方式。分别建立父本和母本选育系，父本选育系侧重生长，母本选育系侧重繁殖力。每个选育系主要是纯种选育，但是也会通过BLUP的方法考虑杂种的性能，因为杂种也就是商品鸡会在不同的养殖环境下养殖，譬如低饲料投喂量、高疾病风险、组饲养等。&lt;/p&gt;
&lt;p&gt;奶牛的群体结构，与家禽非常不同，要包括很多场，主要是通过后裔测定，选出好的公牛。最近几年，奶牛的选育重点，放在与产奶量性状负相关的牛奶蛋白百分比和母牛繁殖力等方面，并取得了一些进展，扭转了这两个性状下降的趋势。总体来看，荷斯坦奶牛的产奶量的遗传进展：每年0.5%，大约每代3%。随着基因组选择技术的应用，遗传改良速度也在不断提高。&lt;/p&gt;
&lt;p&gt;与动物相比，植物遗传材料很多，自交、双单倍体、克隆等，育种系统非常灵活。不利的地方时，受区域、天气的影响比较大。&lt;/p&gt;
&lt;p&gt;ps：&lt;strong&gt;水产动物，特别是南美白对虾，存在多种养殖模式，工厂化的部分，偏向于畜牧，标准化、高度可控的模式；但是开放的系统，如土池和高位池养殖模式，高盐、低盐等，又偏向于植物，需要强调基因型与环境互作。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;对于杂交玉米，产量的提高速度，大约是每年1%以上，如果在好的种植条件下，譬如有充足的的降雨量，大约是2%左右。对于小麦产量，改良速度大约是0.6~0.7%左右。&lt;/p&gt;
&lt;p&gt;优质种质的扩繁形式，动植物差别很大。植物如小麦，主要是出售近交系，而玉米是近交系的杂交后代。而动物，主要是通过纯种（奶牛）和杂种（家禽）形式扩繁销售。&lt;/p&gt;
&lt;p&gt;动植物的另外一个较大差别是，植物品种较为稳定，只有当新的品种替换了旧品种，那么改良的效果才会体现。而动物，每年提供的品种，性能都会比上一年要好。&lt;/p&gt;
&lt;p&gt;ps：在扩繁方面，水产动物与畜牧动物更为一致。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;遗传结构和模型&lt;/h2&gt;
&lt;p&gt;畜牧动物重要的生产性状都是数量性状，后代分布和选择反应均很好的验证了其符合Fisher的微效多基因模型。 来自人类身高的GWAS分析，也表明该性状是高度多基因决定的本质。 . 有一篇模拟文章，表明少数SNP不会对总遗传方差起主要作用。但是没怎么看懂。&lt;/p&gt;
&lt;p&gt;Kemper, K. E., C. M. Reich, and P. J. Bowman, C. J. Vander Jagt, A. J. Chamberlain et al., 2015 Improved precision of QTL mapping using a nonlinear Bayesian method in a multi-breed population leads to greater accuracy of across-breed genomic predictions. Genet. Sel. Evol. 47: 29.&lt;/p&gt;
&lt;p&gt;来自畜禽高密度基因组标记的研究表明：选择反应很难用几个标记解释。譬如最好的10-20个标记，只能解释跨世代总方差的0.5-1%，与实际结果不一致。&lt;/p&gt;
&lt;p&gt;基因组选择的作用，是通过利用realized relationship through shared genomic regions和marker-associated effects through linkage disequilibrium using information on distantly related individuals来提高选择的准确度。&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>抛硬币测试与温度转换</title>
      <link>/post/coin-test/</link>
      <pubDate>Thu, 08 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/coin-test/</guid>
      <description>&lt;p&gt;栾佳硕的作业，计算硬币抛100万次，连续正面朝上10次的有多少次？&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
import random
counter1 = 0
counter2 = 0
for i in range(1000000):
    coin = random.choice([0,1]) #假定1表示正面
    if coin == 1:
        counter1 += 1
    else:
        counter1 = 0
    if counter1 == 10:
        counter2 += 1
        counter1 = 0
    
print(&amp;quot;抛掷硬币1000000次，其中连续10次正面朝上的次数为%i&amp;quot; % counter2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 抛掷硬币1000000次，其中连续10次正面朝上的次数为456&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;写一个函数，把摄氏度转为华氏度。&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;def convertC2F(C):
    F = 32 + C * 1.8
    return F
c1 = 30    
f1 = convertC2F(c1)    
print(&amp;quot;摄氏度%.2f等于华氏度%.2f&amp;quot; % (c1,f1))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 摄氏度30.00等于华氏度86.00&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>pygame 练习1</title>
      <link>/post/pygame-exercise-1/</link>
      <pubDate>Wed, 07 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/pygame-exercise-1/</guid>
      <description>&lt;p&gt;栾佳硕给出的作业，用Pygame显示一个窗口（填充为黑色）:&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
import pygame as pg
from pygame.locals import *
from sys import exit
#初始化pygame
pg.init()
#设置屏幕分辨率640*480
screen = pg.display.set_mode((640,480),0,32)
#设置窗口的标题
pg.display.set_caption(&amp;quot;黑色窗口&amp;quot;)
#设置背景色
bg_color = (0,0,0)
while True:
    for event in pg.event.get():
        if event.type == QUIT:
            #接收到退出事件后退出程序
            exit()
    screen.fill(bg_color)
    &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;运行结果如下图所示：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/2018-02-07.png&#34; title=&#34;pygame生成的黑色窗口&#34; alt=&#34;pygame生成的黑色窗口&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;pygame生成的黑色窗口&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>python 定时器</title>
      <link>/post/python-timer/</link>
      <pubDate>Tue, 06 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/python-timer/</guid>
      <description>&lt;p&gt;栾佳硕给出的作业，要求三秒钟打印出一个随机小数:&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
import random
import time
seconds = 3
counter = 1
while counter &amp;lt;= 5:
    print(&amp;quot;第%i个两位小数是%.2f&amp;quot; %(counter,random.uniform(0,1)))
    counter += 1
    time.sleep(seconds)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 第1个两位小数是0.83
## 第2个两位小数是0.31
## 第3个两位小数是0.18
## 第4个两位小数是0.77
## 第5个两位小数是0.64&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>输入5个人的名字，并打印出来</title>
      <link>/post/input-five-names/</link>
      <pubDate>Tue, 06 Feb 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/input-five-names/</guid>
      <description>&lt;p&gt;栾佳硕给出的作业，输入5个人的名字，并打印出来:&lt;/p&gt;
&lt;p&gt;定义一个元组names，存储输入的用户名字。&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# -*- coding: utf-8 -*-
names = ()
counter = 1
while counter &amp;lt;= 5:
    tuple1 = (input(&amp;quot;请输入您的名字&amp;quot;),)
    names += tuple1
    counter += 1
    
for i in names:
    print(i)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其他不需要编程的问题：&lt;/p&gt;
&lt;p&gt;1.什么是属性（对象）&lt;/p&gt;
&lt;p&gt;对象的属性，用来描述对象的特征。譬如一尾虾，它的属性可以包括：重量、长度、年龄等。从本质上讲，类是没有属性的，对象才有属性。&lt;/p&gt;
&lt;p&gt;2.如何创建模块？&lt;/p&gt;
&lt;p&gt;Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。&lt;/p&gt;
&lt;p&gt;模块让你能够有逻辑地组织你的 Python 代码段。&lt;/p&gt;
&lt;p&gt;把相关的代码分配到一个模块里能让你的代码更好用，更易懂。&lt;/p&gt;
&lt;p&gt;模块能定义函数，类和变量，模块里也能包含可执行的代码。&lt;/p&gt;
&lt;p&gt;通过&lt;code&gt;import&lt;/code&gt;语句导入自定义的模块。譬如自定义了一个名为shrimp.py的模块，可以这样导入：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;import shrimp&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果你只想导入shrimp模块中一个计算体重的&lt;code&gt;get_weight()&lt;/code&gt;函数，可以用&lt;code&gt;from ... import&lt;/code&gt;语句实现：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;from shrimp import get_weight&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;关于模块的知识，我参考的&lt;a href=&#34;http://www.runoob.com/python/python-modules.html&#34;&gt;这个网址&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3.while循环什么时候结束？&lt;/p&gt;
&lt;p&gt;设定一个条件，当不满足条件的时候，while循环就结束了。譬如下边的例子：当i等于6时，不满足&lt;code&gt;i&amp;lt;=5&lt;/code&gt;的条件，就会自动结束。&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;i = 1
while i &amp;lt;= 5:
    print(i)
    i += 1&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 1
## 2
## 3
## 4
## 5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;print(i)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 6&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4.Python中计算&lt;code&gt;6*6*6*6&lt;/code&gt;的另一种做法是什么？&lt;/p&gt;
&lt;p&gt;这是一个很好的问题，通过查询网络，可以通过&lt;code&gt;**&lt;/code&gt;符号实现：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;print(6*6*6*6)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 1296&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;print(6**4)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 1296&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>第六届中国养虾高手年会记录</title>
      <link>/post/the-sixth-meeting-about-how-to-rearing-shrimp-in-haikou/</link>
      <pubDate>Sat, 27 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/the-sixth-meeting-about-how-to-rearing-shrimp-in-haikou/</guid>
      <description>&lt;p&gt;1.25-26日，参加了在海口由水产前沿举办的第六届中国养虾高手年会。具体的会议记录，见水产前沿的&lt;a href=&#34;http://www.fishfirst.cn/article-98482-1.html&#34;&gt;详细报道&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;第一次参加非学术组织举办的这种会议，感觉非常新鲜，也非常有活力。整个活动，没有政府部门的领导参加，纯粹是学术界跟企业界的对接，这种形式真的非常好。很多饲料、苗种企业对于真正有用的学术成果非常渴望，从科研工作者的角度来看，学术成果要想转化为生产力，应该多参加这样的会议。也有利于自己学术方向的调整，做真正有用的研究。&lt;/p&gt;
&lt;p&gt;会议的几点收获：&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1 种业方面&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.1 种质方面&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;中国南美白对虾的养殖产量下降的非常厉害。SIS郑光发先生的报道，预测2017年南美白对虾国内产量只有58万吨左右。印度和越南的产量在不断增加，大约分别为45万吨和50万吨左右。这个结果与统计年鉴存在较大的出入。&lt;/li&gt;
&lt;li&gt;国外进口南美白对虾量在不断增加，正大陈丹先生的报告显示，2017年进口量在30万吨左右。&lt;/li&gt;
&lt;li&gt;中国进口种虾没有充分发挥性能。中国进口25万对，印度和越南进口分别在9万对左右。结果产量现在后两个国家追平。SIS郑光发认为主要原因是进口种虾鱼龙混杂，没有严格把控亲虾来源。事实上在企业的走访中，也表明一些&lt;strong&gt;进口亲虾都携带荧光弧菌&lt;/strong&gt;等问题。&lt;/li&gt;
&lt;li&gt;国外公司如SIS在抗性测试方面，从报告中表明是对各种细菌和病毒都进行抗性测试。&lt;/li&gt;
&lt;li&gt;国外公司已经意识到苗种的适应性差问题，譬如SIS提到，专门在国内开始性状测试工作，主要是针对土塘和高位池进行测试。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;正大陈丹先生在报告中提到，正大优质种虾的标准：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;没有以下病毒：WSSV（白斑综合症病毒）、IHHNV（Infectious subcutaneous and hematopoietic tissue necrosis virus，传染性皮下及造血组织坏死病毒）、IMNV(传染性肌肉坏死病毒）、TSV（桃拉病毒）、黄头病毒（YHV）、鳃病毒（GAV）、NHPB（肝胰腺坏死性细菌）、EMS/AHPND（早期死亡综合征/急性肝胰腺坏死症）、EHP；&lt;/li&gt;
&lt;li&gt;养殖天数超过180d，公虾体重&amp;gt;65g，母虾体重70g；&lt;/li&gt;
&lt;li&gt;性器官发育完好，肢体发育完全，健康活力好；&lt;/li&gt;
&lt;li&gt;亲虾产的幼体从2012年的350um，到2017年的480um，大了1/3；&lt;/li&gt;
&lt;li&gt;苗种的生长速度，以达到30g/尾规格为标准，2012年需要110d，2017年只需要64d，缩短了56d，非常惊人。&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.2 生物安保&lt;/h3&gt;
&lt;p&gt;从一个厂区的角度，一个种虾场或者苗种场应该具备：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;进出车辆消毒&lt;/li&gt;
&lt;li&gt;生产度单独隔离&lt;/li&gt;
&lt;li&gt;生产区雾化消毒通道&lt;/li&gt;
&lt;li&gt;人员淋浴消毒室，进出车间人员雾化消毒&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;黄倢老师的报告： 从他的报告中，可以看出，2013-2017，病毒的检出率是在不断下降的。特别是EHP的检出率，已经由2017年的50%多，下降到现在的不到30%。WSSV的检出率从30%到10%。急性肝胰腺坏死症2016年特别厉害（接近30%），2017在15%左右。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一种新的病毒病：虾血细胞虹彩病毒病（SHIV）。主要症状：
&lt;ul&gt;
&lt;li&gt;肝胰腺颜色变浅&lt;/li&gt;
&lt;li&gt;额剑基部出现白点，如罗氏沼虾“白头病”&lt;/li&gt;
&lt;li&gt;整体颜色变浅，体节明显&lt;/li&gt;
&lt;li&gt;幼虾死亡明显&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;感染24小时内升温至33度可以有效的防止白斑病。&lt;/li&gt;
&lt;li&gt;不支持多种虾混养，认为会带来疾病的传播。&lt;/li&gt;
&lt;li&gt;急性肝胰腺坏死症
&lt;ul&gt;
&lt;li&gt;机理：Pirvp毒力蛋白对幼虾消化系统急性毒性&lt;/li&gt;
&lt;li&gt;菌株：副溶血弧菌、坎贝氏弧菌、欧文氏弧菌&lt;/li&gt;
&lt;li&gt;症状：肝脏白膜减少-白膜消失-颜色变浅-黄白-灰白-透明；虾体尾单附肢发蓝、虾体发蓝、虾肉浑浊、虾体发白；幼虾死亡率高、可以达到&amp;gt;80%；成虾死亡率低&lt;/li&gt;
&lt;li&gt;消毒：过硫酸氢钾消毒效果差；双氧水、聚六亚甲基胍盐酸盐具有较好的作用。&lt;/li&gt;
&lt;li&gt;预防：降低盐度至6‰之下，&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;EHP
&lt;ul&gt;
&lt;li&gt;机理：EHP感染导致肝脏能量供应途径受阻。&lt;/li&gt;
&lt;li&gt;因为一直在摄食，肝胰腺和肠道颜色较深，但是生长缓慢，肌肉腹节透明。&lt;/li&gt;
&lt;li&gt;EHP感染超过10^3拷贝/ng肝胰腺DNA，那么受感染的风险较大。&lt;/li&gt;
&lt;li&gt;EHP感染会导致体重降低30%。&lt;/li&gt;
&lt;li&gt;单独感染可能并不致死，与弧菌一起感染，死亡率增加。&lt;/li&gt;
&lt;li&gt;存在不同的传播模式，单峰或者双峰，可能在不同的发育阶段都可以感染。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于病原的检测：&lt;br /&gt;
* 杭州众测生物科技有限公司，开发了水生动物疾病分子检测系统解决方案。利用重组介导链替换核酸扩增技术RAAD，可以5-15分钟出结果。 * DHelix 广州双螺旋基因技术有限公司，也可以快速检测病毒、细菌等病原。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;2 配套技术&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 饲料&lt;/h3&gt;
&lt;p&gt;正大1-3号虾料，大虾宝、中虾宝，蛋白含量在40%以上。&lt;/p&gt;
&lt;p&gt;英伟公司（INVE）推出了两种饲料：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BREED-S FRESH 普瑞德种虾专用饲料，可以替代70%鲜活料、生物安全性高、提高产卵性能。它的营养成分：60%蛋白、Lipid（油脂）15%、n-3 HUFA 2.8%、Vit A 22500IU/kg、Vit E 500ppm、Vit c 3000ppm。在种虾饲料中添加益生菌（probiotics），产卵和孵化过程中，添加益生菌。&lt;/li&gt;
&lt;li&gt;FRiPPAK FRESH GOLD 金牌福瑞派系列虾苗专用微胶囊饵料。根据报告，可以替代65%-85%的卤虫。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;天津英创公司推出了育苗宝1号、鱼苗宝2号：主要是桡足类营养强化后，清洗、消毒，零下30度冷冻，真空包装。如果打算替代卤虫，死掉后，虾苗是否爱吃，是个问题。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.2 水质处理、分析和调节&lt;/h3&gt;
&lt;p&gt;参观了海兴农翁田场，育苗用水处理模式：抽水到蓄水池、一二级沙滤去除大颗粒杂质、遮光黑暗沉淀池、氯处理杀菌、沙港去除小颗粒杂质、去除有机物（蛋白分离器）、二次遮光沉淀、臭氧杀菌消毒、过滤细小颗粒吸附残余臭氧、过滤细小颗粒、紫外线杀菌、进入车间。&lt;/p&gt;
&lt;p&gt;正大试剂盒：&lt;strong&gt;余氯、亚硝酸盐、pH值、总碱度、钾盐、溶解氧、氨氮、钙镁离子&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;益生菌：水净宝、速清宝、育水宝、益菌宝、稳水宝、健肠宝&lt;/p&gt;
&lt;p&gt;矿物质：钙镁晶、钙/镁/钾速补、塘低净、海盐宝（提高盐度）、海蜜（提高总碱度）&lt;/p&gt;
&lt;p&gt;亚硝酸盐检测和调控是一个重点，可以多措并举：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;高效集排污、菌、藻、交换量&lt;/li&gt;
&lt;li&gt;从源头控制&lt;/li&gt;
&lt;li&gt;高溶解氧缓解毒性&lt;/li&gt;
&lt;li&gt;盐度千分之五的相对安全阈值&lt;/li&gt;
&lt;li&gt;发挥化能自养菌-硝化细菌的功效&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;多位专家强调：益生菌如芽孢杆菌增值速度慢，大约3个小时，而有害菌如弧菌增值速度在20分钟。因此应该使用高品质的益生菌。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.3 育苗技术&lt;/h3&gt;
&lt;p&gt;INVE 专家做了题为“The roadmap to quality shrimp fry”的报告，具体内容后续再行更新。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.4 养虾模式&lt;/h3&gt;
&lt;p&gt;3C：Clean shrimp、Clean water、Clean bottom&lt;/p&gt;
&lt;p&gt;外籍专家 M. Poulain - Project Manager 做了一个报告：Indoor zero water exchange super-intensive shrimp production 高密度零交换水工厂化对虾养殖模式。&lt;/p&gt;
&lt;p&gt;工厂化模式下的检测参考流程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;水源检测：初期检测、定期检测&lt;/li&gt;
&lt;li&gt;其他定期检测项目
&lt;ul&gt;
&lt;li&gt;菌相&lt;/li&gt;
&lt;li&gt;理化因子：氨氮、亚硝酸盐和酸碱度&lt;/li&gt;
&lt;li&gt;虾体：健康程度、生长速度、匀称度、肥满度&lt;/li&gt;
&lt;li&gt;饲料及动保产品的定期抽检&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;养虾达人李涛报告中的两种养殖模式：&lt;/p&gt;
&lt;p&gt;（1）换水量很少，连续3天换水量少于15%，类似于循环水养殖模式。&lt;/p&gt;
&lt;p&gt;这种模式应该以菌为主，以藻为辅。微生物作为主要的水质处理手段。这种方法通过较高频率的补充微生物，稳定水体菌相、水体理化指标。优点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;料比低。&lt;/li&gt;
&lt;li&gt;可复制性高。&lt;/li&gt;
&lt;li&gt;稳定性强。&lt;/li&gt;
&lt;li&gt;交换量低。&lt;/li&gt;
&lt;li&gt;超高菌相，压制弧菌。&lt;/li&gt;
&lt;li&gt;定向搭配藻种，减轻系统负担。&lt;/li&gt;
&lt;li&gt;充分利用微生物的代谢产物，保健抗病。&lt;/li&gt;
&lt;li&gt;受季节和光照的影响弱。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于这种模式，曝气要均匀，密集；气盘分散型点式布局。&lt;/p&gt;
&lt;p&gt;轻微搅动水，转水动力不能大，时间也不易过长，否则生成的絮团不沉浮在水中，虾吃不到。换水量也不宜过大，否则影响菌相和总菌量。&lt;/p&gt;
&lt;p&gt;（2）大换水量模式&lt;/p&gt;
&lt;p&gt;曝气：集中在外围，中间不宜放置过多的曝气头。否则影响水流动。&lt;/p&gt;
&lt;p&gt;转水：动水力度大，转水时间长。&lt;/p&gt;
&lt;p&gt;换水：量要大，保证水质清新。&lt;/p&gt;
&lt;p&gt;转水排污，由于没有足够的营养物质供细菌附着，使用微生态制剂效果并不显著。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.4 配套设备&lt;/h3&gt;
&lt;p&gt;有一家&lt;a href=&#34;http://www.yu2le.com/index.html#&#34;&gt;鱼儿乐&lt;/a&gt;公司,一家物联网平台，实现了养殖水质数据在线监控。有一套手册，有时间再仔细看一下。&lt;/p&gt;
&lt;p&gt;目前的最新系统是鱼儿乐X5技术：荧光法溶解氧传感器；寿命长，稳定性好，免维护。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Rgraphviz 学习笔记</title>
      <link>/post/rgraphviz-note1/</link>
      <pubDate>Mon, 22 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/rgraphviz-note1/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;http://www.graphviz.org/&#34;&gt;graphviz&lt;/a&gt; (Graph Visualization Software)是贝尔实验室鼓捣出来的一个用来展示结构化信息的软件。有一个对应的Rgraphviz包，学习一下，这是一个用来画系谱图的好工具。&lt;/p&gt;
&lt;p&gt;Rgraphviz包现在已经被收录到&lt;a href=&#34;http://www.bioconductor.org/&#34;&gt;Bioconductor&lt;/a&gt;平台，不在cran中，因此正常的安装包的流程无法获取该包。需要根据Bioconductor的&lt;a href=&#34;http://www.bioconductor.org/packages/release/bioc/html/Rgraphviz.html&#34;&gt;安装指令&lt;/a&gt;进行安装：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;source(&amp;quot;https://bioconductor.org/biocLite.R&amp;quot;)
biocLite(&amp;quot;Rgraphviz&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;graphviz&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. Graphviz的简单说明&lt;/h2&gt;
&lt;p&gt;这个软件包可以生成各种图像格式的文件，以及SVG文件，可以用于web网络展示；也可以生成PDF文件。&lt;/p&gt;
&lt;p&gt;graphviz 中国包括了很多布局器：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dot 默认的布局方式，主要是用于有向图。（画系谱，这应该是一个主要布局方式）&lt;/li&gt;
&lt;li&gt;neato 基于spring-model（又称force-based）算法&lt;/li&gt;
&lt;li&gt;twopi 径向布局&lt;/li&gt;
&lt;li&gt;circo 圆环布局&lt;/li&gt;
&lt;li&gt;fdp 无向图&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;graphviz默认使用一种dot语言来定义图形元素，然后选择上边的布局算法进行布局，最后生成结果。&lt;/p&gt;
&lt;p&gt;大体步骤如下： 1. 利用dot脚本，定义一个图，然后向图中，添加节点和边。 2. 定义节点和边各自的属性，比如形状、颜色、填充模式、字体等。 2. 使用布局引擎，调用布局算法，绘制图形。&lt;/p&gt;
&lt;p&gt;graphviz中三个基本的元素：图（graph）、节点（node）和边（edge） 参考一篇&lt;a href=&#34;http://icodeit.org/2015/11/using-graphviz-drawing/&#34;&gt;blog&lt;/a&gt;，关于graphviz的入门说明。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;graphviz&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;2. 初窥Graphviz&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::opts_chunk$set(echo = TRUE,fig.align = &amp;quot;center&amp;quot;)
suppressPackageStartupMessages(require(Rgraphviz))&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(123)
v &amp;lt;- letters[1:10] #储存节点
m &amp;lt;- 1:4 #
g1 &amp;lt;- randomGraph(v,m,0.2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;不同的布局样式，默认是有向图。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(g1)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:dot&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/dot-1.png&#34; alt=&#34;默认的有向图(dot)&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: 默认的有向图(dot)
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;第二种布局：neato&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(g1, &amp;quot;neato&amp;quot; )&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:neato&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/neato-1.png&#34; alt=&#34;第二种布局(neato)&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 2: 第二种布局(neato)
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;第三种布局，twopi：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(g1, &amp;quot;twopi&amp;quot; )&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:twopi&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/twopi-1.png&#34; alt=&#34;第三种布局(twopi)&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 3: 第三种布局(twopi)
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;3. 从头开始画一个图&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#定义节点
nodes &amp;lt;- c(&amp;quot;A&amp;quot;,&amp;quot;B&amp;quot;,&amp;quot;C&amp;quot;,&amp;quot;D&amp;quot;,&amp;quot;E&amp;quot;,&amp;quot;F&amp;quot;,&amp;quot;G&amp;quot;)
#生成一个简单的系谱图
rEG &amp;lt;- new(&amp;quot;graphNEL&amp;quot;,nodes=nodes,edgemode=&amp;quot;directed&amp;quot;)
rEG &amp;lt;- addEdge(from=&amp;quot;A&amp;quot;,to = &amp;quot;B&amp;quot;,graph = rEG,weights = 1)
rEG &amp;lt;- addEdge(from=&amp;quot;A&amp;quot;,to = &amp;quot;C&amp;quot;,graph = rEG,weights = 2)
rEG &amp;lt;- addEdge(from=&amp;quot;B&amp;quot;,to = &amp;quot;D&amp;quot;,graph = rEG,weights = 3)
rEG &amp;lt;- addEdge(from=&amp;quot;B&amp;quot;,to = &amp;quot;E&amp;quot;,graph = rEG,weights = 10)
rEG &amp;lt;- addEdge(from=&amp;quot;C&amp;quot;,to = &amp;quot;F&amp;quot;,graph = rEG,weights = 3)
rEG &amp;lt;- addEdge(from=&amp;quot;C&amp;quot;,to = &amp;quot;G&amp;quot;,graph = rEG,weights = 10)
#从上望下画
plot(rEG,attrs=list(graph=list(rankdir=&amp;quot;TB&amp;quot;)))  #TB from top to bottom&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34; style=&#34;text-align: center&#34;&gt;&lt;span id=&#34;fig:simple&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/simple-1.png&#34; alt=&#34;最简单的图&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 4: 最简单的图
&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;从下往上画，更符合系谱图的惯例&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/draworder-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;4. 调整节点的颜色&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(node=list(color=&amp;quot;deepskyblue4&amp;quot;,fontcolor=&amp;quot;orange&amp;quot;,fillcolor=&amp;quot;deepskyblue4&amp;quot;),graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/nodecolor-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;5. 调整节点的形状&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(node=list(shape=&amp;quot;ellipse&amp;quot;,color=&amp;quot;deepskyblue4&amp;quot;,fontcolor=&amp;quot;orange&amp;quot;,fillcolor=&amp;quot;deepskyblue4&amp;quot;),graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/nodeshape-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;6. 调整边的颜色&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(rEG,attrs=list(node=list(color=&amp;quot;deepskyblue4&amp;quot;,fontcolor=&amp;quot;orange&amp;quot;,fillcolor=&amp;quot;deepskyblue4&amp;quot;),edge=list(color=&amp;quot;deepskyblue4&amp;quot;),graph=list(rankdir=&amp;quot;BT&amp;quot;))) #BT from bottom to top&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-01-22-rgraphviz-note1_files/figure-html/edge-1.png&#34; width=&#34;672&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>字符串处理包stringr学习笔记-1</title>
      <link>/post/stringr-note-1/</link>
      <pubDate>Thu, 11 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/stringr-note-1/</guid>
      <description>&lt;script src=&#34;/rmarkdown-libs/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/rmarkdown-libs/str_view/str_view.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/rmarkdown-libs/str_view-binding/str_view.js&#34;&gt;&lt;/script&gt;


&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;suppressPackageStartupMessages(require(stringr))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;R中的字符串处理函数，不但多，而且难记，参数调用方法也不一致。stringr包提供了统一名称的函数调用形式。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 基本处理&lt;/h2&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.1 计算字符串的长度&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(&amp;quot;abc&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(&amp;quot;你好&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 2&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(NA)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] NA&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_length(c(&amp;quot;abc&amp;quot;,&amp;quot;ad&amp;quot;,&amp;quot;co&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3 2 2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str_length&lt;/code&gt;等同于R中自带的&lt;code&gt;nchar()&lt;/code&gt;函数可以正确的识别中文字的个数，赞一个。&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.2 提取子字符串&lt;/h3&gt;
&lt;p&gt;下述函数可以针对向量操作，提取子字符串&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;-  c(&amp;quot;abcdefgh&amp;quot;,&amp;quot;dljwowowjj&amp;quot;)
str_sub(x,2,4) #从第2个位置到第四个位置&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;bcd&amp;quot; &amp;quot;ljw&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sub(x,2,-2) #第二个位置到倒数第二个位置&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;bcdefg&amp;quot;   &amp;quot;ljwowowj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.3 修改字符串中指定位置的内容&lt;/h3&gt;
&lt;p&gt;修改字符串中某个位置的字符&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sub(x,3,5) &amp;lt;- &amp;quot;XYZ&amp;quot;
x&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfgh&amp;quot;   &amp;quot;dlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.4 重复字符串的内容&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_dup(x,3) #表示每个字符串重复两次&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfghabXYZfghabXYZfgh&amp;quot;       &amp;quot;dlXYZwowjjdlXYZwowjjdlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_dup(x,c(2,3)) #表示第一个字符串重复2次，第二个字符串重复3次&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfghabXYZfgh&amp;quot;               &amp;quot;dlXYZwowjjdlXYZwowjjdlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.5 填补字符串至一定长度&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_pad(x,str_length(x[2])) #把第一个字符串用空格补充至跟第二字符串一样长&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;  abXYZfgh&amp;quot; &amp;quot;dlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_pad(string = x,width = str_length(x[2]),side = &amp;quot;right&amp;quot;, pad = &amp;quot;?&amp;quot;) #一个标准写法，用？号补充，在填补在右边&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;abXYZfgh??&amp;quot; &amp;quot;dlXYZwowjj&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;缩写字符串&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_trunc(x,3)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;...&amp;quot; &amp;quot;...&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;默认的最小缩写字符串长度就是3（“…”），因此直接显示为“…”。&lt;/p&gt;
&lt;p&gt;如果想缩写为2位，可以这样写：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_trunc(x,2,ellipsis = &amp;quot;.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;a.&amp;quot; &amp;quot;d.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.6 剔除字符串中的空格&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;  a   &amp;quot;, &amp;quot;b   &amp;quot;,  &amp;quot;   c&amp;quot;)
str_trim(x)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.7 大小写转换+本地语言支持&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- &amp;quot;You are beautiful.&amp;quot;
str_to_lower(x) #转换为小写&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;you are beautiful.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_upper(x) #转换为大写&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;YOU ARE BEAUTIFUL.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_to_title(x) #首字母大写&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;You Are Beautiful.&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- &amp;quot;i love you&amp;quot;
str_to_upper(x,locale = &amp;quot;tr&amp;quot;) #土耳其语,i带点&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;&amp;lt;U+0130&amp;gt; LOVE YOU&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#stringi::stri_locale_list() #语言支持列表&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.8 排名和排序&lt;/h3&gt;
&lt;p&gt;获得每个元素的排名&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;a&amp;quot;,&amp;quot;y&amp;quot;,&amp;quot;i&amp;quot;,&amp;quot;o&amp;quot;)
str_order(x)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 3 4 2&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;y &amp;lt;- c(&amp;quot;ac&amp;quot;,&amp;quot;oa&amp;quot;,&amp;quot;bp&amp;quot;,&amp;quot;oo&amp;quot;)
str_order(y)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 1 3 2 4&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对y中的元素进行排序&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(y)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;ac&amp;quot; &amp;quot;bp&amp;quot; &amp;quot;oa&amp;quot; &amp;quot;oo&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#另外一种实现方式
y[str_order(y)]&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;ac&amp;quot; &amp;quot;bp&amp;quot; &amp;quot;oa&amp;quot; &amp;quot;oo&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;降序排列&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(x=y,decreasing = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;oo&amp;quot; &amp;quot;oa&amp;quot; &amp;quot;bp&amp;quot; &amp;quot;ac&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;字符类型的数字，支持按照数字大小排序&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- as.character(c(sample(1:100,5),1000))
x&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;1&amp;quot;    &amp;quot;32&amp;quot;   &amp;quot;68&amp;quot;   &amp;quot;16&amp;quot;   &amp;quot;15&amp;quot;   &amp;quot;1000&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(x)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;1&amp;quot;    &amp;quot;1000&amp;quot; &amp;quot;15&amp;quot;   &amp;quot;16&amp;quot;   &amp;quot;32&amp;quot;   &amp;quot;68&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_sort(x,numeric =TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;1&amp;quot;    &amp;quot;15&amp;quot;   &amp;quot;16&amp;quot;   &amp;quot;32&amp;quot;   &amp;quot;68&amp;quot;   &amp;quot;1000&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;1.9 合并字符串&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_c(&amp;quot;I&amp;quot;,&amp;quot;love&amp;quot;,&amp;quot;this&amp;quot;,&amp;quot;world!&amp;quot;,sep = &amp;quot; &amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;I love this world!&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_c(c(&amp;quot;2018&amp;quot;,&amp;quot;01&amp;quot;,&amp;quot;18&amp;quot;),collapse = &amp;quot;-&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;2018-01-18&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;2 模式匹配&lt;/h2&gt;
&lt;div id=&#34;-regular-expression&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 正则表达 regular expression&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;str_view()&lt;/code&gt;和&lt;code&gt;str_view_all()&lt;/code&gt;用来展示正则表达式是如何匹配的，是学习正则表达式的好帮手。&lt;/p&gt;
&lt;div class=&#34;section level4&#34;&gt;
&lt;h4&gt;2.1.1 基础匹配&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;apple&amp;quot;, &amp;quot;banana&amp;quot;, &amp;quot;pear&amp;quot;)
str_view(x, &amp;quot;an&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;b&lt;span class=&#39;match&#39;&gt;an&lt;\/span&gt;ana&lt;\/li&gt;\n  &lt;li&gt;pear&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;接下来会稍微复杂一些，加入通配符&lt;code&gt;.&lt;/code&gt;，匹配任何字符：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(x,&amp;quot;.a.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-2&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-2&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;ban&lt;\/span&gt;ana&lt;\/li&gt;\n  &lt;li&gt;p&lt;span class=&#39;match&#39;&gt;ear&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;但是如何匹配字符串中的&lt;code&gt;.&lt;/code&gt;呢？我们需要一个逃脱符，也就是反斜杠&lt;code&gt;\&lt;/code&gt;，英文是blackflash，&lt;code&gt;\.&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;但是这里有一个问题，那就是在普通字符串处理中，R也定义了&lt;code&gt;\&lt;/code&gt;是一个逃脱符，而正则表达式又是通过字符串表达出来的，因此，为了匹配&lt;code&gt;.&lt;/code&gt;，需要写为&lt;code&gt;\\.&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;writeLines(&amp;quot;\\.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## \.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(&amp;quot;b.a&amp;quot;,&amp;quot;\\.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-3&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-3&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;b&lt;span class=&#39;match&#39;&gt;.&lt;\/span&gt;a&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;那么另外一个问题是，如何匹配文字&lt;code&gt;\&lt;/code&gt;。根据规则，应该是&lt;code&gt;\\&lt;/code&gt;。但是，要想在R中输出&lt;code&gt;\\&lt;/code&gt;字符串（两个反斜杠），我们每个前边都需要再加一个反斜杠，这就变成了四个反斜杠&lt;code&gt;\\\\&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;writeLines(&amp;quot;\\\\&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## \\&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(&amp;quot;a\\b&amp;quot;,&amp;quot;\\\\&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-4&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-4&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;a&lt;span class=&#39;match&#39;&gt;\\&lt;\/span&gt;b&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;section level4&#34;&gt;
&lt;h4&gt;2.1.2 引导符&lt;/h4&gt;
&lt;p&gt;如何匹配开头或者结尾字符。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;^&lt;/code&gt;用于匹配开头。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$&lt;/code&gt;用于匹配结尾。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x &amp;lt;- c(&amp;quot;apple&amp;quot;, &amp;quot;banana&amp;quot;, &amp;quot;pear&amp;quot;)
str_view(x, &amp;quot;^a&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-5&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-5&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pple&lt;\/li&gt;\n  &lt;li&gt;banana&lt;\/li&gt;\n  &lt;li&gt;pear&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(x,&amp;quot;a$&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-6&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-6&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;banan&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;pear&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(x,&amp;quot;^pear$&amp;quot;) #匹配完整字符串&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;div id=&#34;htmlwidget-7&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-7&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;apple&lt;\/li&gt;\n  &lt;li&gt;banana&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;pear&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt; 如何匹配文字&lt;code&gt;$^$&lt;/code&gt;？&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(&amp;quot;$^$&amp;quot;,&amp;quot;\\$\\^\\$&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-8&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-8&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;$^$&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;一个小练习题，从&lt;code&gt;stringr::words&lt;/code&gt;900多个单词中找出首字母是y的所有单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;^y&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;div id=&#34;htmlwidget-9&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-9&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;ear&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;es&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;esterday&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;et&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;ou&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;y&lt;\/span&gt;oung&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt; 结尾是x的所有单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;x$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-10&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-10&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;bo&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;se&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;si&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;ta&lt;span class=&#39;match&#39;&gt;x&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;列出长度为11的所有单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;^.{11}$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-11&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-11&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;appropriate&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;environment&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;opportunity&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;responsible&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div class=&#34;section level4&#34;&gt;
&lt;h4&gt;2.1.2 匹配不同类型的字符&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;.&lt;/code&gt;匹配任何字符，其他类型的字符包括： * &lt;code&gt;\d&lt;/code&gt;匹配任何数字 * &lt;code&gt;\s&lt;/code&gt;匹配空格、制表符、换行符 * &lt;code&gt;[abc]&lt;/code&gt;匹配abc中的任一个字符 * &lt;code&gt;[^abc]&lt;/code&gt; 匹配除了abc以外的任一个字符&lt;/p&gt;
&lt;p&gt;小小练习题。&lt;/p&gt;
&lt;p&gt;查找元音字母打头的单词&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;^[aeiou]&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-12&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-12&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ble&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;bout&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;bsolute&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ccept&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ccount&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;chieve&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;cross&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ct&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ctive&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ctual&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;dd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ddress&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;dmit&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;dvertise&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ffect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;fford&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;fter&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;fternoon&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gain&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gainst&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ge&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gent&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;go&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;gree&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ir&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ll&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;llow&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lmost&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;long&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lready&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lright&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lso&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lthough&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;lways&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;merica&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;mount&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;nd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;nother&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;nswer&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ny&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;part&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pparent&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ppear&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pply&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ppoint&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;pproach&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ppropriate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rea&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rgue&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rm&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;round&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rrange&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;rt&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;s&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;sk&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ssociate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ssume&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;t&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ttend&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;uthority&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;vailable&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;ware&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;way&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;a&lt;\/span&gt;wful&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ach&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;arly&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ast&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;asy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;at&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;conomy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ducate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ffect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;gg&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ight&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ither&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;lect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;lectric&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;leven&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;lse&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;mploy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ncourage&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ngine&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nglish&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;njoy&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nough&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nter&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;nvironment&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;qual&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;special&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;urope&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ven&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;vening&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ver&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;very&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;vidence&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xact&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xample&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xcept&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xcuse&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xercise&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xist&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xpect&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xpense&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xperience&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xplain&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xpress&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;xtra&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;e&lt;\/span&gt;ye&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;dea&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;dentify&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;f&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;magine&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;mportant&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;mprove&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;n&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nclude&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ncome&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ncrease&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ndeed&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ndividual&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ndustry&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nform&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nside&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nstead&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nsure&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nterest&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nto&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ntroduce&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nvest&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;nvolve&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;ssue&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;t&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;i&lt;\/span&gt;tem&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;bvious&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ccasion&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;dd&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;f&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ff&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ffer&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ffice&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ften&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;kay&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ld&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;n&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;nce&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ne&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;nly&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;pen&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;perate&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;pportunity&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ppose&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;r&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;rder&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;rganize&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;riginal&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ther&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;therwise&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ught&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ut&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;ver&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;o&lt;\/span&gt;wn&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nder&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nderstand&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nion&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nit&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nite&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;niversity&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;nless&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;ntil&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;p&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;pon&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;se&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;u&lt;\/span&gt;sual&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;那些单词结尾是“ed”但不是“eed”的单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;[^e]ed$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-13&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-13&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;bed&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;hund&lt;span class=&#39;match&#39;&gt;red&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;red&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;筛选出结尾是ing或者ise的单词&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(stringr::words,&amp;quot;ing|ise$&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-14&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-14&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;advert&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;br&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;dur&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;even&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;exerc&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;k&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;mean&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;morn&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;otherw&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;pract&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;ra&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;real&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;r&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;r&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;s&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;s&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;le&lt;\/li&gt;\n  &lt;li&gt;surpr&lt;span class=&#39;match&#39;&gt;ise&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;th&lt;span class=&#39;match&#39;&gt;ing&lt;\/span&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;验证字母q后边是否总是跟着字母u，也就是说查找那些q后边不是u的单词：&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(words,&amp;quot;q[^u]&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;div id=&#34;htmlwidget-15&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-15&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt; 结果是没找到。&lt;/p&gt;
&lt;p&gt;验证另外一个字母搭配规则，i在e前或者是在c后边。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;str_view(words,&amp;quot;ie|ci&amp;quot;,match = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-16&#34; style=&#34;width:960px;height:auto;&#34; class=&#34;str_view html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-16&#34;&gt;{&#34;x&#34;:{&#34;html&#34;:&#34;&lt;ul&gt;\n  &lt;li&gt;ach&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ve&lt;\/li&gt;\n  &lt;li&gt;asso&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ate&lt;\/li&gt;\n  &lt;li&gt;bel&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ve&lt;\/li&gt;\n  &lt;li&gt;br&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;f&lt;\/li&gt;\n  &lt;li&gt;&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ty&lt;\/li&gt;\n  &lt;li&gt;cl&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;nt&lt;\/li&gt;\n  &lt;li&gt;coun&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;l&lt;\/li&gt;\n  &lt;li&gt;de&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;de&lt;\/li&gt;\n  &lt;li&gt;de&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;sion&lt;\/li&gt;\n  &lt;li&gt;d&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;espe&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;al&lt;\/li&gt;\n  &lt;li&gt;exer&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;se&lt;\/li&gt;\n  &lt;li&gt;exper&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;nce&lt;\/li&gt;\n  &lt;li&gt;f&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ld&lt;\/li&gt;\n  &lt;li&gt;fr&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;nd&lt;\/li&gt;\n  &lt;li&gt;l&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;p&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;ce&lt;\/li&gt;\n  &lt;li&gt;qu&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;t&lt;\/li&gt;\n  &lt;li&gt;s&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ence&lt;\/li&gt;\n  &lt;li&gt;so&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;al&lt;\/li&gt;\n  &lt;li&gt;so&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;ety&lt;\/li&gt;\n  &lt;li&gt;spe&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;al&lt;\/li&gt;\n  &lt;li&gt;spe&lt;span class=&#39;match&#39;&gt;ci&lt;\/span&gt;fic&lt;\/li&gt;\n  &lt;li&gt;t&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;&lt;\/li&gt;\n  &lt;li&gt;v&lt;span class=&#39;match&#39;&gt;ie&lt;\/span&gt;w&lt;\/li&gt;\n&lt;\/ul&gt;&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>windows系统下转换Rmd文档为PDF文档</title>
      <link>/post/rmd-to-pdf-in-r/</link>
      <pubDate>Sun, 07 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/rmd-to-pdf-in-r/</guid>
      <description>&lt;p&gt;如何将Rmd文档输出为PDF，一直是一个挑战性的工作，我在windows系统上就没有成功过。主要是搞不定巨大的tex安装包。不过最近有个好消息，&lt;a href=&#34;https://yihui.name/&#34;&gt;yihui&lt;/a&gt;开发了&lt;a href=&#34;https://yihui.name/tinytex/&#34;&gt;tinytex&lt;/a&gt;包，自动化了tex包的安装和配置工作。目前，这个包已经挂在cran上，可以通过rstudio安装。&lt;/p&gt;
&lt;p&gt;安装tinytex后，在Rstudio中有以下2点需要配置：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;点击Tools菜单-&amp;gt; Global Options-&amp;gt; sweave：typeset LaTeX into PDF using: 修改为XeLaTeX。&lt;/li&gt;
&lt;li&gt;knit Output Options部分，在Advanced中注意同样选择为XeLaTex。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;文件中如果包括中文，有两个方面需要注意：&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 文本中包括中文&lt;/h2&gt;
&lt;p&gt;参考这个&lt;a href=&#34;https://www.jianshu.com/p/0bfda49f1a52&#34;&gt;链接&lt;/a&gt;，进行如下设置：&lt;/p&gt;
&lt;pre class=&#34;tex&#34;&gt;&lt;code&gt;\usepackage{xeCJK}  
\setCJKmainfont{simsun.ttc}  % 字体可以更换&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;把上述代码单独保存为一个文件，如header.tex，注意与Rmd文件在同一个路径下。其作用貌似是调用xeCJK包，中文字体设置为宋体。如果tinytex检测到系统中没有安装xeCJK包，那么会自动下载安装。&lt;/p&gt;
&lt;p&gt;但是尝试了一下，好像tinytex自动安装xeCJK存在问题，包的名称应该全部是小写。在Rstudio的console中手动安装，&lt;strong&gt;注意xecjk需要全部为小写&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;tinytex::tlmgr_install(“xecjk”)&lt;/p&gt;
&lt;p&gt;ps: 安装了rmarkdown最新开发版，上述问题就解决了：&lt;code&gt;devtools::install_github(&amp;quot;rstudio/rmarkdown&amp;quot;)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;然后，在新建立的Rmd文档中YAML头中，设置包括header.tex文件：&lt;/p&gt;
&lt;pre class=&#34;yaml&#34;&gt;&lt;code&gt;output: 
  pdf_document: 
    includes:
      in_header: header.tex
    keep_tex: yes
    latex_engine: xelatex&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;2.图片中中文设置&lt;/h2&gt;
&lt;p&gt;主要是利用showtext包完成，具体参考&lt;a href=&#34;https://luansheng.netlify.com/post/using-other-system-chinese-fonts-in-r/&#34;&gt;此篇blog&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;点击下载&lt;a href=&#34;/post/RmdtoPDF.zip&#34;&gt;Rmd文档和生成的PDF文档&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>如何在EV3上安装ev3dev系统 </title>
      <link>/post/how-to-install-ev3dev/</link>
      <pubDate>Sat, 06 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/how-to-install-ev3dev/</guid>
      <description>&lt;p&gt;EV3是乐高机器人，除了官方系统，有人进行逆向工程，建立了一个基于Debian的开源linux系统&lt;a href=&#34;http://www.ev3dev.org/&#34;&gt;EV3DEV&lt;/a&gt;。然后就可以利用python等编程语言，控制EV3机器人。本文记录基于Windows 10系统的安装过程。&lt;/p&gt;
&lt;p&gt;详细的过程，可以参考官方网站&lt;a href=&#34;http://www.ev3dev.org/docs/getting-started/&#34;&gt;Getting Started with ev3dev&lt;/a&gt;。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 准备的硬件&lt;/h2&gt;
&lt;p&gt;需要一个micro SD卡，我购买的是&lt;a href=&#34;https://item.jd.com/343546.html&#34;&gt;金士顿（Kingston）16GB Class4 TF(Micro SD)存储卡&lt;/a&gt;。看官网介绍，大于32G的卡，EV3读不出来。&lt;/p&gt;
&lt;p&gt;另外需要一个读卡器，同样购买的&lt;a href=&#34;https://item.jd.com/343389.html&#34;&gt;金士顿（Kingston）USB 2.0 TF（Micro SD）读卡器（FCR-MRG2）&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;还需要一台计算机，最好是笔记本电脑，支持蓝牙或者wifi无线网络。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ev3dev&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;2.制作EV3DEV启动盘&lt;/h2&gt;
&lt;div id=&#34;ev3dev&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.1 下载EV3DEV镜像文件。&lt;/h3&gt;
&lt;p&gt;目前官网上的下载地址下载不了，通过其&lt;a href=&#34;https://github.com/ev3dev&#34;&gt;github&lt;/a&gt;找到了下载地址，在&lt;a href=&#34;https://github.com/ev3dev/ev3dev/releases&#34;&gt;这里&lt;/a&gt;，目前最新的是2017-09-14发布的镜像文件。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;sd&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2.2 把镜像文件烧录到sd卡&lt;/h3&gt;
&lt;p&gt;下载原文中推荐的img镜像烧录软件&lt;a href=&#34;https://etcher.io/&#34;&gt;etcher&lt;/a&gt;，这个软件使用简单，非常好用。&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;ev3devev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;3. 利用EV3DEV启动EV3&lt;/h2&gt;
&lt;p&gt;把&lt;strong&gt;sd卡正面跟EV3正面一个方向&lt;/strong&gt;，插入卡槽中。然后从EV3主机上按启动键，会出现一个带有小企鹅的启动画面，启动需要等一段时间。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;4. 通过蓝牙连接EV3主机与电脑&lt;/h2&gt;
&lt;p&gt;为了控制EV3，必须要有另外一台电脑，与EV3建立连接，控制EV3。本文推荐蓝牙连接。因为如果想通过wifi连接，还需要再买一个EV3专用的无线网卡。&lt;/p&gt;
&lt;p&gt;具体的连接方法，参考&lt;a href=&#34;http://www.ev3dev.org/docs/tutorials/connecting-to-the-internet-via-bluetooth/&#34;&gt;这里&lt;/a&gt;。请注意，文中给出了连接安卓、苹果和windows三个系统的蓝牙连接设置方法，win10的设置在网页最下边。务必要严格按照网页要求的步骤来设置。&lt;/p&gt;
&lt;p&gt;但是，目前按照这个教程，设置EV3跟电脑蓝牙连接后，EV3并不能通过蓝牙连接电脑的无线网络上网。这是一个当前&lt;strong&gt;还没有解决的问题&lt;/strong&gt;。&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;sshev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;5. 通过SSH协议登录并控制EV3主机&lt;/h2&gt;
&lt;p&gt;如果是win10系统，下载一个&lt;a href=&#34;https://www.chiark.greenend.org.uk/~sgtatham/putty/&#34;&gt;putty软件&lt;/a&gt;，然后填入在EV3主机中显示的IP地址，譬如：169.254.26.0，然后点击open，会弹出一个黑色的命令行窗口，稍微等一会，根据提示输入用户名：&lt;strong&gt;robot&lt;/strong&gt;，回车后，根据提示输入密码：&lt;strong&gt;maker&lt;/strong&gt;，然后等一会，如果登陆成功，会显示如下画面：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/puttyev3.png&#34; title=&#34;putty成功登陆EV3&#34; alt=&#34;putty成功登陆EV3&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;putty成功登陆EV3&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;pythonev3&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;6. 通过python控制EV3&lt;/h2&gt;
&lt;p&gt;可以认为，python是EV3DEV系统支持的官方语言。想学习如何利用pyhton控制EV3，可以参考&lt;a href=&#34;http://python-ev3dev.readthedocs.io/en/stable/&#34;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;div id=&#34;ev3&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;6.1 控制EV3说话&lt;/h3&gt;
&lt;p&gt;“hello,world”是编程学习时的经典输出语句。下边我们试着让EV3直接说出来：&lt;/p&gt;
&lt;p&gt;首先在成功连接EV3的putty窗口中，输入&lt;strong&gt;python3&lt;/strong&gt;，启动python环境，成功后是这样：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/puttyev3python.png&#34; title=&#34;EV3上启动python3&#34; alt=&#34;EV3上启动python3&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;EV3上启动python3&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;然后在python控制台下，输入下列命令：&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;#导入ev3dev.ev3模块
import ev3dev.ev3 as ev3

#调用ev3的声音模块发出声音
ev3.Sound.speak(&amp;#39;hello,world&amp;#39;).wait()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;程序运行成功后的putty窗口：&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;/post/images/puttyev3helloworld.png&#34; title=&#34;EV3说出hello, world&#34; alt=&#34;EV3说出hello, world&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;EV3说出hello, world&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;section level3&#34;&gt;
&lt;h3&gt;6.2 控制马达转动&lt;/h3&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;#控制连接到主机A端口的一个大型马达
m = ev3.LargeMotor(&amp;#39;outA&amp;#39;)

# speed_sp控制马达转速，这里的用的是ticks per second
# time_sp控制马达的启动时间，表示的是毫秒
m.run_timed(time_sp=3000, speed_sp=500)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;todo&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;todo&lt;/h3&gt;
&lt;p&gt;如何把电脑写好的python程序传输到EV3上并执行？&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.ev3dev.org/docs/tutorials/&#34;&gt;EV3DEV教程中心&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://python-ev3dev.readthedocs.io/en/stable/rpyc.html&#34;&gt;Working with ev3dev remotely using RPyC&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>try od package</title>
      <link>/post/try-od-package/</link>
      <pubDate>Wed, 03 Jan 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/try-od-package/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://asreml.org/optimal-design/&#34;&gt;od&lt;/a&gt;包是一个可以给出数量遗传学&lt;strong&gt;优化试验设计&lt;/strong&gt;的包。试着通过实例来理解背后的设计原理。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&#34;https://asreml.org/resources/od/od_0.75.zip&#34;&gt;windows&lt;/a&gt;包没有自带数据，从&lt;a href=&#34;https://asreml.org/resources/od/od_0.75_R_linux-intel64.tar.gz&#34;&gt;linux&lt;/a&gt;包中把数据提出来。&lt;/p&gt;
&lt;p&gt;关于od包背后的设计原理，参考作者的博士论文：On The Optimal Design of Experiments Under the Linear Mixed Model。&lt;/p&gt;
&lt;div class=&#34;section level2&#34;&gt;
&lt;h2&gt;1. 加载数据文件&lt;/h2&gt;
&lt;p&gt;genex是一个作物遗传改良的实验数据，包括213个品种。实验设计为部分重复设计，包括2个Block,每个block内有48行×3列。部分品种有2次实验记录。 genex.Ainv 包括了213个品种间的加性遗传相关矩阵。注意od包要求genex.Ainv数据框包括一个属性rowNames,存储row列中整数对应的品种名。&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(data.table)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Loading required package: data.table&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;genex &amp;lt;- fread(file=&amp;quot;genex.csv&amp;quot;,stringsAsFactors = TRUE)
genex[,&amp;quot;:=&amp;quot;(Row=as.factor(Row),Block=as.factor(Block),Column=as.factor(Column))]
genex.Ainv &amp;lt;- fread(file=&amp;quot;genex.Ainv.csv&amp;quot;,stringsAsFactors = TRUE)
genex.Ainv.rowNames &amp;lt;- fread(file=&amp;quot;genex.Ainv.rowNames.csv&amp;quot;,sep=&amp;quot;,&amp;quot;,stringsAsFactors = FALSE,header = FALSE)
attr(genex.Ainv,which = &amp;quot;rowNames&amp;quot;) &amp;lt;- genex.Ainv.rowNames$V1&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(od)
genex.G &amp;lt;- od.init(`ped(Entry)` = 1, `ide(Entry)` = 0.1, Block = 0.1,Column = 0.4, Row = 0.2)
genex.R &amp;lt;- od.init(`Column:Row|Column` = 0.2, `Column:Row|Row` = 0.5)
genex.od &amp;lt;- od(random = ~ped(Entry) + ide(Entry) + Block + Column + Row, 
               rcov = ~ar1(Column):ar1(Row), 
               permute = ~ped(Entry) |ide(Entry),
               swap = ~Block, Gstart = genex.G, 
               Rstart = genex.R,
               ginv = list(Entry = genex.Ainv), 
               geneticEffects = &amp;quot;total&amp;quot;,
               search = &amp;quot;tabu&amp;quot;, 
               maxit = 5, 
               data = genex)
save.image()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;genex.od$design&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
